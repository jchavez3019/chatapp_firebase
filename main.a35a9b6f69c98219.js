"use strict";var t1e=Object.defineProperty,n1e=Object.defineProperties,i1e=Object.getOwnPropertyDescriptors,K7=Object.getOwnPropertySymbols,r1e=Object.prototype.hasOwnProperty,s1e=Object.prototype.propertyIsEnumerable,Q7=(me,An,gi)=>An in me?t1e(me,An,{enumerable:!0,configurable:!0,writable:!0,value:gi}):me[An]=gi,Kw=(me,An)=>{for(var gi in An||(An={}))r1e.call(An,gi)&&Q7(me,gi,An[gi]);if(K7)for(var gi of K7(An))s1e.call(An,gi)&&Q7(me,gi,An[gi]);return me},Qw=(me,An)=>n1e(me,i1e(An));(self.webpackChunkchatapp=self.webpackChunkchatapp||[]).push([[179],{144:()=>{function me(n){return"function"==typeof n}function An(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const gi=An(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function vc(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Et{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(me(i))try{i()}catch(s){e=s instanceof gi?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{S1(s)}catch(o){e=null!=e?e:[],o instanceof gi?e=[...e,...o.errors]:e.push(o)}}if(e)throw new gi(e)}}add(e){var t;if(e&&e!==this)if(this.closed)S1(e);else{if(e instanceof Et){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&vc(t,e)}remove(e){const{_finalizers:t}=this;t&&vc(t,e),e instanceof Et&&e._removeParent(this)}}Et.EMPTY=(()=>{const n=new Et;return n.closed=!0,n})();const D1=Et.EMPTY;function I1(n){return n instanceof Et||n&&"closed"in n&&me(n.remove)&&me(n.add)&&me(n.unsubscribe)}function S1(n){me(n)?n():n.unsubscribe()}const Ga={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Km={setTimeout(n,e,...t){const{delegate:i}=Km;return(null==i?void 0:i.setTimeout)?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Km;return((null==e?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function T1(n){Km.setTimeout(()=>{const{onUnhandledError:e}=Ga;if(!e)throw n;e(n)})}function Yw(){}const Y7=Xw("C",void 0,void 0);function Xw(n,e,t){return{kind:n,value:e,error:t}}let Wa=null;function Qm(n){if(Ga.useDeprecatedSynchronousErrorHandling){const e=!Wa;if(e&&(Wa={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=Wa;if(Wa=null,t)throw i}}else n()}class Zw extends Et{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,I1(e)&&e.add(this)):this.destination=iQ}static create(e,t,i){return new zd(e,t,i)}next(e){this.isStopped?eC(function Z7(n){return Xw("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?eC(function X7(n){return Xw("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?eC(Y7,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const eQ=Function.prototype.bind;function Jw(n,e){return eQ.call(n,e)}class tQ{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Ym(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Ym(i)}else Ym(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ym(t)}}}class zd extends Zw{constructor(e,t,i){let r;if(super(),me(e)||!e)r={next:null!=e?e:void 0,error:null!=t?t:void 0,complete:null!=i?i:void 0};else{let s;this&&Ga.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Jw(e.next,s),error:e.error&&Jw(e.error,s),complete:e.complete&&Jw(e.complete,s)}):r=e}this.destination=new tQ(r)}}function Ym(n){Ga.useDeprecatedSynchronousErrorHandling?function J7(n){Ga.useDeprecatedSynchronousErrorHandling&&Wa&&(Wa.errorThrown=!0,Wa.error=n)}(n):T1(n)}function eC(n,e){const{onStoppedNotification:t}=Ga;t&&Km.setTimeout(()=>t(n,e))}const iQ={closed:!0,next:Yw,error:function nQ(n){throw n},complete:Yw},tC="function"==typeof Symbol&&Symbol.observable||"@@observable";function Lo(n){return n}let it=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function sQ(n){return n&&n instanceof Zw||function rQ(n){return n&&me(n.next)&&me(n.error)&&me(n.complete)}(n)&&I1(n)}(t)?t:new zd(t,i,r);return Qm(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=x1(i))((r,s)=>{const o=new zd({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[tC](){return this}pipe(...t){return function A1(n){return 0===n.length?Lo:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}(t)(this)}toPromise(t){return new(t=x1(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function x1(n){var e;return null!==(e=null!=n?n:Ga.Promise)&&void 0!==e?e:Promise}const oQ=An(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let H=(()=>{class n extends it{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new M1(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new oQ}next(t){Qm(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Qm(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Qm(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?D1:(this.currentObservers=null,s.push(t),new Et(()=>{this.currentObservers=null,vc(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new it;return t.source=this,t}}return n.create=(e,t)=>new M1(e,t),n})();class M1 extends H{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:D1}}function k1(n){return me(null==n?void 0:n.lift)}function Yt(n){return e=>{if(k1(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Rt(n,e,t,i,r){return new aQ(n,e,t,i,r)}class aQ extends Zw{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function we(n,e){return Yt((t,i)=>{let r=0;t.subscribe(Rt(i,s=>{i.next(n.call(e,s,r++))}))})}function rC(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]])}return t}function Vo(n){return this instanceof Vo?(this.v=n,this):new Vo(n)}function O1(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(h){i[h]&&(r[h]=function(f){return new Promise(function(p,m){s.push([h,f,p,m])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof Vo?Promise.resolve(h.value.v).then(c,u):d(s[0][2],h)}(i[h](f))}catch(p){d(s[0][3],p)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function N1(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function oC(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}const aC=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function F1(n){return me(null==n?void 0:n.then)}function L1(n){return me(n[tC])}function V1(n){return Symbol.asyncIterator&&me(null==n?void 0:n[Symbol.asyncIterator])}function B1(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const U1=function IQ(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function j1(n){return me(null==n?void 0:n[U1])}function H1(n){return O1(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield Vo(t.read());if(r)return yield Vo(void 0);yield yield Vo(i)}}finally{t.releaseLock()}})}function $1(n){return me(null==n?void 0:n.getReader)}function Ri(n){if(n instanceof it)return n;if(null!=n){if(L1(n))return function SQ(n){return new it(e=>{const t=n[tC]();if(me(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(aC(n))return function TQ(n){return new it(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(F1(n))return function AQ(n){return new it(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,T1)})}(n);if(V1(n))return z1(n);if(j1(n))return function xQ(n){return new it(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if($1(n))return function MQ(n){return z1(H1(n))}(n)}throw B1(n)}function z1(n){return new it(e=>{(function kQ(n,e){var t,i,r,s;return function R1(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=N1(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function js(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function yn(n,e,t=1/0){return me(e)?yn((i,r)=>we((s,o)=>e(i,s,r,o))(Ri(n(i,r))),t):("number"==typeof e&&(t=e),Yt((i,r)=>function RQ(n,e,t,i,r,s,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=m=>c<i?p(m):l.push(m),p=m=>{s&&e.next(m),c++;let g=!1;Ri(t(m,u++)).subscribe(Rt(e,b=>{null==r||r(b),s?f(b):e.next(b)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<i;){const b=l.shift();o?js(e,o,()=>p(b)):p(b)}h()}catch(b){e.error(b)}}))};return n.subscribe(Rt(e,f,()=>{d=!0,h()})),()=>{null==a||a()}}(i,r,n,t)))}function qd(n=1/0){return yn(Lo,n)}const xr=new it(n=>n.complete());function q1(n){return n&&me(n.schedule)}function lC(n){return n[n.length-1]}function G1(n){return me(lC(n))?n.pop():void 0}function Gd(n){return q1(lC(n))?n.pop():void 0}function Xm(n,e=0){return Yt((t,i)=>{t.subscribe(Rt(i,r=>js(i,n,()=>i.next(r),e),()=>js(i,n,()=>i.complete(),e),r=>js(i,n,()=>i.error(r),e)))})}function Zm(n,e=0){return Yt((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function W1(n,e){if(!n)throw new Error("Iterable cannot be null");return new it(t=>{js(t,e,()=>{const i=n[Symbol.asyncIterator]();js(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function zn(n,e){return e?function UQ(n,e){if(null!=n){if(L1(n))return function NQ(n,e){return Ri(n).pipe(Zm(e),Xm(e))}(n,e);if(aC(n))return function LQ(n,e){return new it(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(F1(n))return function FQ(n,e){return Ri(n).pipe(Zm(e),Xm(e))}(n,e);if(V1(n))return W1(n,e);if(j1(n))return function VQ(n,e){return new it(t=>{let i;return js(t,e,()=>{i=n[U1](),js(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>me(null==i?void 0:i.return)&&i.return()})}(n,e);if($1(n))return function BQ(n,e){return W1(H1(n),e)}(n,e)}throw B1(n)}(n,e):Ri(n)}function Wd(...n){const e=Gd(n),t=function OQ(n,e){return"number"==typeof lC(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?Ri(i[0]):qd(t)(zn(i,e)):xr}function K1(n={}){const{connector:e=(()=>new H),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,l,c=0,u=!1,d=!1;const h=()=>{null==a||a.unsubscribe(),a=void 0},f=()=>{h(),o=l=void 0,u=d=!1},p=()=>{const m=o;f(),null==m||m.unsubscribe()};return Yt((m,g)=>{c++,!d&&!u&&h();const b=l=null!=l?l:e();g.add(()=>{c--,0===c&&!d&&!u&&(a=cC(p,r))}),b.subscribe(g),!o&&c>0&&(o=new zd({next:v=>b.next(v),error:v=>{d=!0,h(),a=cC(f,t,v),b.error(v)},complete:()=>{u=!0,h(),a=cC(f,i),b.complete()}}),Ri(m).subscribe(o))})(s)}}function cC(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new zd({next:()=>{i.unsubscribe(),n()}});return e(...t).subscribe(i)}function dt(n){for(let e in n)if(n[e]===dt)return e;throw Error("Could not find renamed property on target object.")}function uC(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function rt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(rt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function dC(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const jQ=dt({__forward_ref__:dt});function at(n){return n.__forward_ref__=at,n.toString=function(){return rt(this())},n}function Ce(n){return Q1(n)?n():n}function Q1(n){return"function"==typeof n&&n.hasOwnProperty(jQ)&&n.__forward_ref__===at}class q extends Error{constructor(e,t){super(function hC(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function he(n){return"string"==typeof n?n:null==n?"":String(n)}function _i(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():he(n)}function Jm(n,e){const t=e?` in ${e}`:"";throw new q(-201,`No provider for ${_i(n)} found${t}`)}function zi(n,e){null==n&&function Dt(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function O(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ge(n){return{providers:n.providers||[],imports:n.imports||[]}}function fC(n){return Y1(n,eg)||Y1(n,Z1)}function Y1(n,e){return n.hasOwnProperty(e)?n[e]:null}function X1(n){return n&&(n.hasOwnProperty(pC)||n.hasOwnProperty(KQ))?n[pC]:null}const eg=dt({\u0275prov:dt}),pC=dt({\u0275inj:dt}),Z1=dt({ngInjectableDef:dt}),KQ=dt({ngInjectorDef:dt});var le=(()=>((le=le||{})[le.Default=0]="Default",le[le.Host=1]="Host",le[le.Self=2]="Self",le[le.SkipSelf=4]="SkipSelf",le[le.Optional=8]="Optional",le))();let mC;function Bo(n){const e=mC;return mC=n,e}function J1(n,e,t){const i=fC(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&le.Optional?null:void 0!==e?e:void Jm(rt(n),"Injector")}function Uo(n){return{toString:n}.toString()}var Mr=(()=>((Mr=Mr||{})[Mr.OnPush=0]="OnPush",Mr[Mr.Default=1]="Default",Mr))(),kr=(()=>{return(n=kr||(kr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",kr;var n})();const YQ="undefined"!=typeof globalThis&&globalThis,XQ="undefined"!=typeof window&&window,ZQ="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,lt=YQ||"undefined"!=typeof global&&global||XQ||ZQ,bc={},ht=[],tg=dt({\u0275cmp:dt}),gC=dt({\u0275dir:dt}),_C=dt({\u0275pipe:dt}),eN=dt({\u0275mod:dt}),$s=dt({\u0275fac:dt}),Kd=dt({__NG_ELEMENT_ID__:dt});let JQ=0;function Qe(n){return Uo(()=>{const t={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Mr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||ht,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||kr.Emulated,id:"c",styles:n.styles||ht,_:null,setInput:null,schemas:n.schemas||null,tView:null},r=n.directives,s=n.features,o=n.pipes;return i.id+=JQ++,i.inputs=rN(n.inputs,t),i.outputs=rN(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(tN):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(nN):null,i})}function tN(n){return ri(n)||function jo(n){return n[gC]||null}(n)}function nN(n){return function Ka(n){return n[_C]||null}(n)}const iN={};function ye(n){return Uo(()=>{const e={type:n.type,bootstrap:n.bootstrap||ht,declarations:n.declarations||ht,imports:n.imports||ht,exports:n.exports||ht,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(iN[n.id]=n.type),e})}function rN(n,e){if(null==n)return bc;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const L=Qe;function Pi(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function ri(n){return n[tg]||null}function lr(n,e){const t=n[eN]||null;if(!t&&!0===e)throw new Error(`Type ${rt(n)} does not have '\u0275mod' property.`);return t}function rs(n){return Array.isArray(n)&&"object"==typeof n[1]}function Pr(n){return Array.isArray(n)&&!0===n[1]}function bC(n){return 0!=(8&n.flags)}function sg(n){return 2==(2&n.flags)}function og(n){return 1==(1&n.flags)}function Or(n){return null!==n.template}function sY(n){return 0!=(512&n[2])}function Za(n,e){return n.hasOwnProperty($s)?n[$s]:null}class lY{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function qn(){return oN}function oN(n){return n.type.prototype.ngOnChanges&&(n.setInput=uY),cY}function cY(){const n=lN(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===bc)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function uY(n,e,t,i){const r=lN(n)||function dY(n,e){return n[aN]=e}(n,{previous:bc,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],l=o[a];s[a]=new lY(l&&l.currentValue,e,o===bc),n[i]=e}qn.ngInherit=!0;const aN="__ngSimpleChanges__";function lN(n){return n[aN]||null}let IC;function Ut(n){return!!n.listen}const cN={createRenderer:(n,e)=>function SC(){return void 0!==IC?IC:"undefined"!=typeof document?document:void 0}()};function cn(n){for(;Array.isArray(n);)n=n[0];return n}function ag(n,e){return cn(e[n])}function dr(n,e){return cn(e[n.index])}function TC(n,e){return n.data[e]}function Ic(n,e){return n[e]}function Gi(n,e){const t=e[n];return rs(t)?t:t[0]}function uN(n){return 4==(4&n[2])}function AC(n){return 128==(128&n[2])}function Ho(n,e){return null==e?null:n[e]}function dN(n){n[18]=0}function xC(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const ce={lFrame:vN(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function hN(){return ce.bindingsEnabled}function A(){return ce.lFrame.lView}function Be(){return ce.lFrame.tView}function Wi(n){return ce.lFrame.contextLView=n,n[8]}function vn(){let n=fN();for(;null!==n&&64===n.type;)n=n.parent;return n}function fN(){return ce.lFrame.currentTNode}function ss(n,e){const t=ce.lFrame;t.currentTNode=n,t.isParent=e}function MC(){return ce.lFrame.isParent}function kC(){ce.lFrame.isParent=!1}function lg(){return ce.isInCheckNoChangesMode}function cg(n){ce.isInCheckNoChangesMode=n}function yi(){const n=ce.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Sc(){return ce.lFrame.bindingIndex++}function AY(n,e){const t=ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,RC(e)}function RC(n){ce.lFrame.currentDirectiveIndex=n}function PC(n){const e=ce.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function gN(){return ce.lFrame.currentQueryIndex}function OC(n){ce.lFrame.currentQueryIndex=n}function MY(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function _N(n,e,t){if(t&le.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&le.Host||(r=MY(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=ce.lFrame=yN();return i.currentTNode=e,i.lView=n,!0}function ug(n){const e=yN(),t=n[1];ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function yN(){const n=ce.lFrame,e=null===n?null:n.child;return null===e?vN(n):e}function vN(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function bN(){const n=ce.lFrame;return ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const wN=bN;function dg(){const n=bN();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function vi(){return ce.lFrame.selectedIndex}function $o(n){ce.lFrame.selectedIndex=n}function jt(){const n=ce.lFrame;return TC(n.tView,n.selectedIndex)}function hg(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function fg(n,e,t){CN(n,e,3,t)}function pg(n,e,t,i){(3&n[2])===t&&CN(n,e,t,i)}function NC(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function CN(n,e,t,i){const s=null!=i?i:-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(BY(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function BY(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Jd{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function mg(n,e,t){const i=Ut(n);let r=0;for(;r<t.length;){const s=t[r];if("number"==typeof s){if(0!==s)break;r++;const o=t[r++],a=t[r++],l=t[r++];i?n.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=t[++r];LC(o)?i&&n.setProperty(e,o,a):i?n.setAttribute(e,o,a):e.setAttribute(o,a),r++}}return r}function EN(n){return 3===n||4===n||6===n}function LC(n){return 64===n.charCodeAt(0)}function gg(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||DN(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function DN(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function IN(n){return-1!==n}function Tc(n){return 32767&n}function Ac(n,e){let t=function zY(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let VC=!0;function _g(n){const e=VC;return VC=n,e}let qY=0;function th(n,e){const t=UC(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,BC(i.data,n),BC(e,null),BC(i.blueprint,null));const r=yg(n,e),s=n.injectorIndex;if(IN(r)){const o=Tc(r),a=Ac(r,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function BC(n,e){n.push(0,0,0,0,0,0,0,0,e)}function UC(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function yg(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){const s=r[1],o=s.type;if(i=2===o?s.declTNode:1===o?r[6]:null,null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function vg(n,e,t){!function GY(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Kd)&&(i=t[Kd]),null==i&&(i=t[Kd]=qY++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function AN(n,e,t){if(t&le.Optional)return n;Jm(e,"NodeInjector")}function xN(n,e,t,i){if(t&le.Optional&&void 0===i&&(i=null),0==(t&(le.Self|le.Host))){const r=n[9],s=Bo(void 0);try{return r?r.get(e,i,t&le.Optional):J1(e,i,t&le.Optional)}finally{Bo(s)}}return AN(i,e,t)}function MN(n,e,t,i=le.Default,r){if(null!==n){const s=function YY(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Kd)?n[Kd]:void 0;return"number"==typeof e?e>=0?255&e:KY:e}(t);if("function"==typeof s){if(!_N(e,n,i))return i&le.Host?AN(r,t,i):xN(e,t,i,r);try{const o=s(i);if(null!=o||i&le.Optional)return o;Jm(t)}finally{wN()}}else if("number"==typeof s){let o=null,a=UC(n,e),l=-1,c=i&le.Host?e[16][6]:null;for((-1===a||i&le.SkipSelf)&&(l=-1===a?yg(n,e):e[a+8],-1!==l&&PN(i,!1)?(o=e[1],a=Tc(l),e=Ac(l,e)):a=-1);-1!==a;){const u=e[1];if(RN(s,a,u.data)){const d=QY(a,e,t,o,i,c);if(d!==kN)return d}l=e[a+8],-1!==l&&PN(i,e[1].data[a+8]===c)&&RN(s,a,e)?(o=u,a=Tc(l),e=Ac(l,e)):a=-1}}}return xN(e,t,i,r)}const kN={};function KY(){return new xc(vn(),A())}function QY(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],u=bg(a,o,t,null==i?sg(a)&&VC:i!=o&&0!=(3&a.type),r&le.Host&&s===a);return null!==u?nh(e,o,u,a):kN}function bg(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,h=r?a+u:n.directiveEnd;for(let f=i?a:a+u;f<h;f++){const p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(r){const f=o[l];if(f&&Or(f)&&f.type===t)return l}return null}function nh(n,e,t,i){let r=n[t];const s=e.data;if(function UY(n){return n instanceof Jd}(r)){const o=r;o.resolving&&function HQ(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new q(-200,`Circular dependency in DI detected for ${n}${t}`)}(_i(s[t]));const a=_g(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Bo(o.injectImpl):null;_N(n,i,le.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function VY(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=oN(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&Bo(l),_g(a),o.resolving=!1,wN()}}return r}function RN(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function PN(n,e){return!(n&le.Self||n&le.Host&&e)}class xc{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return MN(this._tNode,this._lView,e,i,t)}}function Mn(n){return Uo(()=>{const e=n.prototype.constructor,t=e[$s]||jC(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[$s]||jC(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function jC(n){return Q1(n)?()=>{const e=jC(Ce(n));return e&&e()}:Za(n)}function Gs(n){return function WY(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(EN(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(vn(),n)}const kc="__parameters__";function Pc(n,e,t){return Uo(()=>{const i=function HC(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(kc)?l[kc]:Object.defineProperty(l,kc,{value:[]})[kc];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class k{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=O({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ZY=new k("AnalyzeForEntryComponents");function hr(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),hr(i,e)):e!==n&&e.push(i)}return e}function os(n,e){n.forEach(t=>Array.isArray(t)?os(t,e):e(t))}function NN(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function wg(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function sh(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function Ki(n,e,t){let i=Oc(n,e);return i>=0?n[1|i]=t:(i=~i,function tX(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function zC(n,e){const t=Oc(n,e);if(t>=0)return n[1|t]}function Oc(n,e){return function VN(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const oh={},GC="__NG_DI_FLAG__",Eg="ngTempTokenPath",lX=/\n/gm,UN="__source",uX=dt({provide:String,useValue:dt});let ah;function jN(n){const e=ah;return ah=n,e}function dX(n,e=le.Default){if(void 0===ah)throw new q(203,"");return null===ah?J1(n,void 0,e):ah.get(n,e&le.Optional?null:void 0,e)}function w(n,e=le.Default){return(function QQ(){return mC}()||dX)(Ce(n),e)}const wn=w;function WC(n){const e=[];for(let t=0;t<n.length;t++){const i=Ce(n[t]);if(Array.isArray(i)){if(0===i.length)throw new q(900,"");let r,s=le.Default;for(let o=0;o<i.length;o++){const a=i[o],l=hX(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(w(r,s))}else e.push(w(i))}return e}function lh(n,e){return n[GC]=e,n.prototype[GC]=e,n}function hX(n){return n[GC]}const Dg=lh(Pc("Inject",n=>({token:n})),-1),Ze=lh(Pc("Optional"),8),Nc=lh(Pc("SkipSelf"),4);let Sg;function Lc(n){var e;return(null===(e=function QC(){if(void 0===Sg&&(Sg=null,lt.trustedTypes))try{Sg=lt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Sg}())||void 0===e?void 0:e.createHTML(n))||n}class Ja{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class IX extends Ja{getTypeName(){return"HTML"}}class SX extends Ja{getTypeName(){return"Style"}}class TX extends Ja{getTypeName(){return"Script"}}class AX extends Ja{getTypeName(){return"URL"}}class xX extends Ja{getTypeName(){return"ResourceURL"}}function Qi(n){return n instanceof Ja?n.changingThisBreaksApplicationSecurity:n}function as(n,e){const t=YN(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}function YN(n){return n instanceof Ja&&n.getTypeName()||null}class NX{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Lc(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class FX{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const i=this.inertDocument.createElement("body");t.appendChild(i)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Lc(e),t;const i=this.inertDocument.createElement("body");return i.innerHTML=Lc(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let i=e.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const VX=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,BX=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function uh(n){return(n=String(n)).match(VX)||n.match(BX)?n:"unsafe:"+n}function ZN(n){return(n=String(n)).split(",").map(e=>uh(e.trim())).join(", ")}function ls(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function dh(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const JN=ls("area,br,col,hr,img,wbr"),eF=ls("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),tF=ls("rp,rt"),XC=dh(JN,dh(eF,ls("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),dh(tF,ls("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),dh(tF,eF)),ZC=ls("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),JC=ls("srcset"),nF=dh(ZC,JC,ls("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ls("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),UX=ls("script,style,template");class jX{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!XC.hasOwnProperty(t))return this.sanitizedSomething=!0,!UX.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!nF.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;ZC[a]&&(l=uh(l)),JC[a]&&(l=ZN(l)),this.buf.push(" ",o,'="',iF(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();XC.hasOwnProperty(t)&&!JN.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(iF(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const HX=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$X=/([^\#-~ |!])/g;function iF(n){return n.replace(/&/g,"&amp;").replace(HX,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace($X,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ag;function rF(n,e){let t=null;try{Ag=Ag||function XN(n){const e=new FX(n);return function LX(){try{return!!(new window.DOMParser).parseFromString(Lc(""),"text/html")}catch(n){return!1}}()?new NX(e):e}(n);let i=e?String(e):"";t=Ag.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=Ag.getInertBodyElement(i)}while(i!==s);return Lc((new jX).sanitizeChildren(eE(t)||t))}finally{if(t){const i=eE(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function eE(n){return"content"in n&&function zX(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Ye=(()=>((Ye=Ye||{})[Ye.NONE=0]="NONE",Ye[Ye.HTML=1]="HTML",Ye[Ye.STYLE=2]="STYLE",Ye[Ye.SCRIPT=3]="SCRIPT",Ye[Ye.URL=4]="URL",Ye[Ye.RESOURCE_URL=5]="RESOURCE_URL",Ye))();function qo(n){const e=function hh(){const n=A();return n&&n[12]}();return e?e.sanitize(Ye.URL,n)||"":as(n,"URL")?Qi(n):uh(he(n))}const aF="__ngContext__";function oi(n,e){n[aF]=e}function nE(n){const e=function fh(n){return n[aF]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function rE(n){return n.ngOriginalError}function aZ(n,...e){n.error(...e)}class Go{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),i=function oZ(n){return n&&n.ngErrorLogger||aZ}(e);i(this._console,"ERROR",e),t&&i(this._console,"ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&rE(e);for(;t&&rE(t);)t=rE(t);return t||null}}const _Z=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(lt))();function sE(n){return n.ownerDocument}function cs(n){return n instanceof Function?n():n}var Yi=(()=>((Yi=Yi||{})[Yi.Important=1]="Important",Yi[Yi.DashCase=2]="DashCase",Yi))();function aE(n,e){return undefined(n,e)}function ph(n){const e=n[3];return Pr(e)?e[3]:e}function lE(n){return gF(n[13])}function cE(n){return gF(n[4])}function gF(n){for(;null!==n&&!Pr(n);)n=n[4];return n}function Bc(n,e,t,i,r){if(null!=i){let s,o=!1;Pr(i)?s=i:rs(i)&&(o=!0,i=i[0]);const a=cn(i);0===n&&null!==t?null==r?CF(e,t,a):el(e,t,a,r||null,!0):1===n&&null!==t?el(e,t,a,r||null,!0):2===n?function xF(n,e,t){const i=xg(n,e);i&&function MZ(n,e,t,i){Ut(n)?n.removeChild(e,t,i):e.removeChild(t)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function PZ(n,e,t,i,r){const s=t[7];s!==cn(t)&&Bc(e,n,i,s,r);for(let a=10;a<t.length;a++){const l=t[a];mh(l[1],l,n,e,i,s)}}(e,n,s,t,r)}}function dE(n,e,t){if(Ut(n))return n.createElement(e,t);{const i=null!==t?function mY(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(t):null;return null===i?n.createElement(e):n.createElementNS(i,e)}}function yF(n,e){const t=n[9],i=t.indexOf(e),r=e[3];1024&e[2]&&(e[2]&=-1025,xC(r,-1)),t.splice(i,1)}function hE(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&yF(r,i),e>0&&(n[t-1][4]=i[4]);const s=wg(n,10+e);!function CZ(n,e){mh(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function vF(n,e){if(!(256&e[2])){const t=e[11];Ut(t)&&t.destroyNode&&mh(n,e,t,3,null,null),function IZ(n){let e=n[13];if(!e)return fE(n[1],n);for(;e;){let t=null;if(rs(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)rs(e)&&fE(e[1],e),e=e[3];null===e&&(e=n),rs(e)&&fE(e[1],e),t=e&&e[4]}e=t}}(e)}}function fE(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function xZ(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Jd)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function AZ(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):cn(e[o]),l=i[r=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)i[s]();e[7]=null}}(n,e),1===e[1].type&&Ut(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&Pr(e[3])){t!==e[3]&&yF(t,e);const i=e[19];null!==i&&i.detachView(n)}}}function bF(n,e,t){return function wF(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===kr.None||r===kr.Emulated)return null}return dr(i,t)}(n,e.parent,t)}function el(n,e,t,i,r){Ut(n)?n.insertBefore(e,t,i,r):e.insertBefore(t,i,r)}function CF(n,e,t){Ut(n)?n.appendChild(e,t):e.appendChild(t)}function EF(n,e,t,i,r){null!==i?el(n,e,t,i,r):CF(n,e,t)}function xg(n,e){return Ut(n)?n.parentNode(e):e.parentNode}function DF(n,e,t){return SF(n,e,t)}let SF=function IF(n,e,t){return 40&n.type?dr(n,t):null};function Mg(n,e,t,i){const r=bF(n,i,e),s=e[11],a=DF(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)EF(s,r,t[l],a,!1);else EF(s,r,t,a,!1)}function kg(n,e){if(null!==e){const t=e.type;if(3&t)return dr(e,n);if(4&t)return mE(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return kg(n,i);{const r=n[e.index];return Pr(r)?mE(-1,r):cn(r)}}if(32&t)return aE(e,n)()||cn(n[e.index]);{const i=AF(n,e);return null!==i?Array.isArray(i)?i[0]:kg(ph(n[16]),i):kg(n,e.next)}}return null}function AF(n,e){return null!==e?n[16][6].projection[e.projection]:null}function mE(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return kg(i,r)}return e[7]}function gE(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&oi(cn(a),i),t.flags|=4),64!=(64&t.flags))if(8&l)gE(n,e,t.child,i,r,s,!1),Bc(e,n,r,a,s);else if(32&l){const c=aE(t,i);let u;for(;u=c();)Bc(e,n,r,u,s);Bc(e,n,r,a,s)}else 16&l?MF(n,e,i,t,r,s):Bc(e,n,r,a,s);t=o?t.projectionNext:t.next}}function mh(n,e,t,i,r,s){gE(t,i,n.firstChild,e,r,s,!1)}function MF(n,e,t,i,r,s){const o=t[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Bc(e,n,r,l[c],s);else gE(n,e,l,o[3],r,s,!0)}function kF(n,e,t){Ut(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function _E(n,e,t){Ut(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function RF(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const PF="ng-template";function NZ(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==RF(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function OF(n){return 4===n.type&&n.value!==PF}function FZ(n,e,t){return e===(4!==n.type||t?n.value:PF)}function LZ(n,e,t){let i=4;const r=n.attrs||[],s=function UZ(n){for(let e=0;e<n.length;e++)if(EN(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!FZ(n,l,t)||""===l&&1===e.length){if(Nr(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!NZ(n.attrs,c,t)){if(Nr(i))return!1;o=!0}continue}const d=VZ(8&i?"class":l,r,OF(n),t);if(-1===d){if(Nr(i))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":r[d+1].toLowerCase();const f=8&i?h:null;if(f&&-1!==RF(f,c,0)||2&i&&c!==h){if(Nr(i))return!1;o=!0}}}}else{if(!o&&!Nr(i)&&!Nr(l))return!1;if(o&&Nr(l))continue;o=!1,i=l|1&i}}return Nr(i)||o}function Nr(n){return 0==(1&n)}function VZ(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function jZ(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function NF(n,e,t=!1){for(let i=0;i<e.length;i++)if(LZ(n,e[i],t))return!0;return!1}function HZ(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function FF(n,e){return n?":not("+e.trim()+")":e}function $Z(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Nr(o)&&(e+=FF(s,r),r=""),i=o,s=s||!Nr(i);t++}return""!==r&&(e+=FF(s,r)),e}const fe={};function $(n){LF(Be(),A(),vi()+n,lg())}function LF(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&fg(e,s,t)}else{const s=n.preOrderHooks;null!==s&&pg(e,s,0,t)}$o(t)}function Rg(n,e){return n<<17|e<<2}function Fr(n){return n>>17&32767}function yE(n){return 2|n}function Ws(n){return(131068&n)>>2}function vE(n,e){return-131069&n|e<<2}function bE(n){return 1|n}function KF(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];OC(r),o.contentQueries(2,e[s],s)}}}function gh(n,e,t,i,r,s,o,a,l,c){const u=e.blueprint.slice();return u[0]=r,u[2]=140|i,dN(u),u[3]=u[15]=n,u[8]=t,u[10]=o||n&&n[10],u[11]=a||n&&n[11],u[12]=l||n&&n[12]||null,u[9]=c||n&&n[9]||null,u[6]=s,u[16]=2==e.type?n[16]:u,u}function Uc(n,e,t,i,r){let s=n.data[e];if(null===s)s=function xE(n,e,t,i,r){const s=fN(),o=MC(),l=n.data[e]=function aJ(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,i,r),function TY(){return ce.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function Zd(){const n=ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return ss(s,!0),s}function jc(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function _h(n,e,t){ug(e);try{const i=n.viewQuery;null!==i&&VE(1,i,t);const r=n.template;null!==r&&QF(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&KF(n,e),n.staticViewQueries&&VE(2,n.viewQuery,t);const s=n.components;null!==s&&function rJ(n,e){for(let t=0;t<e.length;t++)IJ(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,dg()}}function Hc(n,e,t,i){const r=e[2];if(256==(256&r))return;ug(e);const s=lg();try{dN(e),function pN(n){return ce.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&QF(n,e,t,2,i);const o=3==(3&r);if(!s)if(o){const c=n.preOrderCheckHooks;null!==c&&fg(e,c,null)}else{const c=n.preOrderHooks;null!==c&&pg(e,c,0,null),NC(e,0)}if(function EJ(n){for(let e=lE(n);null!==e;e=cE(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(1024&r[2])&&xC(s,1),r[2]|=1024}}}(e),function CJ(n){for(let e=lE(n);null!==e;e=cE(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];AC(i)&&Hc(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&KF(n,e),!s)if(o){const c=n.contentCheckHooks;null!==c&&fg(e,c)}else{const c=n.contentHooks;null!==c&&pg(e,c,1),NC(e,1)}!function nJ(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)$o(~r);else{const s=r,o=t[++i],a=t[++i];AY(o,s),a(2,e[s])}}}finally{$o(-1)}}(n,e);const a=n.components;null!==a&&function iJ(n,e){for(let t=0;t<e.length;t++)DJ(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&VE(2,l,i),!s)if(o){const c=n.viewCheckHooks;null!==c&&fg(e,c)}else{const c=n.viewHooks;null!==c&&pg(e,c,2),NC(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,xC(e[3],-1))}finally{dg()}}function sJ(n,e,t,i){const r=e[10],s=!lg(),o=uN(e);try{s&&!o&&r.begin&&r.begin(),o&&_h(n,e,i),Hc(n,e,t,i)}finally{s&&!o&&r.end&&r.end()}}function QF(n,e,t,i,r){const s=vi(),o=2&i;try{$o(-1),o&&e.length>20&&LF(n,e,20,lg()),t(i,r)}finally{$o(s)}}function YF(n,e,t){if(bC(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function ME(n,e,t){!hN()||(function pJ(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||th(t,e),oi(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=Or(l);c&&vJ(e,t,l);const u=nh(e,n,a,t);oi(u,e),null!==o&&bJ(0,a-r,u,l,0,o),c&&(Gi(t.index,e)[8]=u)}}(n,e,t,dr(t,e)),128==(128&t.flags)&&function mJ(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,a=function xY(){return ce.lFrame.currentDirectiveIndex}();try{$o(o);for(let l=i;l<r;l++){const c=n.data[l],u=e[l];RC(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&rL(c,u)}}finally{$o(-1),RC(a)}}(n,e,t))}function kE(n,e,t=dr){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function XF(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Ng(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Ng(n,e,t,i,r,s,o,a,l,c){const u=20+i,d=u+r,h=function oJ(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:fe);return t}(u,d),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function eL(n,e,t,i){const r=uL(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&dL(n).push(i,r.length-1))}function tL(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,r):t[i]=[e,r]}return t}function Xi(n,e,t,i,r,s,o,a){const l=dr(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(pL(n,t,u,i,r),sg(e)&&function uJ(n,e){const t=Gi(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(i=function cJ(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,Ut(s)?s.setProperty(l,i,r):LC(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function RE(n,e,t,i){let r=!1;if(hN()){const s=function gJ(n,e,t){const i=n.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];NF(t,o.selectors,!1)&&(r||(r=[]),vg(th(t,e),n,o.type),Or(o)?(sL(n,t),r.unshift(o)):r.push(o))}return r}(n,e,t),o=null===i?null:{"":-1};if(null!==s){r=!0,oL(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const d=s[u];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,c=jc(n,e,s.length,null);for(let u=0;u<s.length;u++){const d=s[u];t.mergedAttrs=gg(t.mergedAttrs,d.hostAttrs),aL(n,t,e,c,d),yJ(c,d,o),null!==d.contentQueries&&(t.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}!function lJ(n,e){const i=e.directiveEnd,r=n.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<i;c++){const u=r[c],d=u.inputs,h=null===s||OF(e)?null:wJ(d,s);o.push(h),a=tL(d,c,a),l=tL(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(n,t)}o&&function _J(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new q(-301,!1);i.push(e[r],s)}}}(t,i,o)}return t.mergedAttrs=gg(t.mergedAttrs,t.attrs),r}function iL(n,e,t,i,r,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function fJ(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(i,r,o)}}function rL(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function sL(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function yJ(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Or(e)&&(t[""]=n)}}function oL(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function aL(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=Za(r.type)),o=new Jd(s,Or(r),null);n.blueprint[i]=o,t[i]=o,iL(n,e,0,i,jc(n,t,r.hostVars,fe),r)}function vJ(n,e,t){const i=dr(e,n),r=XF(t),s=n[10],o=Fg(n,gh(n,r,null,t.onPush?64:16,i,e,s,s.createRenderer(i,t),null,null));n[e.index]=o}function us(n,e,t,i,r,s){const o=dr(n,e);!function PE(n,e,t,i,r,s,o){if(null==s)Ut(n)?n.removeAttribute(e,r,t):e.removeAttribute(r);else{const a=null==o?he(s):o(s,i||"",r);Ut(n)?n.setAttribute(e,r,a,t):t?e.setAttributeNS(t,r,a):e.setAttribute(r,a)}}(e[11],o,s,n.value,t,i,r)}function bJ(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==a?i.setInput(t,d,c,u):t[u]=d}}}function wJ(n,e){let t=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,n[r],e[i+1])),i+=2}else i+=2;else i+=4}return t}function lL(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function DJ(n,e){const t=Gi(e,n);if(AC(t)){const i=t[1];80&t[2]?Hc(i,t,i.template,t[8]):t[5]>0&&OE(t)}}function OE(n){for(let i=lE(n);null!==i;i=cE(i))for(let r=10;r<i.length;r++){const s=i[r];if(1024&s[2]){const o=s[1];Hc(o,s,o.template,s[8])}else s[5]>0&&OE(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=Gi(t[i],n);AC(r)&&r[5]>0&&OE(r)}}function IJ(n,e){const t=Gi(e,n),i=t[1];(function SJ(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),_h(i,t,t[8])}function Fg(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function NE(n){for(;n;){n[2]|=64;const e=ph(n);if(sY(n)&&!e)return n;n=e}return null}function LE(n,e,t){const i=e[10];i.begin&&i.begin();try{Hc(n,e,n.template,t)}catch(r){throw fL(e,r),r}finally{i.end&&i.end()}}function cL(n){!function FE(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],i=nE(t),r=i[1];sJ(r,i,r.template,t)}}(n[8])}function VE(n,e,t){OC(0),e(n,t)}const MJ=(()=>Promise.resolve(null))();function uL(n){return n[7]||(n[7]=[])}function dL(n){return n.cleanup||(n.cleanup=[])}function hL(n,e,t){return(null===n||Or(n))&&(t=function yY(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function fL(n,e){const t=n[9],i=t?t.get(Go,null):null;i&&i.handleError(e)}function pL(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function Ks(n,e,t){const i=ag(e,n);!function _F(n,e,t){Ut(n)?n.setValue(e,t):e.textContent=t}(n[11],i,t)}function Lg(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=dC(r,a):2==s&&(i=dC(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}const BE=new k("INJECTOR",-1);class mL{get(e,t=oh){if(t===oh){const i=new Error(`NullInjectorError: No provider for ${rt(e)}!`);throw i.name="NullInjectorError",i}return t}}const UE=new k("Set Injector scope."),yh={},PJ={};let jE;function gL(){return void 0===jE&&(jE=new mL),jE}function _L(n,e=null,t=null,i){const r=yL(n,e,t,i);return r._resolveInjectorDefTypes(),r}function yL(n,e=null,t=null,i){return new OJ(n,t,e||gL(),i)}class OJ{constructor(e,t,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&os(t,a=>this.processProvider(a,e,t)),os([e],a=>this.processInjectorType(a,[],s)),this.records.set(BE,$c(void 0,this));const o=this.records.get(UE);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof e?null:rt(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=oh,i=le.Default){this.assertNotDestroyed();const r=jN(this),s=Bo(void 0);try{if(!(i&le.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function HJ(n){return"function"==typeof n||"object"==typeof n&&n instanceof k}(e)&&fC(e);a=l&&this.injectableDefInScope(l)?$c(HE(e),yh):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&le.Self?gL():this.parent).get(e,t=i&le.Optional&&t===oh?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Eg]=o[Eg]||[]).unshift(rt(e)),r)throw o;return function fX(n,e,t,i){const r=n[Eg];throw e[UN]&&r.unshift(e[UN]),n.message=function pX(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let r=rt(e);if(Array.isArray(e))r=e.map(rt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):rt(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(lX,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[Eg]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Bo(s),jN(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((i,r)=>e.push(rt(r))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new q(205,!1)}processInjectorType(e,t,i){if(!(e=Ce(e)))return!1;let r=X1(e);const s=null==r&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==i.indexOf(o);if(void 0!==s&&(r=X1(s)),null==r)return!1;if(null!=r.imports&&!a){let u;i.push(o);try{os(r.imports,d=>{this.processInjectorType(d,t,i)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:h,providers:f}=u[d];os(f,p=>this.processProvider(p,h,f||ht))}}this.injectorDefTypes.add(o);const l=Za(o)||(()=>new o);this.records.set(o,$c(l,yh));const c=r.providers;if(null!=c&&!a){const u=e;os(c,d=>this.processProvider(d,u,c))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,i){let r=zc(e=Ce(e))?e:Ce(e&&e.provide);const s=function FJ(n,e,t){return bL(n)?$c(void 0,n.useValue):$c(vL(n),yh)}(e);if(zc(e)||!0!==e.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=$c(void 0,yh,!0),o.factory=()=>WC(o.multi),this.records.set(r,o)),r=e,o.multi.push(e)}this.records.set(r,s)}hydrate(e,t){return t.value===yh&&(t.value=PJ,t.value=t.factory()),"object"==typeof t.value&&t.value&&function jJ(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ce(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function HE(n){const e=fC(n),t=null!==e?e.factory:Za(n);if(null!==t)return t;if(n instanceof k)throw new q(204,!1);if(n instanceof Function)return function NJ(n){const e=n.length;if(e>0)throw sh(e,"?"),new q(204,!1);const t=function GQ(n){const e=n&&(n[eg]||n[Z1]);if(e){const t=function WQ(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new q(204,!1)}function vL(n,e,t){let i;if(zc(n)){const r=Ce(n);return Za(r)||HE(r)}if(bL(n))i=()=>Ce(n.useValue);else if(function VJ(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...WC(n.deps||[]));else if(function LJ(n){return!(!n||!n.useExisting)}(n))i=()=>w(Ce(n.useExisting));else{const r=Ce(n&&(n.useClass||n.provide));if(!function UJ(n){return!!n.deps}(n))return Za(r)||HE(r);i=()=>new r(...WC(n.deps))}return i}function $c(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function bL(n){return null!==n&&"object"==typeof n&&uX in n}function zc(n){return"function"==typeof n}let Je=(()=>{class n{static create(t,i){var r;if(Array.isArray(t))return _L({name:""},i,t,"");{const s=null!==(r=t.name)&&void 0!==r?r:"";return _L({name:s},t.parent,t.providers,s)}}}return n.THROW_IF_NOT_FOUND=oh,n.NULL=new mL,n.\u0275prov=O({token:n,providedIn:"any",factory:()=>w(BE)}),n.__NG_ELEMENT_ID__=-1,n})();function YJ(n,e){hg(nE(n)[1],vn())}function se(n){let e=function RL(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(Or(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new q(903,"");r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=qE(n.inputs),o.declaredInputs=qE(n.declaredInputs),o.outputs=qE(n.outputs);const a=r.hostBindings;a&&eee(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&ZJ(n,l),c&&JJ(n,c),uC(n.inputs,r.inputs),uC(n.declaredInputs,r.declaredInputs),uC(n.outputs,r.outputs),Or(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===se&&(t=!1)}}e=Object.getPrototypeOf(e)}!function XJ(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=gg(r.hostAttrs,t=gg(t,r.hostAttrs))}}(i)}function qE(n){return n===bc?{}:n===ht?[]:n}function ZJ(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function JJ(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function eee(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}let Vg=null;function qc(){if(!Vg){const n=lt.Symbol;if(n&&n.iterator)Vg=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Vg=i)}}}return Vg}function vh(n){return!!GE(n)&&(Array.isArray(n)||!(n instanceof Map)&&qc()in n)}function GE(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ds(n,e,t){return n[e]=t}function ai(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Zt(n,e,t,i){const r=A();return ai(r,Sc(),e)&&(Be(),us(jt(),r,n,e,t,i)),Zt}function Wc(n,e,t,i){return ai(n,Sc(),t)?e+he(t)+i:fe}function Ue(n,e,t,i,r,s,o,a){const l=A(),c=Be(),u=n+20,d=c.firstCreatePass?function aee(n,e,t,i,r,s,o,a,l){const c=e.consts,u=Uc(e,n,4,o||null,Ho(c,a));RE(e,t,u,Ho(c,l)),hg(e,u);const d=u.tViews=Ng(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,i,r,s,o):c.data[u];ss(d,!1);const h=l[11].createComment("");Mg(c,l,h,d),oi(h,l),Fg(l,l[u]=lL(h,l,h,d)),og(d)&&ME(c,l,d),null!=o&&kE(l,d,a)}function y(n,e=le.Default){const t=A();return null===t?w(n,e):MN(vn(),t,Ce(n),e)}function wh(){throw new Error("invalid")}function Y(n,e,t){const i=A();return ai(i,Sc(),e)&&Xi(Be(),jt(),i,n,e,i[11],t,!1),Y}function XE(n,e,t,i,r){const o=r?"class":"style";pL(n,t,e.inputs[o],o,i)}function S(n,e,t,i){const r=A(),s=Be(),o=20+n,a=r[11],l=r[o]=dE(a,e,function LY(){return ce.lFrame.currentNamespace}()),c=s.firstCreatePass?function Aee(n,e,t,i,r,s,o){const a=e.consts,c=Uc(e,n,2,r,Ho(a,s));return RE(e,t,c,Ho(a,o)),null!==c.attrs&&Lg(c,c.attrs,!1),null!==c.mergedAttrs&&Lg(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,0,e,t,i):s.data[o];ss(c,!0);const u=c.mergedAttrs;null!==u&&mg(a,l,u);const d=c.classes;null!==d&&_E(a,l,d);const h=c.styles;return null!==h&&kF(a,l,h),64!=(64&c.flags)&&Mg(s,r,l,c),0===function wY(){return ce.lFrame.elementDepthCount}()&&oi(l,r),function CY(){ce.lFrame.elementDepthCount++}(),og(c)&&(ME(s,r,c),YF(s,c,r)),null!==i&&kE(r,c),S}function M(){let n=vn();MC()?kC():(n=n.parent,ss(n,!1));const e=n;!function EY(){ce.lFrame.elementDepthCount--}();const t=Be();return t.firstCreatePass&&(hg(t,n),bC(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function HY(n){return 0!=(16&n.flags)}(e)&&XE(t,e,A(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function $Y(n){return 0!=(32&n.flags)}(e)&&XE(t,e,A(),e.stylesWithoutHost,!1),M}function et(n,e,t,i){return S(n,e,t,i),M(),et}function Ch(n,e,t){const i=A(),r=Be(),s=n+20,o=r.firstCreatePass?function xee(n,e,t,i,r){const s=e.consts,o=Ho(s,i),a=Uc(e,n,8,"ng-container",o);return null!==o&&Lg(a,o,!0),RE(e,t,a,Ho(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];ss(o,!0);const a=i[s]=i[11].createComment("");return Mg(r,i,a,o),oi(a,i),og(o)&&(ME(r,i,o),YF(r,o,i)),null!=t&&kE(i,o),Ch}function Eh(){let n=vn();const e=Be();return MC()?kC():(n=n.parent,ss(n,!1)),e.firstCreatePass&&(hg(e,n),bC(n)&&e.queries.elementEnd(n)),Eh}function pr(){return A()}function Dh(n){return!!n&&"function"==typeof n.then}function e2(n){return!!n&&"function"==typeof n.subscribe}const ZE=e2;function J(n,e,t,i){const r=A(),s=Be(),o=vn();return t2(s,r,r[11],o,n,e,!!t,i),J}function jg(n,e){const t=vn(),i=A(),r=Be();return t2(r,i,hL(PC(r.data),t,i),t,n,e,!1),jg}function t2(n,e,t,i,r,s,o,a){const l=og(i),u=n.firstCreatePass&&dL(n),d=e[8],h=uL(e);let f=!0;if(3&i.type||a){const g=dr(i,e),b=a?a(g):g,v=h.length,E=a?I=>a(cn(I[i.index])):i.index;if(Ut(t)){let I=null;if(!a&&l&&(I=function Mee(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==I)(I.__ngLastListenerFn__||I).__ngNextListenerFn__=s,I.__ngLastListenerFn__=s,f=!1;else{s=JE(i,e,d,s,!1);const B=t.listen(b,r,s);h.push(s,B),u&&u.push(r,E,v,v+1)}}else s=JE(i,e,d,s,!0),b.addEventListener(r,s,o),h.push(s),u&&u.push(r,E,v,o)}else s=JE(i,e,d,s,!1);const p=i.outputs;let m;if(f&&null!==p&&(m=p[r])){const g=m.length;if(g)for(let b=0;b<g;b+=2){const W=e[m[b]][m[b+1]].subscribe(s),ae=h.length;h.push(s,W),u&&u.push(r,i.index,ae,-(ae+1))}}}function n2(n,e,t,i){try{return!1!==t(i)}catch(r){return fL(n,r),!1}}function JE(n,e,t,i,r){return function s(o){if(o===Function)return i;const a=2&n.flags?Gi(n.index,e):e;0==(32&e[2])&&NE(a);let l=n2(e,0,i,o),c=s.__ngNextListenerFn__;for(;c;)l=n2(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function gt(n=1){return function kY(n){return(ce.lFrame.contextLView=function RY(n,e){for(;n>0;)e=e[15],n--;return e}(n,ce.lFrame.contextLView))[8]}(n)}function kee(n,e){let t=null;const i=function BZ(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?NF(n,s,!0):HZ(i,s))return r}else t=r}return t}function mr(n){const e=A()[16][6];if(!e.projection){const i=e.projection=sh(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?kee(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function ct(n,e=0,t){const i=A(),r=Be(),s=Uc(r,20+n,16,null,t||null);null===s.projection&&(s.projection=e),kC(),64!=(64&s.flags)&&function RZ(n,e,t){MF(e[11],0,e,t,bF(n,t,e),DF(t.parent||e[6],t,e))}(r,i,s)}function nl(n,e,t){return e0(n,"",e,"",t),nl}function e0(n,e,t,i,r){const s=A(),o=Wc(s,e,t,i);return o!==fe&&Xi(Be(),jt(),s,n,o,s[11],r,!1),e0}function h2(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?Fr(s):Ws(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];Oee(n[a],e)&&(l=!0,n[a+1]=i?bE(u):yE(u)),a=i?Fr(u):Ws(u)}l&&(n[t+1]=i?yE(s):bE(s))}function Oee(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Oc(n,e)>=0}function Hg(n,e,t){return Vr(n,e,t,!1),Hg}function Ht(n,e){return Vr(n,e,null,!0),Ht}function Vr(n,e,t,i){const r=A(),s=Be(),o=function qs(n){const e=ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function b2(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[vi()],o=function v2(n,e){return e>=n.expandoStartIndex}(n,t);(function D2(n,e){return 0!=(n.flags&(e?16:32))})(s,i)&&null===e&&!o&&(e=!1),e=function $ee(n,e,t,i){const r=PC(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Ih(t=t0(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=t0(r,n,e,t,i),null===s){let l=function zee(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Ws(i))return n[Fr(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=t0(null,n,e,l[1],i),l=Ih(l,e.attrs,i),function qee(n,e,t,i){n[Fr(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function Gee(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Ih(i,n[s].hostAttrs,t);return Ih(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function Ree(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Fr(o),l=Ws(o);n[i]=t;let u,c=!1;if(Array.isArray(t)){const d=t;u=d[1],(null===u||Oc(d,u)>0)&&(c=!0)}else u=t;if(r)if(0!==l){const h=Fr(n[a+1]);n[i+1]=Rg(h,a),0!==h&&(n[h+1]=vE(n[h+1],i)),n[a+1]=function GZ(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=Rg(a,0),0!==a&&(n[a+1]=vE(n[a+1],i)),a=i;else n[i+1]=Rg(l,0),0===a?a=i:n[l+1]=vE(n[l+1],i),l=i;c&&(n[i+1]=yE(n[i+1])),h2(n,u,i,!0),h2(n,u,i,!1),function Pee(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Oc(s,e)>=0&&(t[i+1]=bE(t[i+1]))}(e,u,n,i,s),o=Rg(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}(s,n,o,i),e!==fe&&ai(r,o,e)&&function C2(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];$g(function UF(n){return 1==(1&n)}(c)?E2(l,e,t,r,Ws(c),o):void 0)||($g(s)||function BF(n){return 2==(2&n)}(c)&&(s=E2(l,null,t,r,a,o)),function OZ(n,e,t,i,r){const s=Ut(n);if(e)r?s?n.addClass(t,i):t.classList.add(i):s?n.removeClass(t,i):t.classList.remove(i);else{let o=-1===i.indexOf("-")?void 0:Yi.DashCase;if(null==r)s?n.removeStyle(t,i,o):t.style.removeProperty(i);else{const a="string"==typeof r&&r.endsWith("!important");a&&(r=r.slice(0,-10),o|=Yi.Important),s?n.setStyle(t,i,r,o):t.style.setProperty(i,r,a?"important":"")}}}(i,o,ag(vi(),t),r,s))}(s,s.data[vi()],r,r[11],n,r[o+1]=function Qee(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=rt(Qi(n)))),n}(e,t),i,o)}function t0(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=Ih(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Ih(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ki(n,o,!!t||e[++s]))}return void 0===n?null:n}function E2(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[r+1];h===fe&&(h=d?ht:void 0);let f=d?zC(h,i):u===i?h:void 0;if(c&&!$g(f)&&(f=zC(l,i)),$g(f)&&(a=f,o))return a;const p=n[r+1];r=o?Fr(p):Ws(p)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=zC(l,i))}return a}function $g(n){return void 0!==n}function te(n,e=""){const t=A(),i=Be(),r=n+20,s=i.firstCreatePass?Uc(i,r,1,e,null):i.data[r],o=t[r]=function uE(n,e){return Ut(n)?n.createText(e):n.createTextNode(e)}(t[11],e);Mg(i,t,o,s),ss(s,!1)}function Qs(n){return Ur("",n,""),Qs}function Ur(n,e,t){const i=A(),r=Wc(i,n,e,t);return r!==fe&&Ks(i,vi(),r),Ur}function zg(n,e,t){const i=A();return ai(i,Sc(),e)&&Xi(Be(),jt(),i,n,e,i[11],t,!0),zg}function qg(n,e,t){const i=A();if(ai(i,Sc(),e)){const s=Be(),o=jt();Xi(s,o,i,n,e,hL(PC(s.data),o,i),t,!0)}return qg}const Gg="en-US";let z2=Gg;function s0(n,e,t,i,r){if(n=Ce(n),Array.isArray(n))for(let s=0;s<n.length;s++)s0(n[s],e,t,i,r);else{const s=Be(),o=A();let a=zc(n)?n:Ce(n.provide),l=vL(n);const c=vn(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(zc(n)||!n.multi){const f=new Jd(l,r,y),p=a0(a,e,r?u:u+h,d);-1===p?(vg(th(c,o),s,a),o0(s,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=a0(a,e,u+h,d),p=a0(a,e,u,u+h),m=f>=0&&t[f],g=p>=0&&t[p];if(r&&!g||!r&&!m){vg(th(c,o),s,a);const b=function pne(n,e,t,i,r){const s=new Jd(n,t,y);return s.multi=[],s.index=e,s.componentProviders=0,pV(s,r,i&&!t),s}(r?fne:hne,t.length,r,i,l);!r&&g&&(t[p].providerFactory=b),o0(s,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(b),o.push(b)}else o0(s,n,f>-1?f:p,pV(t[r?p:f],l,!r&&i));!r&&i&&g&&t[p].componentProviders++}}}function o0(n,e,t,i){const r=zc(e),s=function BJ(n){return!!n.useClass}(e);if(r||s){const l=(s?Ce(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function pV(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function a0(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function hne(n,e,t,i){return l0(this.multi,[])}function fne(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=nh(t,t[1],this.providerFactory.index,i);s=a.slice(0,o),l0(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],l0(r,s);return s}function l0(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function ze(n,e=[]){return t=>{t.providersResolver=(i,r)=>function dne(n,e,t){const i=Be();if(i.firstCreatePass){const r=Or(n);s0(t,i.data,i.blueprint,r,!0),s0(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class mV{}class _ne{resolveComponentFactory(e){throw function gne(n){const e=Error(`No component factory found for ${rt(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let rl=(()=>{class n{}return n.NULL=new _ne,n})();function yne(){return su(vn(),A())}function su(n,e){return new je(dr(n,e))}let je=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=yne,n})();function vne(n){return n instanceof je?n.nativeElement:n}class Mh{}let Ys=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function wne(){const n=A(),t=Gi(vn().index,n);return function bne(n){return n[11]}(rs(t)?t:n)}(),n})(),Cne=(()=>{class n{}return n.\u0275prov=O({token:n,providedIn:"root",factory:()=>null}),n})();class Qo{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const _V=new Qo("13.2.7"),c0={};function Xg(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(cn(s)),Pr(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&Xg(l[1],l,c,i)}const o=t.type;if(8&o)Xg(n,e,t.child,i);else if(32&o){const a=aE(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=AF(e,t);if(Array.isArray(a))i.push(...a);else{const l=ph(e[16]);Xg(l[1],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class kh{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Xg(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Pr(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(hE(e,i),wg(t,i))}this._attachedToViewContainer=!1}vF(this._lView[1],this._lView)}onDestroy(e){eL(this._lView[1],this._lView,null,e)}markForCheck(){NE(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){LE(this._lView[1],this._lView,this.context)}checkNoChanges(){!function AJ(n,e,t){cg(!0);try{LE(n,e,t)}finally{cg(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new q(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function DZ(n,e){mh(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new q(902,"");this._appRef=e}}class Ene extends kh{constructor(e){super(e),this._view=e}detectChanges(){cL(this._view)}checkNoChanges(){!function xJ(n){cg(!0);try{cL(n)}finally{cg(!1)}}(this._view)}get context(){return null}}class yV extends rl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=ri(e);return new u0(t,this.ngModule)}}function vV(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class u0 extends mV{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function zZ(n){return n.map($Z).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return vV(this.componentDef.inputs)}get outputs(){return vV(this.componentDef.outputs)}create(e,t,i,r){const s=(r=r||this.ngModule)?function Ine(n,e){return{get:(t,i,r)=>{const s=n.get(t,c0,r);return s!==c0||i===c0?s:e.get(t,i,r)}}}(e,r.injector):e,o=s.get(Mh,cN),a=s.get(Cne,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=i?function JF(n,e,t){if(Ut(n))return n.selectRootElement(e,t===kr.ShadowDom);let i="string"==typeof e?n.querySelector(e):e;return i.textContent="",i}(l,i,this.componentDef.encapsulation):dE(o.createRenderer(null,this.componentDef),c,function Dne(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(c)),d=this.componentDef.onPush?576:528,h=function kL(n,e){return{components:[],scheduler:n||_Z,clean:MJ,playerHandler:e||null,flags:0}}(),f=Ng(0,null,null,1,0,null,null,null,null,null),p=gh(null,f,h,d,null,null,o,l,a,s);let m,g;ug(p);try{const b=function xL(n,e,t,i,r,s){const o=t[1];t[20]=n;const l=Uc(o,20,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(Lg(l,c,!0),null!==n&&(mg(r,n,c),null!==l.classes&&_E(r,n,l.classes),null!==l.styles&&kF(r,n,l.styles)));const u=i.createRenderer(n,e),d=gh(t,XF(e),null,e.onPush?64:16,t[20],l,i,u,s||null,null);return o.firstCreatePass&&(vg(th(l,t),o,e.type),sL(o,l),oL(l,t.length,1)),Fg(t,d),t[20]=d}(u,this.componentDef,p,o,l);if(u)if(i)mg(l,u,["ng-version",_V.full]);else{const{attrs:v,classes:E}=function qZ(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!Nr(r))break;r=s}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);v&&mg(l,u,v),E&&E.length>0&&_E(l,u,E.join(" "))}if(g=TC(f,20),void 0!==t){const v=g.projection=[];for(let E=0;E<this.ngContentSelectors.length;E++){const I=t[E];v.push(null!=I?Array.from(I):null)}}m=function ML(n,e,t,i,r){const s=t[1],o=function hJ(n,e,t){const i=vn();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),aL(n,i,e,jc(n,e,1,null),t));const r=nh(e,n,i.directiveStart,i);oi(r,e);const s=dr(i,e);return s&&oi(s,e),r}(s,t,e);if(i.components.push(o),n[8]=o,r&&r.forEach(l=>l(o,e)),e.contentQueries){const l=vn();e.contentQueries(1,o,l.directiveStart)}const a=vn();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||($o(a.index),iL(t[1],a,0,a.directiveStart,a.directiveEnd,e),rL(e,o)),o}(b,this.componentDef,p,h,[YJ]),_h(f,p,null)}finally{dg()}return new Tne(this.componentType,m,su(g,p),p,g)}}class Tne extends class mne{}{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new Ene(r),this.componentType=e}get injector(){return new xc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class Xs{}class bV{}const ou=new Map;class EV extends Xs{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new yV(this);const i=lr(e);this._bootstrapComponents=cs(i.bootstrap),this._r3Injector=yL(e,t,[{provide:Xs,useValue:this},{provide:rl,useValue:this.componentFactoryResolver}],rt(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Je.THROW_IF_NOT_FOUND,i=le.Default){return e===Je||e===Xs||e===BE?this:this._r3Injector.get(e,t,i)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class d0 extends bV{constructor(e){super(),this.moduleType=e,null!==lr(e)&&function xne(n){const e=new Set;!function t(i){const r=lr(i,!0),s=r.id;null!==s&&(function wV(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${rt(e)} vs ${rt(e.name)}`)}(s,ou.get(s),i),ou.set(s,i));const o=cs(r.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new EV(this.moduleType,e)}}function Zg(n,e,t,i){return DV(A(),yi(),n,e,t,i)}function h0(n,e,t,i,r){return function IV(n,e,t,i,r,s,o){const a=e+t;return function tl(n,e,t,i){const r=ai(n,e,t);return ai(n,e+1,i)||r}(n,a,r,s)?ds(n,a+2,o?i.call(o,r,s):i(r,s)):Rh(n,a+2)}(A(),yi(),n,e,t,i,r)}function Rh(n,e){const t=n[e];return t===fe?void 0:t}function DV(n,e,t,i,r,s){const o=e+t;return ai(n,o,r)?ds(n,o+1,s?i.call(s,r):i(r)):Rh(n,o+1)}function f0(n){return e=>{setTimeout(n,void 0,e)}}const Le=class $ne extends H{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){var r,s,o;let a=e,l=t||(()=>null),c=i;if(e&&"object"==typeof e){const d=e;a=null===(r=d.next)||void 0===r?void 0:r.bind(d),l=null===(s=d.error)||void 0===s?void 0:s.bind(d),c=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(l=f0(l),a&&(a=f0(a)),c&&(c=f0(c)));const u=super.subscribe({next:a,error:l,complete:c});return e instanceof Et&&e.add(u),u}};function zne(){return this._results[qc()]()}class au{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=qc(),i=au.prototype;i[t]||(i[t]=zne)}get changes(){return this._changes||(this._changes=new Le)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=hr(e);(this._changesDetected=!function JY(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let gr=(()=>{class n{}return n.__NG_ELEMENT_ID__=Wne,n})();const qne=gr,Gne=class extends qne{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e){const t=this._declarationTContainer.tViews,i=gh(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(t)),_h(t,i,e),new kh(i)}};function Wne(){return Jg(vn(),A())}function Jg(n,e){return 4&n.type?new Gne(e,n,su(n,e)):null}let Ni=(()=>{class n{}return n.__NG_ELEMENT_ID__=Kne,n})();function Kne(){return PV(vn(),A())}const Qne=Ni,kV=class extends Qne{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return su(this._hostTNode,this._hostLView)}get injector(){return new xc(this._hostTNode,this._hostLView)}get parentInjector(){const e=yg(this._hostTNode,this._hostLView);if(IN(e)){const t=Ac(e,this._hostLView),i=Tc(e);return new xc(t[1].data[i+8],t)}return new xc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=RV(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){const r=e.createEmbeddedView(t||{});return this.insert(r,i),r}createComponent(e,t,i,r,s){const o=e&&!function rh(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const d=t||{};a=d.index,i=d.injector,r=d.projectableNodes,s=d.ngModuleRef}const l=o?e:new u0(ri(e)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const h=(o?c:this.parentInjector).get(Xs,null);h&&(s=h)}const u=l.create(c,r,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const i=e._lView,r=i[1];if(function bY(n){return Pr(n[3])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[3],h=new kV(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function SZ(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],NN(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function TZ(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(r,i,o,s);const a=mE(s,o),l=i[11],c=xg(l,o[7]);return null!==c&&function EZ(n,e,t,i,r,s){i[0]=r,i[6]=e,mh(n,i,t,1,r,s)}(r,o[6],l,i,c,a),e.attachToViewContainerRef(),NN(p0(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=RV(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=hE(this._lContainer,t);i&&(wg(p0(this._lContainer),t),vF(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=hE(this._lContainer,t);return i&&null!=wg(p0(this._lContainer),t)?new kh(i):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function RV(n){return n[8]}function p0(n){return n[8]||(n[8]=[])}function PV(n,e){let t;const i=e[n.index];if(Pr(i))t=i;else{let r;if(8&n.type)r=cn(i);else{const s=e[11];r=s.createComment("");const o=dr(n,e);el(s,xg(s,o),r,function kZ(n,e){return Ut(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=lL(i,e,r,n),Fg(e,t)}return new kV(t,n,e)}class m0{constructor(e){this.queryList=e,this.matches=null}clone(){return new m0(this.queryList)}setDirty(){this.queryList.setDirty()}}class g0{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new g0(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==VV(e,t).matches&&this.queries[t].setDirty()}}class OV{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class _0{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new _0(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class y0{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new y0(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,Zne(t,s)),this.matchTNodeWithReadOption(e,t,bg(t,e,s,!1,!1))}else i===gr?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,bg(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===je||r===Ni||r===gr&&4&t.type)this.addMatch(t.index,-2);else{const s=bg(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function Zne(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function eie(n,e,t,i){return-1===t?function Jne(n,e){return 11&n.type?su(n,e):4&n.type?Jg(n,e):null}(e,n):-2===t?function tie(n,e,t){return t===je?su(e,n):t===gr?Jg(e,n):t===Ni?PV(e,n):void 0}(n,e,i):nh(n,n[1],t,e)}function NV(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:eie(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function v0(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=NV(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&v0(h[1],h,c,i)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];v0(f[1],f,c,i)}}}}}return i}function Ge(n){const e=A(),t=Be(),i=gN();OC(i+1);const r=VV(t,i);if(n.dirty&&uN(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?v0(t,e,i,[]):NV(t,e,r,i);n.reset(s,vne),n.notifyOnChanges()}return!0}return!1}function jr(n,e,t){const i=Be();i.firstCreatePass&&(LV(i,new OV(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),FV(i,A(),e)}function zt(n,e,t,i){const r=Be();if(r.firstCreatePass){const s=vn();LV(r,new OV(e,t,i),s.index),function iie(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}FV(r,A(),t)}function We(){return function nie(n,e){return n[19].queries[e].queryList}(A(),gN())}function FV(n,e,t){const i=new au(4==(4&t));eL(n,e,i,i.destroy),null===e[19]&&(e[19]=new g0),e[19].queries.push(new m0(i))}function LV(n,e,t){null===n.queries&&(n.queries=new _0),n.queries.track(new y0(e,t))}function VV(n,e){return n.queries.getByIndex(e)}function n_(...n){}const I0=new k("Application Initializer");let S0=(()=>{class n{constructor(t){this.appInits=t,this.resolve=n_,this.reject=n_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Dh(s))t.push(s);else if(ZE(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(w(I0,8))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Nh=new k("AppId",{providedIn:"root",factory:function tB(){return`${T0()}${T0()}${T0()}`}});function T0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const nB=new k("Platform Initializer"),cu=new k("Platform ID"),iB=new k("appBootstrapListener");let rB=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})();const Zs=new k("LocaleId",{providedIn:"root",factory:()=>wn(Zs,le.Optional|le.SkipSelf)||function wie(){return"undefined"!=typeof $localize&&$localize.locale||Gg}()});class Eie{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let sB=(()=>{class n{compileModuleSync(t){return new d0(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=cs(lr(t).declarations).reduce((o,a)=>{const l=ri(a);return l&&o.push(new u0(l)),o},[]);return new Eie(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Iie=(()=>Promise.resolve(0))();function A0(n){"undefined"==typeof Zone?Iie.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class oe{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Le(!1),this.onMicrotaskEmpty=new Le(!1),this.onStable=new Le(!1),this.onError=new Le(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function Sie(){let n=lt.requestAnimationFrame,e=lt.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function xie(n){const e=()=>{!function Aie(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(lt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,M0(n),n.isCheckStableRunning=!0,x0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),M0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return oB(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),aB(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return oB(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),aB(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,M0(n),x0(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!oe.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(oe.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,Tie,n_,n_);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const Tie={};function x0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function M0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function oB(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function aB(n){n._nesting--,x0(n)}class Mie{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Le,this.onMicrotaskEmpty=new Le,this.onStable=new Le,this.onError=new Le}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}let k0=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{oe.assertNotInAngularZone(),A0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())A0(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(w(oe))},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})(),lB=(()=>{class n{constructor(){this._applications=new Map,R0.addToWindow(this)}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return R0.findTestabilityInTree(this,t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})();class kie{addToWindow(e){}findTestabilityInTree(e,t,i){return null}}let Hr,R0=new kie;const cB=new k("AllowMultipleToken");class uB{constructor(e,t){this.name=e,this.token=t}}function dB(n,e,t=[]){const i=`Platform: ${e}`,r=new k(i);return(s=[])=>{let o=hB();if(!o||o.injector.get(cB,!1))if(n)n(t.concat(s).concat({provide:r,useValue:!0}));else{const a=t.concat(s).concat({provide:r,useValue:!0},{provide:UE,useValue:"platform"});!function Nie(n){if(Hr&&!Hr.destroyed&&!Hr.injector.get(cB,!1))throw new q(400,"");Hr=n.get(fB);const e=n.get(nB,null);e&&e.forEach(t=>t())}(Je.create({providers:a,name:i}))}return function Fie(n){const e=hB();if(!e)throw new q(401,"");return e}()}}function hB(){return Hr&&!Hr.destroyed?Hr:null}let fB=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const a=function Lie(n,e){let t;return t="noop"===n?new Mie:("zone.js"===n?void 0:n)||new oe({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:oe,useValue:a}];return a.run(()=>{const c=Je.create({providers:l,parent:this.injector,name:t.moduleType.name}),u=t.create(c),d=u.injector.get(Go,null);if(!d)throw new q(402,"");return a.runOutsideAngular(()=>{const h=a.onError.subscribe({next:f=>{d.handleError(f)}});u.onDestroy(()=>{P0(this._modules,u),h.unsubscribe()})}),function Vie(n,e,t){try{const i=t();return Dh(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(d,a,()=>{const h=u.injector.get(S0);return h.runInitializers(),h.donePromise.then(()=>(function bte(n){zi(n,"Expected localeId to be defined"),"string"==typeof n&&(z2=n.toLowerCase().replace(/_/g,"-"))}(u.injector.get(Zs,Gg)||Gg),this._moduleDoBootstrap(u),u))})})}bootstrapModule(t,i=[]){const r=pB({},i);return function Pie(n,e,t){const i=new d0(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(i_);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new q(403,"");t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new q(404,"");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(w(Je))},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})();function pB(n,e){return Array.isArray(e)?e.reduce(pB,n):Object.assign(Object.assign({},n),e)}let i_=(()=>{class n{constructor(t,i,r,s,o){this._zone=t,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new it(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new it(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{oe.assertNotInAngularZone(),A0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{oe.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=Wd(a,l.pipe(K1()))}bootstrap(t,i){if(!this._initStatus.done)throw new q(405,"");let r;r=t instanceof mV?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(r.componentType);const s=function Oie(n){return n.isBoundToModule}(r)?void 0:this._injector.get(Xs),a=r.create(Je.NULL,[],i||r.selector,s),l=a.location.nativeElement,c=a.injector.get(k0,null),u=c&&a.injector.get(lB);return c&&u&&u.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),P0(this.components,a),u&&u.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new q(101,"");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;P0(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(iB,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(w(oe),w(Je),w(Go),w(rl),w(S0))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function P0(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let gB=!0,Ei=(()=>{class n{}return n.__NG_ELEMENT_ID__=jie,n})();function jie(n){return function Hie(n,e,t){if(sg(n)&&!t){const i=Gi(n.index,e);return new kh(i,i)}return 47&n.type?new kh(e[16],e):null}(vn(),A(),16==(16&n))}class wB{constructor(){}supports(e){return vh(e)}create(e){return new Kie(e)}}const Wie=(n,e)=>e;class Kie{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Wie}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<EB(i,r,s)?t:i,a=EB(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!vh(e))throw new q(900,"");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function oee(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[qc()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new Qie(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new CB),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new CB),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Qie{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Yie{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class CB{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new Yie,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function EB(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class DB{constructor(){}supports(e){return e instanceof Map||GE(e)}create(){return new Xie}}class Xie{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||GE(e)))throw new q(900,"")}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new Zie(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class Zie{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function IB(){return new o_([new wB])}let o_=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||IB()),deps:[[n,new Nc,new Ze]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new q(901,"")}}return n.\u0275prov=O({token:n,providedIn:"root",factory:IB}),n})();function SB(){return new Fh([new DB])}let Fh=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||SB()),deps:[[n,new Nc,new Ze]]}}find(t){const i=this.factories.find(s=>s.supports(t));if(i)return i;throw new q(901,"")}}return n.\u0275prov=O({token:n,providedIn:"root",factory:SB}),n})();const tre=dB(null,"core",[{provide:cu,useValue:"unknown"},{provide:fB,deps:[Je]},{provide:lB,deps:[]},{provide:rB,deps:[]}]);let nre=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(w(i_))},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({}),n})(),a_=null;function ps(){return a_}const pe=new k("DocumentToken");let ol=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=O({token:n,factory:function(){return function ore(){return w(TB)}()},providedIn:"platform"}),n})();const are=new k("Location Initialized");let TB=(()=>{class n extends ol{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ps().getBaseHref(this._doc)}onPopState(t){const i=ps().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=ps().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){AB()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){AB()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(w(pe))},n.\u0275prov=O({token:n,factory:function(){return function lre(){return new TB(w(pe))}()},providedIn:"platform"}),n})();function AB(){return!!window.history.pushState}function V0(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function xB(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Js(n){return n&&"?"!==n[0]?"?"+n:n}let uu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=O({token:n,factory:function(){return function cre(n){const e=w(pe).location;return new MB(w(ol),e&&e.origin||"")}()},providedIn:"root"}),n})();const B0=new k("appBaseHref");let MB=(()=>{class n extends uu{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return V0(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Js(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Js(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Js(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(w(ol),w(B0,8))},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})(),ure=(()=>{class n extends uu{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=V0(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+Js(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+Js(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(w(ol),w(B0,8))},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})(),Lh=(()=>{class n{constructor(t,i){this._subject=new Le,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=xB(kB(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Js(i))}normalize(t){return n.stripTrailingSlash(function hre(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,kB(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._platformStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Js(i)),r)}replaceState(t,i="",r=null){this._platformStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Js(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=Js,n.joinWithSlash=V0,n.stripTrailingSlash=xB,n.\u0275fac=function(t){return new(t||n)(w(uu),w(ol))},n.\u0275prov=O({token:n,factory:function(){return function dre(){return new Lh(w(uu),w(ol))}()},providedIn:"root"}),n})();function kB(n){return n.replace(/\/index.html$/,"")}let Q0=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(vh(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${rt(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(y(o_),y(Fh),y(je),y(Ys))},n.\u0275dir=L({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Xre{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Uh=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Xre(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),UB(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{UB(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(y(Ni),y(gr),y(o_))},n.\u0275dir=L({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function UB(n,e){n.context.$implicit=e.item}let to=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new Zre,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){jB("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){jB("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(y(Ni),y(gr))},n.\u0275dir=L({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Zre{constructor(){this.$implicit=null,this.ngIf=null}}function jB(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${rt(e)}'.`)}class Y0{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let __=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=L({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),HB=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new Y0(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(y(Ni),y(gr),y(__,9))},n.\u0275dir=L({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),zB=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split(".");null!=(i=null!=i&&s?`${i}${s}`:i)?this._renderer.setStyle(this._ngEl.nativeElement,r,i):this._renderer.removeStyle(this._ngEl.nativeElement,r)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(y(je),y(Fh),y(Ys))},n.\u0275dir=L({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})();class nse{createSubscription(e,t){return e.subscribe({next:t,error:i=>{throw i}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class ise{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}onDestroy(e){}}const rse=new ise,sse=new nse;let qB=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(Dh(t))return rse;if(e2(t))return sse;throw function zr(n,e){return new q(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(y(Ei,16))},n.\u0275pipe=Pi({name:"async",type:n,pure:!1}),n})(),du=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({}),n})();const WB="browser";let Sse=(()=>{class n{}return n.\u0275prov=O({token:n,providedIn:"root",factory:()=>new Tse(w(pe),window)}),n})();class Tse{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ase(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=KB(this.window.history)||KB(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function KB(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class J0 extends class Mse extends class sre{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function rre(n){a_||(a_=n)}(new J0)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function kse(){return jh=jh||document.querySelector("base"),jh?jh.getAttribute("href"):null}();return null==t?null:function Rse(n){y_=y_||document.createElement("a"),y_.setAttribute("href",n);const e=y_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){jh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Qre(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let y_,jh=null;const QB=new k("TRANSITION_ID"),Ose=[{provide:I0,useFactory:function Pse(n,e,t){return()=>{t.get(S0).donePromise.then(()=>{const i=ps(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[QB,pe,Je],multi:!0}];class eD{static init(){!function Rie(n){R0=n}(new eD)}addToWindow(e){lt.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},lt.getAllAngularTestabilities=()=>e.getAllTestabilities(),lt.getAllAngularRootElements=()=>e.getAllRootElements(),lt.frameworkStabilizers||(lt.frameworkStabilizers=[]),lt.frameworkStabilizers.push(i=>{const r=lt.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?ps().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Nse=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})();const v_=new k("EventManagerPlugins");let b_=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(w(v_),w(oe))},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})();class YB{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=ps().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let XB=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})(),Hh=(()=>{class n extends XB{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(ZB),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ZB))}}return n.\u0275fac=function(t){return new(t||n)(w(pe))},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})();function ZB(n){ps().remove(n)}const tD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},nD=/%COMP%/g;function w_(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?w_(n,r,t):(r=r.replace(nD,n),t.push(r))}return t}function tU(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let C_=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new iD(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case kr.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new jse(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case kr.ShadowDom:return new Hse(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=w_(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(w(b_),w(Hh),w(Nh))},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})();class iD{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(tD[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=tD[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=tD[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Yi.DashCase|Yi.Important)?e.style.setProperty(t,i,r&Yi.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Yi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,tU(i)):this.eventManager.addEventListener(e,t,tU(i))}}class jse extends iD{constructor(e,t,i,r){super(e),this.component=i;const s=w_(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function Vse(n){return"_ngcontent-%COMP%".replace(nD,n)}(r+"-"+i.id),this.hostAttr=function Bse(n){return"_nghost-%COMP%".replace(nD,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class Hse extends iD{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=w_(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let $se=(()=>{class n extends YB{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(w(pe))},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})();const iU=["alt","control","meta","shift"],qse={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},rU={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Gse={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Wse=(()=>{class n extends YB{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ps().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="";if(iU.forEach(l=>{const c=i.indexOf(l);c>-1&&(i.splice(c,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const a={};return a.domEventName=r,a.fullKey=o,a}static getEventFullKey(t){let i="",r=function Kse(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&rU.hasOwnProperty(e)&&(e=rU[e]))}return qse[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),iU.forEach(s=>{s!=r&&Gse[s](t)&&(i+=s+".")}),i+=r,i}static eventCallback(t,i,r){return s=>{n.getEventFullKey(s)===t&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(w(pe))},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})();const Zse=dB(tre,"browser",[{provide:cu,useValue:WB},{provide:nB,useValue:function Qse(){J0.makeCurrent(),eD.init()},multi:!0},{provide:pe,useFactory:function Xse(){return function gY(n){IC=n}(document),document},deps:[]}]),Jse=[{provide:UE,useValue:"root"},{provide:Go,useFactory:function Yse(){return new Go},deps:[]},{provide:v_,useClass:$se,multi:!0,deps:[pe,oe,cu]},{provide:v_,useClass:Wse,multi:!0,deps:[pe]},{provide:C_,useClass:C_,deps:[b_,Hh,Nh]},{provide:Mh,useExisting:C_},{provide:XB,useExisting:Hh},{provide:Hh,useClass:Hh,deps:[pe]},{provide:k0,useClass:k0,deps:[oe]},{provide:b_,useClass:b_,deps:[v_,oe]},{provide:class xse{},useClass:Nse,deps:[]}];let sU=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:Nh,useValue:t.appId},{provide:QB,useExisting:Nh},Ose]}}}return n.\u0275fac=function(t){return new(t||n)(w(n,12))},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({providers:Jse,imports:[du,nre]}),n})();"undefined"!=typeof window&&window;let sD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=O({token:n,factory:function(t){let i=null;return i=t?new(t||n):w(lU),i},providedIn:"root"}),n})(),lU=(()=>{class n extends sD{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case Ye.NONE:return i;case Ye.HTML:return as(i,"HTML")?Qi(i):rF(this._doc,String(i)).toString();case Ye.STYLE:return as(i,"Style")?Qi(i):i;case Ye.SCRIPT:if(as(i,"Script"))return Qi(i);throw new Error("unsafe value used in a script context");case Ye.URL:return YN(i),as(i,"URL")?Qi(i):uh(String(i));case Ye.RESOURCE_URL:if(as(i,"ResourceURL"))return Qi(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function MX(n){return new IX(n)}(t)}bypassSecurityTrustStyle(t){return function kX(n){return new SX(n)}(t)}bypassSecurityTrustScript(t){return function RX(n){return new TX(n)}(t)}bypassSecurityTrustUrl(t){return function PX(n){return new AX(n)}(t)}bypassSecurityTrustResourceUrl(t){return function OX(n){return new xX(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(w(pe))},n.\u0275prov=O({token:n,factory:function(t){let i=null;return i=t?new t:function coe(n){return new lU(n.get(pe))}(w(Je)),i},providedIn:"root"}),n})();class cU{}const no="*";function hu(n,e){return{type:7,name:n,definitions:e,options:{}}}function io(n,e=null){return{type:4,styles:e,timings:n}}function uU(n,e=null){return{type:3,steps:n,options:e}}function dU(n,e=null){return{type:2,steps:n,options:e}}function en(n){return{type:6,styles:n,offset:null}}function qr(n,e,t){return{type:0,name:n,styles:e,options:t}}function ro(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function hU(n=null){return{type:9,options:n}}function fU(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function pU(n){Promise.resolve(null).then(n)}class $h{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){pU(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class mU{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?pU(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const Pe=!1;function gU(n){return new q(3e3,Pe)}function qoe(){return"undefined"!=typeof window&&void 0!==window.document}function aD(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Xo(n){switch(n.length){case 0:return new $h;case 1:return n[0];default:return new mU(n)}}function _U(n,e,t,i,r={},s={}){const o=[],a=[];let l=-1,c=null;if(i.forEach(u=>{const d=u.offset,h=d==l,f=h&&c||{};Object.keys(u).forEach(p=>{let m=p,g=u[p];if("offset"!==p)switch(m=e.normalizePropertyName(m,o),g){case"!":g=r[p];break;case no:g=s[p];break;default:g=e.normalizeStyleValue(p,m,g,o)}f[m]=g}),h||a.push(f),c=f,l=d}),o.length)throw function Ooe(n){return new q(3502,Pe)}();return a}function lD(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&cD(t,"start",n)));break;case"done":n.onDone(()=>i(t&&cD(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&cD(t,"destroy",n)))}}function cD(n,e,t){const i=t.totalTime,s=uD(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function uD(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Zi(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function yU(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let dD=(n,e)=>!1,vU=(n,e,t)=>[],bU=null;function hD(n){const e=n.parentNode||n.host;return e===bU?null:e}(aD()||"undefined"!=typeof Element)&&(qoe()?(bU=(()=>document.documentElement)(),dD=(n,e)=>{for(;e;){if(e===n)return!0;e=hD(e)}return!1}):dD=(n,e)=>n.contains(e),vU=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let al=null,wU=!1;function CU(n){al||(al=function Woe(){return"undefined"!=typeof document?document.body:null}()||{},wU=!!al.style&&"WebkitAppearance"in al.style);let e=!0;return al.style&&!function Goe(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in al.style,!e&&wU&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in al.style)),e}const EU=dD,DU=vU;let IU=(()=>{class n{validateStyleProperty(t){return CU(t)}matchesElement(t,i){return!1}containsElement(t,i){return EU(t,i)}getParentElement(t){return hD(t)}query(t,i,r){return DU(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],l){return new $h(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})(),fD=(()=>{class n{}return n.NOOP=new IU,n})();const pD="ng-enter",D_="ng-leave",I_="ng-trigger",S_=".ng-trigger",TU="ng-animating",mD=".ng-animating";function ll(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:gD(parseFloat(e[1]),e[2])}function gD(n,e){return"s"===e?1e3*n:n}function T_(n,e,t){return n.hasOwnProperty("duration")?n:function Yoe(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(gU()),{duration:0,delay:0,easing:""};r=gD(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=gD(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(function hoe(){return new q(3100,Pe)}()),a=!0),s<0&&(e.push(function foe(){return new q(3101,Pe)}()),a=!0),a&&e.splice(l,0,gU())}return{duration:r,delay:s,easing:o}}(n,e,t)}function fu(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Zo(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else fu(n,t);return t}function xU(n,e,t){return t?e+":"+t+";":""}function MU(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=xU(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=xU(0,Joe(t),n.style[t]));n.setAttribute("style",e)}function ms(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const r=yD(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[r]),n.style[r]=e[i]}),aD()&&MU(n))}function cl(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=yD(t);n.style[i]=""}),aD()&&MU(n))}function zh(n){return Array.isArray(n)?1==n.length?n[0]:dU(n):n}const _D=new RegExp("{{\\s*(.+?)\\s*}}","g");function kU(n){let e=[];if("string"==typeof n){let t;for(;t=_D.exec(n);)e.push(t[1]);_D.lastIndex=0}return e}function A_(n,e,t){const i=n.toString(),r=i.replace(_D,(s,o)=>{let a=e[o];return e.hasOwnProperty(o)||(t.push(function moe(n){return new q(3003,Pe)}()),a=""),a.toString()});return r==i?n:r}function x_(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Zoe=/-+([a-z0-9])/g;function yD(n){return n.replace(Zoe,(...e)=>e[1].toUpperCase())}function Joe(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ji(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function goe(n){return new q(3004,Pe)}()}}function RU(n,e){return window.getComputedStyle(n)[e]}function sae(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function oae(n,e,t){if(":"==n[0]){const l=function aae(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function Moe(n){return new q(3016,Pe)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function xoe(n){return new q(3015,Pe)}()),e;const r=i[1],s=i[2],o=i[3];e.push(PU(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(PU(o,r))}(i,t,e)):t.push(n),t}const P_=new Set(["true","1"]),O_=new Set(["false","0"]);function PU(n,e){const t=P_.has(n)||O_.has(n),i=P_.has(e)||O_.has(e);return(r,s)=>{let o="*"==n||n==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?P_.has(n):O_.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?P_.has(e):O_.has(e)),o&&a}}const lae=new RegExp("s*:selfs*,?","g");function vD(n,e,t,i){return new cae(n).build(e,t,i)}class cae{constructor(e){this._driver=e}build(e,t,i){const r=new hae(t);this._resetContextStyleTimingState(r);const s=Ji(this,zh(e),r);return r.unsupportedCSSPropertiesFound.size&&r.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function yoe(){return new q(3006,Pe)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(function voe(){return new q(3007,Pe)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{if(N_(a)){const l=a;Object.keys(l).forEach(c=>{kU(l[c]).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}}),s.size&&(x_(s.values()),t.errors.push(function boe(n,e){return new q(3008,Pe)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Ji(this,zh(e.animation),t);return{type:1,matchers:sae(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:ul(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Ji(this,i,t)),options:ul(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=Ji(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:ul(e.options)}}visitAnimate(e,t){const i=function pae(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return bD(T_(n,e).duration,0,"");const i=n;if(i.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=bD(0,0,"");return s.dynamic=!0,s.strValue=i,s}return t=t||T_(i,e),bD(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:en({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=en(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(o=>{"string"==typeof o?o==no?i.push(o):t.errors.push(function woe(n){return new q(3002,Pe)}()):i.push(o)}):i.push(e.styles);let r=!1,s=null;return i.forEach(o=>{if(N_(o)){const a=o,l=a.easing;if(l&&(s=l,delete a.easing),!r)for(let c in a)if(a[c].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return delete o[a],void t.unsupportedCSSPropertiesFound.add(a);const l=t.collectedStyles[t.currentQuerySelector],c=l[a];let u=!0;c&&(s!=r&&s>=c.startTime&&r<=c.endTime&&(t.errors.push(function Coe(n,e,t,i,r){return new q(3010,Pe)}()),u=!1),s=c.startTime),u&&(l[a]={startTime:s,endTime:r}),t.options&&function Xoe(n,e,t){const i=e.params||{},r=kU(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function poe(n){return new q(3001,Pe)}())})}(o[a],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Eoe(){return new q(3011,Pe)}()),i;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(b=>{const v=this._makeStyleAst(b,t);let E=null!=v.offset?v.offset:function fae(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(N_(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(N_(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(v.styles),I=0;return null!=E&&(s++,I=v.offset=E),l=l||I<0||I>1,a=a||I<c,c=I,o.push(I),v});l&&t.errors.push(function Doe(){return new q(3012,Pe)}()),a&&t.errors.push(function Ioe(){return new q(3200,Pe)}());const d=e.steps.length;let h=0;s>0&&s<d?t.errors.push(function Soe(){return new q(3202,Pe)}()):0==s&&(h=1/(d-1));const f=d-1,p=t.currentTime,m=t.currentAnimateTimings,g=m.duration;return u.forEach((b,v)=>{const E=h>0?v==f?1:h*v:o[v],I=E*g;t.currentTime=p+m.delay+I,m.duration=I,this._validateStyleAst(b,t),b.offset=E,i.styles.push(b)}),i}visitReference(e,t){return{type:8,animation:Ji(this,zh(e.animation),t),options:ul(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:ul(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:ul(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function uae(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(lae,"")),n=n.replace(/@\*/g,S_).replace(/@\w+/g,t=>S_+"-"+t.substr(1)).replace(/:animating/g,mD),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Zi(t.collectedStyles,t.currentQuerySelector,{});const a=Ji(this,zh(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:ul(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Toe(){return new q(3013,Pe)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:T_(e.timings,t.errors,!0);return{type:12,animation:Ji(this,zh(e.animation),t),timings:i,options:null}}}class hae{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function N_(n){return!Array.isArray(n)&&"object"==typeof n}function ul(n){return n?(n=fu(n)).params&&(n.params=function dae(n){return n?fu(n):null}(n.params)):n={},n}function bD(n,e,t){return{duration:n,delay:e,easing:t}}function wD(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class F_{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const _ae=new RegExp(":enter","g"),vae=new RegExp(":leave","g");function CD(n,e,t,i,r,s={},o={},a,l,c=[]){return(new bae).buildKeyframes(n,e,t,i,r,s,o,a,l,c)}class bae{buildKeyframes(e,t,i,r,s,o,a,l,c,u=[]){c=c||new F_;const d=new ED(e,t,c,r,s,u,[]);d.options=l,d.currentTimeline.setStyles([o],null,d.errors,l),Ji(this,i,d);const h=d.timelines.filter(f=>f.containsAnimation());if(Object.keys(a).length){let f;for(let p=h.length-1;p>=0;p--){const m=h[p];if(m.element===t){f=m;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,d.errors,l)}return h.length?h.map(f=>f.buildKeyframes()):[wD(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?ll(i.duration):null,a=null!=i.delay?ll(i.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Ji(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=L_);const o=ll(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Ji(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?ll(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Ji(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return T_(t.params?A_(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?ll(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=L_);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),Ji(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;Ji(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}}const L_={};class ED{constructor(e,t,i,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=L_,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new V_(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=ll(i.duration)),null!=i.delay&&(r.delay=ll(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=A_(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new ED(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=L_,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},s=new wae(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(_ae,"."+this._enterClassName)).replace(vae,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&0==a.length&&o.push(function Aoe(n){return new q(3014,Pe)}()),a}}class V_{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new V_(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||no,this._currentKeyframe[t]=no}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&(this._previousKeyframe.easing=t);const s=r&&r.params||{},o=function Cae(n,e){const t={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(e),i.forEach(s=>{t[s]=no})):Zo(r,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const l=A_(o[a],s,i);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:no),this._updateStyle(a,l)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],r=e._styleSummary[t];(!i||r.time>i.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Zo(a,!0);Object.keys(c).forEach(u=>{const d=c[u];"!"==d?e.add(u):d==no&&t.add(u)}),i||(c.offset=l/this.duration),r.push(c)});const s=e.size?x_(e.values()):[],o=t.size?x_(t.values()):[];if(i){const a=r[0],l=fu(a);a.offset=0,l.offset=1,r=[a,l]}return wD(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class wae extends V_{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,l=Zo(e[0],!1);l.offset=0,s.push(l);const c=Zo(e[0],!1);c.offset=FU(a),s.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let h=Zo(e[d],!1);h.offset=FU((t+h.offset*i)/o),s.push(h)}i=o,t=0,r="",e=s}return wD(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function FU(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class DD{}class Eae extends DD{normalizePropertyName(e,t){return yD(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(Dae[t]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function _oe(n,e){return new q(3005,Pe)}())}return o+s}}const Dae=(()=>function Iae(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function LU(n,e,t,i,r,s,o,a,l,c,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const ID={};class VU{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function Sae(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){const r=this._stateStyles["*"],s=this._stateStyles[e],o=r?r.buildStyles(t,i):{};return s?s.buildStyles(t,i):o}build(e,t,i,r,s,o,a,l,c,u){const d=[],h=this.ast.options&&this.ast.options.params||ID,p=this.buildStyles(i,a&&a.params||ID,d),m=l&&l.params||ID,g=this.buildStyles(r,m,d),b=new Set,v=new Map,E=new Map,I="void"===r,B={params:Object.assign(Object.assign({},h),m)},W=u?[]:CD(e,t,this.ast.animation,s,o,p,g,B,c,d);let ae=0;if(W.forEach(be=>{ae=Math.max(be.duration+be.delay,ae)}),d.length)return LU(t,this._triggerName,i,r,I,p,g,[],[],v,E,ae,d);W.forEach(be=>{const Ct=be.element,Ar=Zi(v,Ct,{});be.preStyleProps.forEach(is=>Ar[is]=!0);const or=Zi(E,Ct,{});be.postStyleProps.forEach(is=>or[is]=!0),Ct!==t&&b.add(Ct)});const X=x_(b.values());return LU(t,this._triggerName,i,r,I,p,g,W,X,v,E,ae)}}class Tae{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},r=fu(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!=o&&(r[s]=o)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const o=s;Object.keys(o).forEach(a=>{let l=o[a];l.length>1&&(l=A_(l,r,t));const c=this.normalizer.normalizePropertyName(a,t);l=this.normalizer.normalizeStyleValue(a,c,l,t),i[c]=l})}}),i}}class xae{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(r=>{this.states[r.name]=new Tae(r.style,r.options&&r.options.params||{},i)}),BU(this.states,"true","1"),BU(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new VU(e,r,this.states))}),this.fallbackTransition=function Mae(n,e,t){return new VU(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function BU(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const kae=new F_;class Rae{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],s=vD(this._driver,t,i,[]);if(i.length)throw function Noe(n){return new q(3503,Pe)}();this._animations[e]=s}_buildPlayer(e,t,i){const r=e.element,s=_U(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations[e];let o;const a=new Map;if(s?(o=CD(this._driver,t,s,pD,D_,{},{},i,kae,r),o.forEach(u=>{const d=Zi(a,u.element,{});u.postStyleProps.forEach(h=>d[h]=null)})):(r.push(function Foe(){return new q(3300,Pe)}()),o=[]),r.length)throw function Loe(n){return new q(3504,Pe)}();a.forEach((u,d)=>{Object.keys(u).forEach(h=>{u[h]=this._driver.computeStyle(d,h,no)})});const c=Xo(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,{},d)}));return this._playersById[e]=c,c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function Voe(n){return new q(3301,Pe)}();return t}listen(e,t,i,r){const s=uD(t,"","","");return lD(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const UU="ng-animate-queued",SD="ng-animate-disabled",Lae=[],jU={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Vae={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},vr="__ng_removed";class TD{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function Hae(n){return null!=n?n:null}(i?e.value:e),i){const s=fu(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const qh="void",AD=new TD(qh);class Bae{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,br(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.hasOwnProperty(t))throw function Boe(n,e){return new q(3302,Pe)}();if(null==i||0==i.length)throw function Uoe(n){return new q(3303,Pe)}();if(!function $ae(n){return"start"==n||"done"==n}(i))throw function joe(n,e){return new q(3400,Pe)}();const s=Zi(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=Zi(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(br(e,I_),br(e,I_+"-"+t),a[t]=AD),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function Hoe(n){return new q(3401,Pe)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new xD(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(br(e,I_),br(e,I_+"-"+t),this._engine.statesByElement.set(e,a={}));let l=a[t];const c=new TD(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a[t]=c,l||(l=AD),c.value!==qh&&l.value===c.value){if(!function Gae(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const m=[],g=s.matchStyles(l.value,l.params,m),b=s.matchStyles(c.value,c.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{cl(e,g),ms(e,b)})}return}const h=Zi(this._engine.playersByElement,e,[]);h.forEach(m=>{m.namespaceId==this.id&&m.triggerName==t&&m.queued&&m.destroy()});let f=s.matchTransition(l.value,c.value,e,c.params),p=!1;if(!f){if(!r)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(br(e,UU),o.onStart(()=>{pu(e,UU)})),o.onDone(()=>{let m=this.players.indexOf(o);m>=0&&this.players.splice(m,1);const g=this._engine.playersByElement.get(e);if(g){let b=g.indexOf(o);b>=0&&g.splice(b,1)}}),this.players.push(o),h.push(o),o}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,S_,!0);i.forEach(r=>{if(r[vr])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(Object.keys(s).forEach(l=>{if(o.set(l,s[l].value),this._triggers[l]){const c=this.trigger(e,l,qh,r);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&Xo(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers[o].fallbackTransition,c=i[o]||AD,u=new TD(qh),d=new xD(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[vr];(!s||s===jU)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){br(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=uD(s,i.triggerName,i.fromState.value,i.toState.value);l._data=e,lD(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class Uae{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new Bae(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement,s=i.length-1;if(s>=0){let o=!1;if(void 0!==this.driver.getParentElement){let a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}}else for(let a=s;a>=0;a--)if(this.driver.containsElement(i[a].hostElement,t)){i.splice(a+1,0,e),o=!0;break}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const o=i[r[s]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&t.add(a)}}}return t}trigger(e,t,i,r){if(B_(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!B_(t))return;const s=t[vr];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),br(e,SD)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),pu(e,SD))}removeNode(e,t,i,r){if(B_(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[vr]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return B_(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,S_,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,mD,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Xo(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const i=e[vr];if(i&&i.setForRemoval){if(e[vr]=jU,i.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,i.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(SD))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)br(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Xo(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function $oe(n){return new q(3402,Pe)}()}_flushAnimations(e,t){const i=new F_,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(G=>{u.add(G);const Z=this.driver.query(G,".ng-animate-queued",!0);for(let re=0;re<Z.length;re++)u.add(Z[re])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=zU(h,this.collectedEnterElements),p=new Map;let m=0;f.forEach((G,Z)=>{const re=pD+m++;p.set(Z,re),G.forEach(qe=>br(qe,re))});const g=[],b=new Set,v=new Set;for(let G=0;G<this.collectedLeaveElements.length;G++){const Z=this.collectedLeaveElements[G],re=Z[vr];re&&re.setForRemoval&&(g.push(Z),b.add(Z),re.hasAnimation?this.driver.query(Z,".ng-star-inserted",!0).forEach(qe=>b.add(qe)):v.add(Z))}const E=new Map,I=zU(h,Array.from(b));I.forEach((G,Z)=>{const re=D_+m++;E.set(Z,re),G.forEach(qe=>br(qe,re))}),e.push(()=>{f.forEach((G,Z)=>{const re=p.get(Z);G.forEach(qe=>pu(qe,re))}),I.forEach((G,Z)=>{const re=E.get(Z);G.forEach(qe=>pu(qe,re))}),g.forEach(G=>{this.processLeaveNode(G)})});const B=[],W=[];for(let G=this._namespaceList.length-1;G>=0;G--)this._namespaceList[G].drainQueuedTransitions(t).forEach(re=>{const qe=re.player,$n=re.element;if(B.push(qe),this.collectedEnterElements.length){const ki=$n[vr];if(ki&&ki.setForMove){if(ki.previousTriggersValues&&ki.previousTriggersValues.has(re.triggerName)){const _c=ki.previousTriggersValues.get(re.triggerName),qa=this.statesByElement.get(re.element);qa&&qa[re.triggerName]&&(qa[re.triggerName].value=_c)}return void qe.destroy()}}const Us=!d||!this.driver.containsElement(d,$n),ar=E.get($n),za=p.get($n),Bt=this._buildInstruction(re,i,za,ar,Us);if(Bt.errors&&Bt.errors.length)return void W.push(Bt);if(Us)return qe.onStart(()=>cl($n,Bt.fromStyles)),qe.onDestroy(()=>ms($n,Bt.toStyles)),void r.push(qe);if(re.isFallbackTransition)return qe.onStart(()=>cl($n,Bt.fromStyles)),qe.onDestroy(()=>ms($n,Bt.toStyles)),void r.push(qe);const W7=[];Bt.timelines.forEach(ki=>{ki.stretchStartingKeyframe=!0,this.disabledNodes.has(ki.element)||W7.push(ki)}),Bt.timelines=W7,i.append($n,Bt.timelines),o.push({instruction:Bt,player:qe,element:$n}),Bt.queriedElements.forEach(ki=>Zi(a,ki,[]).push(qe)),Bt.preStyleProps.forEach((ki,_c)=>{const qa=Object.keys(ki);if(qa.length){let yc=l.get(_c);yc||l.set(_c,yc=new Set),qa.forEach(E1=>yc.add(E1))}}),Bt.postStyleProps.forEach((ki,_c)=>{const qa=Object.keys(ki);let yc=c.get(_c);yc||c.set(_c,yc=new Set),qa.forEach(E1=>yc.add(E1))})});if(W.length){const G=[];W.forEach(Z=>{G.push(function zoe(n,e){return new q(3505,Pe)}())}),B.forEach(Z=>Z.destroy()),this.reportError(G)}const ae=new Map,X=new Map;o.forEach(G=>{const Z=G.element;i.has(Z)&&(X.set(Z,Z),this._beforeAnimationBuild(G.player.namespaceId,G.instruction,ae))}),r.forEach(G=>{const Z=G.element;this._getPreviousPlayers(Z,!1,G.namespaceId,G.triggerName,null).forEach(qe=>{Zi(ae,Z,[]).push(qe),qe.destroy()})});const be=g.filter(G=>GU(G,l,c)),Ct=new Map;$U(Ct,this.driver,v,c,no).forEach(G=>{GU(G,l,c)&&be.push(G)});const or=new Map;f.forEach((G,Z)=>{$U(or,this.driver,new Set(G),l,"!")}),be.forEach(G=>{const Z=Ct.get(G),re=or.get(G);Ct.set(G,Object.assign(Object.assign({},Z),re))});const is=[],Hd=[],$d={};o.forEach(G=>{const{element:Z,player:re,instruction:qe}=G;if(i.has(Z)){if(u.has(Z))return re.onDestroy(()=>ms(Z,qe.toStyles)),re.disabled=!0,re.overrideTotalTime(qe.totalTime),void r.push(re);let $n=$d;if(X.size>1){let ar=Z;const za=[];for(;ar=ar.parentNode;){const Bt=X.get(ar);if(Bt){$n=Bt;break}za.push(ar)}za.forEach(Bt=>X.set(Bt,$n))}const Us=this._buildAnimation(re.namespaceId,qe,ae,s,or,Ct);if(re.setRealPlayer(Us),$n===$d)is.push(re);else{const ar=this.playersByElement.get($n);ar&&ar.length&&(re.parentPlayer=Xo(ar)),r.push(re)}}else cl(Z,qe.fromStyles),re.onDestroy(()=>ms(Z,qe.toStyles)),Hd.push(re),u.has(Z)&&r.push(re)}),Hd.forEach(G=>{const Z=s.get(G.element);if(Z&&Z.length){const re=Xo(Z);G.setRealPlayer(re)}}),r.forEach(G=>{G.parentPlayer?G.syncPlayerEvents(G.parentPlayer):G.destroy()});for(let G=0;G<g.length;G++){const Z=g[G],re=Z[vr];if(pu(Z,D_),re&&re.hasAnimation)continue;let qe=[];if(a.size){let Us=a.get(Z);Us&&Us.length&&qe.push(...Us);let ar=this.driver.query(Z,mD,!0);for(let za=0;za<ar.length;za++){let Bt=a.get(ar[za]);Bt&&Bt.length&&qe.push(...Bt)}}const $n=qe.filter(Us=>!Us.destroyed);$n.length?zae(this,Z,$n):this.processLeaveNode(Z)}return g.length=0,is.forEach(G=>{this.players.push(G),G.onDone(()=>{G.destroy();const Z=this.players.indexOf(G);this.players.splice(Z,1)}),G.play()}),is}elementContainsData(e,t){let i=!1;const r=t[vr];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==qh;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,d=Zi(i,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}cl(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,h=t.timelines.map(p=>{const m=p.element;u.add(m);const g=m[vr];if(g&&g.removedBeforeQueried)return new $h(p.duration,p.delay);const b=m!==l,v=function qae(n){const e=[];return qU(n,e),e}((i.get(m)||Lae).map(ae=>ae.getRealPlayer())).filter(ae=>!!ae.element&&ae.element===m),E=s.get(m),I=o.get(m),B=_U(0,this._normalizer,0,p.keyframes,E,I),W=this._buildPlayer(p,B,v);if(p.subTimeline&&r&&d.add(m),b){const ae=new xD(e,a,m);ae.setRealPlayer(W),c.push(ae)}return W});c.forEach(p=>{Zi(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function jae(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>br(p,TU));const f=Xo(h);return f.onDestroy(()=>{u.forEach(p=>pu(p,TU)),ms(l,t.toStyles)}),d.forEach(p=>{Zi(r,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new $h(e.duration,e.delay)}}class xD{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new $h,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>lD(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Zi(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function B_(n){return n&&1===n.nodeType}function HU(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function $U(n,e,t,i,r){const s=[];t.forEach(l=>s.push(HU(l)));const o=[];i.forEach((l,c)=>{const u={};l.forEach(d=>{const h=u[d]=e.computeStyle(c,d,r);(!h||0==h.length)&&(c[vr]=Vae,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>HU(l,s[a++])),o}function zU(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function br(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function pu(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function zae(n,e,t){Xo(t).onDone(()=>n.processLeaveNode(e))}function qU(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof mU?qU(i.players,e):e.push(i)}}function GU(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class U_{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new Uae(e,t,i),this._timelineEngine=new Rae(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],u=vD(this._driver,s,l,[]);if(l.length)throw function Poe(n,e){return new q(3404,Pe)}();a=function Aae(n,e,t){return new xae(n,e,t)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=yU(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=yU(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Kae=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&ms(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ms(this._element,this._initialStyles),this._endStyles&&(ms(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(cl(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(cl(this._element,this._endStyles),this._endStyles=null),ms(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function MD(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=t[i];Qae(r)&&(e=e||{},e[r]=n[r])}return e}function Qae(n){return"display"===n||"position"===n}class WU{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(i=>{"offset"!=i&&(e[i]=this._finished?t[i]:RU(this.element,i))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class Yae{validateStyleProperty(e){return CU(e)}matchesElement(e,t){return!1}containsElement(e,t){return EU(e,t)}getParentElement(e){return hD(e)}query(e,t,i){return DU(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c={},u=o.filter(h=>h instanceof WU);(function eae(n,e){return 0===n||0===e})(i,r)&&u.forEach(h=>{let f=h.currentSnapshot;Object.keys(f).forEach(p=>c[p]=f[p])}),t=function tae(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let s=e[0],o=[];if(i.forEach(a=>{s.hasOwnProperty(a)||o.push(a),s[a]=t[a]}),o.length)for(var r=1;r<e.length;r++){let a=e[r];o.forEach(function(l){a[l]=RU(n,l)})}}return e}(e,t=t.map(h=>Zo(h,!1)),c);const d=function Wae(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=MD(e[0]),e.length>1&&(i=MD(e[e.length-1]))):e&&(t=MD(e)),t||i?new Kae(n,t,i):null}(e,t);return new WU(e,t,l,d)}}let Xae=(()=>{class n extends cU{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:kr.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?dU(t):t;return KU(this._renderer,null,i,"register",[r]),new Zae(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(w(Mh),w(pe))},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})();class Zae extends class uoe{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Jae(this._id,e,t||{},this._renderer)}}class Jae{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return KU(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function KU(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const QU="@.disabled";let ele=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const a=null==o?void 0:o.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new YU("",s,this.engine),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,t,u.name,u)};return i.data.animation.forEach(l),new tle(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(w(Mh),w(U_),w(oe))},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})();class YU{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==QU?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class tle extends YU{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==QU?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function nle(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),o="";return"@"!=s.charAt(0)&&([s,o]=function ile(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let rle=(()=>{class n extends U_{constructor(t,i,r){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(w(pe),w(fD),w(DD))},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})();const wr=new k("AnimationModuleType"),XU=[{provide:cU,useClass:Xae},{provide:DD,useFactory:function sle(){return new Eae}},{provide:U_,useClass:rle},{provide:Mh,useFactory:function ole(n,e,t){return new ele(n,e,t)},deps:[C_,U_,oe]}],ZU=[{provide:fD,useFactory:()=>new Yae},{provide:wr,useValue:"BrowserAnimations"},...XU],ale=[{provide:fD,useClass:IU},{provide:wr,useValue:"NoopAnimations"},...XU];let lle=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?ale:ZU}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({providers:ZU,imports:[sU]}),n})();function ne(...n){return zn(n,Gd(n))}class tn extends H{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const{isArray:cle}=Array,{getPrototypeOf:ule,prototype:dle,keys:hle}=Object;function JU(n){if(1===n.length){const e=n[0];if(cle(e))return{args:e,keys:null};if(function fle(n){return n&&"object"==typeof n&&ule(n)===dle}(e)){const t=hle(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:ple}=Array;function kD(n){return we(e=>function mle(n,e){return ple(e)?n(...e):n(e)}(n,e))}function ej(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function H_(...n){const e=Gd(n),t=G1(n),{args:i,keys:r}=JU(n);if(0===i.length)return zn([],e);const s=new it(function gle(n,e,t=Lo){return i=>{tj(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)tj(e,()=>{const c=zn(n[l],e);let u=!1;c.subscribe(Rt(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>ej(r,o):Lo));return t?s.pipe(kD(t)):s}function tj(n,e,t){n?js(t,n,e):e()}function Gh(n,e){const t=me(n)?n:()=>n,i=r=>r.error(t());return new it(e?r=>e.schedule(i,0,r):i)}const $_=An(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function z_(...n){return function _le(){return qd(1)}()(zn(n,Gd(n)))}function RD(n){return new it(e=>{Ri(n()).subscribe(e)})}function nj(){return Yt((n,e)=>{let t=null;n._refCount++;const i=Rt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class yle extends it{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,k1(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Et;const t=this.getSubject();e.add(this.source.subscribe(Rt(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Et.EMPTY)}return e}refCount(){return nj()(this)}}function dl(n,e){return Yt((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(Rt(i,l=>{null==r||r.unsubscribe();let c=0;const u=s++;Ri(n(l,u)).subscribe(r=Rt(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function li(n){return n<=0?()=>xr:Yt((e,t)=>{let i=0;e.subscribe(Rt(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function gs(...n){const e=Gd(n);return Yt((t,i)=>{(e?z_(n,t,e):z_(n,t)).subscribe(i)})}function vle(n,e,t,i,r){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(Rt(o,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function ij(n,e){return Yt(vle(n,e,arguments.length>=2,!0))}function hn(n,e){return Yt((t,i)=>{let r=0;t.subscribe(Rt(i,s=>n.call(e,s,r++)&&i.next(s)))})}function so(n){return Yt((e,t)=>{let s,i=null,r=!1;i=e.subscribe(Rt(t,void 0,void 0,o=>{s=Ri(n(o,so(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function mu(n,e){return me(e)?yn(n,e,1):yn(n,1)}function PD(n){return n<=0?()=>xr:Yt((e,t)=>{let i=[];e.subscribe(Rt(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function rj(n=ble){return Yt((e,t)=>{let i=!1;e.subscribe(Rt(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function ble(){return new $_}function sj(n){return Yt((e,t)=>{let i=!1;e.subscribe(Rt(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function gu(n,e){const t=arguments.length>=2;return i=>i.pipe(n?hn((r,s)=>n(r,s,i)):Lo,li(1),t?sj(e):rj(()=>new $_))}function kn(n,e,t){const i=me(n)||e||t?{next:n,error:e,complete:t}:n;return i?Yt((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(Rt(s,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),s.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):Lo}function oj(n){return Yt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class oo{constructor(e,t){this.id=e,this.url=t}}class OD extends oo{constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Wh extends oo{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class aj extends oo{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Cle extends oo{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ele extends oo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dle extends oo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ile extends oo{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Sle extends oo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tle extends oo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lj{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class cj{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ale{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xle{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mle{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kle{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uj{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const xe="primary";class Rle{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function _u(n){return new Rle(n)}const dj="ngNavigationCancelingError";function ND(n){const e=Error("NavigationCancelingError: "+n);return e[dj]=!0,e}function Ole(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function _s(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!hj(n[r],e[r]))return!1;return!0}function hj(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function fj(n){return Array.prototype.concat.apply([],n)}function pj(n){return n.length>0?n[n.length-1]:null}function Gn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ys(n){return ZE(n)?n:Dh(n)?zn(Promise.resolve(n)):ne(n)}const Lle={exact:function _j(n,e,t){if(!fl(n.segments,e.segments)||!q_(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!_j(n.children[i],e.children[i],t))return!1;return!0},subset:yj},mj={exact:function Vle(n,e){return _s(n,e)},subset:function Ble(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>hj(n[t],e[t]))},ignored:()=>!0};function gj(n,e,t){return Lle[t.paths](n.root,e.root,t.matrixParams)&&mj[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function yj(n,e,t){return vj(n,e,e.segments,t)}function vj(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!fl(r,t)||e.hasChildren()||!q_(r,t,i))}if(n.segments.length===t.length){if(!fl(n.segments,t)||!q_(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!yj(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(fl(n.segments,r)&&q_(n.segments,r,i)&&n.children[xe])&&vj(n.children[xe],e,s,i)}}function q_(n,e,t){return e.every((i,r)=>mj[t](n[r].parameters,i.parameters))}class hl{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_u(this.queryParams)),this._queryParamMap}toString(){return Hle.serialize(this)}}class Oe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Gn(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return G_(this)}}class Kh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=_u(this.parameters)),this._parameterMap}toString(){return Dj(this)}}function fl(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class bj{}class wj{parse(e){const t=new Xle(e);return new hl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Qh(e.root,!0)}`,i=function qle(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${W_(t)}=${W_(r)}`).join("&"):`${W_(t)}=${W_(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function $le(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Hle=new wj;function G_(n){return n.segments.map(e=>Dj(e)).join("/")}function Qh(n,e){if(!n.hasChildren())return G_(n);if(e){const t=n.children[xe]?Qh(n.children[xe],!1):"",i=[];return Gn(n.children,(r,s)=>{s!==xe&&i.push(`${s}:${Qh(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function jle(n,e){let t=[];return Gn(n.children,(i,r)=>{r===xe&&(t=t.concat(e(i,r)))}),Gn(n.children,(i,r)=>{r!==xe&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===xe?[Qh(n.children[xe],!1)]:[`${r}:${Qh(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[xe]?`${G_(n)}/${t[0]}`:`${G_(n)}/(${t.join("//")})`}}function Cj(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function W_(n){return Cj(n).replace(/%3B/gi,";")}function FD(n){return Cj(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function K_(n){return decodeURIComponent(n)}function Ej(n){return K_(n.replace(/\+/g,"%20"))}function Dj(n){return`${FD(n.path)}${function zle(n){return Object.keys(n).map(e=>`;${FD(e)}=${FD(n[e])}`).join("")}(n.parameters)}`}const Gle=/^[^\/()?;=#]+/;function Q_(n){const e=n.match(Gle);return e?e[0]:""}const Wle=/^[^=?&#]+/,Qle=/^[^&#]+/;class Xle{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Oe([],{}):new Oe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[xe]=new Oe(e,t)),i}parseSegment(){const e=Q_(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Kh(K_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Q_(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Q_(this.remaining);r&&(i=r,this.capture(i))}e[K_(t)]=K_(i)}parseQueryParam(e){const t=function Kle(n){const e=n.match(Wle);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function Yle(n){const e=n.match(Qle);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=Ej(t),s=Ej(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Q_(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=xe);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[xe]:new Oe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Ij{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=LD(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=LD(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=VD(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return VD(e,this._root).map(t=>t.value)}}function LD(n,e){if(n===e.value)return e;for(const t of e.children){const i=LD(n,t);if(i)return i}return null}function VD(n,e){if(n===e.value)return[e];for(const t of e.children){const i=VD(n,t);if(i.length)return i.unshift(e),i}return[]}class ao{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function yu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Sj extends Ij{constructor(e,t){super(e),this.snapshot=t,BD(this,e)}toString(){return this.snapshot.toString()}}function Tj(n,e){const t=function Zle(n,e){const o=new Y_([],{},{},"",{},xe,e,null,n.root,-1,{});return new xj("",new ao(o,[]))}(n,e),i=new tn([new Kh("",{})]),r=new tn({}),s=new tn({}),o=new tn({}),a=new tn(""),l=new vu(i,r,o,a,s,xe,e,t.root);return l.snapshot=t.root,new Sj(new ao(l,[]),t)}class vu{constructor(e,t,i,r,s,o,a,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(we(e=>_u(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(we(e=>_u(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Aj(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Jle(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class Y_{constructor(e,t,i,r,s,o,a,l,c,u,d){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=_u(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_u(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xj extends Ij{constructor(e,t){super(t),this.url=e,BD(this,t)}toString(){return Mj(this._root)}}function BD(n,e){e.value._routerState=n,e.children.forEach(t=>BD(n,t))}function Mj(n){const e=n.children.length>0?` { ${n.children.map(Mj).join(", ")} } `:"";return`${n.value}${e}`}function UD(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,_s(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),_s(e.params,t.params)||n.params.next(t.params),function Nle(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!_s(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),_s(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function jD(n,e){const t=_s(n.params,e.params)&&function Ule(n,e){return fl(n,e)&&n.every((t,i)=>_s(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||jD(n.parent,e.parent))}function Yh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function tce(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Yh(n,i,r);return Yh(n,i)})}(n,e,t);return new ao(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Yh(n,a)),o}}const i=function nce(n){return new vu(new tn(n.url),new tn(n.params),new tn(n.queryParams),new tn(n.fragment),new tn(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>Yh(n,s));return new ao(i,r)}}function X_(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Xh(n){return"object"==typeof n&&null!=n&&n.outlets}function HD(n,e,t,i,r){let s={};if(i&&Gn(i,(a,l)=>{s[l]=Array.isArray(a)?a.map(c=>`${c}`):`${a}`}),n===e)return new hl(t,s,r);const o=kj(n,e,t);return new hl(o,s,r)}function kj(n,e,t){const i={};return Gn(n.children,(r,s)=>{i[s]=r===e?t:kj(r,e,t)}),new Oe(n.segments,i)}class Rj{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&X_(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(Xh);if(r&&r!==pj(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class $D{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function Pj(n,e,t){if(n||(n=new Oe([],{})),0===n.segments.length&&n.hasChildren())return Z_(n,e,t);const i=function lce(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(Xh(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!Nj(l,c,o))return s;i+=2}else{if(!Nj(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new Oe(n.segments.slice(0,i.pathIndex),{});return s.children[xe]=new Oe(n.segments.slice(i.pathIndex),n.children),Z_(s,0,r)}return i.match&&0===r.length?new Oe(n.segments,{}):i.match&&!n.hasChildren()?zD(n,e,t):i.match?Z_(n,0,r):zD(n,e,t)}function Z_(n,e,t){if(0===t.length)return new Oe(n.segments,{});{const i=function ace(n){return Xh(n[0])?n[0].outlets:{[xe]:n}}(t),r={};return Gn(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=Pj(n.children[o],e,s))}),Gn(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new Oe(n.segments,r)}}function zD(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(Xh(s)){const l=cce(s.outlets);return new Oe(i,l)}if(0===r&&X_(t[0])){i.push(new Kh(n.segments[e].path,Oj(t[0]))),r++;continue}const o=Xh(s)?s.outlets[xe]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&X_(a)?(i.push(new Kh(o,Oj(a))),r+=2):(i.push(new Kh(o,{})),r++)}return new Oe(i,{})}function cce(n){const e={};return Gn(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=zD(new Oe([],{}),0,t))}),e}function Oj(n){const e={};return Gn(n,(t,i)=>e[i]=`${t}`),e}function Nj(n,e,t){return n==t.path&&_s(e,t.parameters)}class dce{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),UD(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=yu(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Gn(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=yu(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=yu(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=yu(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new kle(s.value.snapshot))}),e.children.length&&this.forwardEvent(new xle(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(UD(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),UD(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function hce(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=l,o.outlet&&o.outlet.activateWith(r,l),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class qD{constructor(e,t){this.routes=e,this.module=t}}function Jo(n){return"function"==typeof n}function pl(n){return n instanceof hl}const Zh=Symbol("INITIAL_VALUE");function Jh(){return dl(n=>H_(n.map(e=>e.pipe(li(1),gs(Zh)))).pipe(ij((e,t)=>{let i=!1;return t.reduce((r,s,o)=>r!==Zh?r:(s===Zh&&(i=!0),i||!1!==s&&o!==t.length-1&&!pl(s)?r:s),e)},Zh),hn(e=>e!==Zh),we(e=>pl(e)?e:!0===e),li(1)))}class yce{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ef,this.attachRef=null}}class ef{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new yce,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let GD=(()=>{class n{constructor(t,i,r,s,o){this.parentContexts=t,this.location=i,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Le,this.deactivateEvents=new Le,this.attachEvents=new Le,this.detachEvents=new Le,this.name=s||xe,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new vce(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(y(ef),y(Ni),y(rl),Gs("name"),y(Ei))},n.\u0275dir=L({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class vce{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===vu?this.route:e===ef?this.childContexts:this.parent.get(e,t)}}let Fj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Qe({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&et(0,"router-outlet")},directives:[GD],encapsulation:2}),n})();function Lj(n,e=""){for(let t=0;t<n.length;t++){const i=n[t];bce(i,wce(e,i))}}function bce(n,e){n.children&&Lj(n.children,e)}function wce(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function WD(n){const e=n.children&&n.children.map(WD),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xe&&(t.component=Fj),t}function Cr(n){return n.outlet||xe}function Vj(n,e){const t=n.filter(i=>Cr(i)===e);return t.push(...n.filter(i=>Cr(i)!==e)),t}const Bj={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function J_(n,e,t){var i;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Bj):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Ole)(t,n,e);if(!s)return Object.assign({},Bj);const o={};Gn(s.posParams,(l,c)=>{o[c]=l.path});const a=s.consumed.length>0?Object.assign(Object.assign({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:a,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function ey(n,e,t,i,r="corrected"){if(t.length>0&&function Dce(n,e,t){return t.some(i=>ty(n,e,i)&&Cr(i)!==xe)}(n,t,i)){const o=new Oe(e,function Ece(n,e,t,i){const r={};r[xe]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Cr(s)!==xe){const o=new Oe([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[Cr(s)]=o}return r}(n,e,i,new Oe(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function Ice(n,e,t){return t.some(i=>ty(n,e,i))}(n,t,i)){const o=new Oe(n.segments,function Cce(n,e,t,i,r,s){const o={};for(const a of i)if(ty(n,t,a)&&!r[Cr(a)]){const l=new Oe([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[Cr(a)]=l}return Object.assign(Object.assign({},r),o)}(n,e,t,i,n.children,r));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new Oe(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function ty(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Uj(n,e,t,i){return!!(Cr(n)===i||i!==xe&&ty(e,t,n))&&("**"===n.path||J_(e,n,t).matched)}function jj(n,e,t){return 0===e.length&&!n.children[t]}class ny{constructor(e){this.segmentGroup=e||null}}class Hj{constructor(e){this.urlTree=e}}function tf(n){return Gh(new ny(n))}function $j(n){return Gh(new Hj(n))}class xce{constructor(e,t,i,r,s){this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(Xs)}apply(){const e=ey(this.urlTree.root,[],[],this.config).segmentGroup,t=new Oe(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,xe).pipe(we(s=>this.createUrlTree(KD(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(so(s=>{if(s instanceof Hj)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof ny?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,xe).pipe(we(r=>this.createUrlTree(KD(r),e.queryParams,e.fragment))).pipe(so(r=>{throw r instanceof ny?this.noMatchError(r):r}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const r=e.segments.length>0?new Oe([],{[xe]:e}):e;return new hl(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(we(s=>new Oe([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return zn(r).pipe(mu(s=>{const o=i.children[s],a=Vj(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(we(l=>({segment:l,outlet:s})))}),ij((s,o)=>(s[o.outlet]=o.segment,s),{}),function wle(n,e){const t=arguments.length>=2;return i=>i.pipe(n?hn((r,s)=>n(r,s,i)):Lo,PD(1),t?sj(e):rj(()=>new $_))}())}expandSegment(e,t,i,r,s,o){return zn(i).pipe(mu(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(so(c=>{if(c instanceof ny)return ne(null);throw c}))),gu(a=>!!a),so((a,l)=>{if(a instanceof $_||"EmptyError"===a.name)return jj(t,r,s)?ne(new Oe([],{})):tf(t);throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return Uj(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):tf(t):tf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?$j(s):this.lineralizeSegments(i,s).pipe(yn(o=>{const a=new Oe(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=J_(t,r,s);if(!a)return tf(t);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?$j(d):this.lineralizeSegments(r,d).pipe(yn(h=>this.expandSegment(e,t,i,h.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?ne(i._loadedConfig):this.configLoader.load(e.injector,i)).pipe(we(d=>(i._loadedConfig=d,new Oe(r,{})))):ne(new Oe(r,{}));const{matched:o,consumedSegments:a,remainingSegments:l}=J_(t,i,r);return o?this.getChildConfig(e,i,r).pipe(yn(u=>{const d=u.module,h=u.routes,{segmentGroup:f,slicedSegments:p}=ey(t,a,l,h),m=new Oe(f.segments,f.children);if(0===p.length&&m.hasChildren())return this.expandChildren(d,h,m).pipe(we(E=>new Oe(a,E)));if(0===h.length&&0===p.length)return ne(new Oe(a,{}));const g=Cr(i)===s;return this.expandSegment(d,m,h,p,g?xe:s,!0).pipe(we(v=>new Oe(a.concat(v.segments),v.children)))})):tf(t)}getChildConfig(e,t,i){return t.children?ne(new qD(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ne(t._loadedConfig):this.runCanLoadGuards(e.injector,t,i).pipe(yn(r=>r?this.configLoader.load(e.injector,t).pipe(we(s=>(t._loadedConfig=s,s))):function Tce(n){return Gh(ND(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):ne(new qD([],e))}runCanLoadGuards(e,t,i){const r=t.canLoad;return r&&0!==r.length?ne(r.map(o=>{const a=e.get(o);let l;if(function pce(n){return n&&Jo(n.canLoad)}(a))l=a.canLoad(t,i);else{if(!Jo(a))throw new Error("Invalid CanLoad guard");l=a(t,i)}return ys(l)})).pipe(Jh(),kn(o=>{if(!pl(o))return;const a=ND(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),we(o=>!0===o)):ne(!0)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return ne(i);if(r.numberOfChildren>1||!r.children[xe])return Gh(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));r=r.children[xe]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new hl(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Gn(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Gn(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,i,r)}),new Oe(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}function KD(n){const e={};for(const i of Object.keys(n.children)){const s=KD(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function Mce(n){if(1===n.numberOfChildren&&n.children[xe]){const e=n.children[xe];return new Oe(n.segments.concat(e.segments),e.children)}return n}(new Oe(n.segments,e))}class zj{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class iy{constructor(e,t){this.component=e,this.route=t}}function Rce(n,e,t){const i=n._root;return nf(i,e?e._root:null,t,[i.value])}function ry(n,e,t){const i=function Oce(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:t).get(n)}function nf(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=yu(e);return n.children.forEach(o=>{(function Nce(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function Fce(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!fl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!fl(n.url,e.url)||!_s(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jD(n,e)||!_s(n.queryParams,e.queryParams);default:return!jD(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new zj(i)):(s.data=o.data,s._resolvedData=o._resolvedData),nf(n,e,s.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new iy(a.outlet.component,o))}else o&&rf(e,a,r),r.canActivateChecks.push(new zj(i)),nf(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Gn(s,(o,a)=>rf(o,t.getContext(a),r)),r}function rf(n,e,t){const i=yu(n),r=n.value;Gn(i,(s,o)=>{rf(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new iy(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class qce{}function qj(n){return new it(e=>e.error(n))}class Wce{constructor(e,t,i,r,s,o){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=ey(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,xe);if(null===t)return null;const i=new Y_([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},xe,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new ao(i,t),s=new xj(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,i=Aj(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const s of Object.keys(t.children)){const o=t.children[s],a=Vj(e,s),l=this.processSegmentGroup(a,o,s);if(null===l)return null;i.push(...l)}const r=Gj(i);return function Kce(n){n.sort((e,t)=>e.value.outlet===xe?-1:t.value.outlet===xe?1:e.value.outlet.localeCompare(t.value.outlet))}(r),r}processSegment(e,t,i,r){for(const s of e){const o=this.processSegmentAgainstRoute(s,t,i,r);if(null!==o)return o}return jj(t,i,r)?[]:null}processSegmentAgainstRoute(e,t,i,r){if(e.redirectTo||!Uj(e,t,i,r))return null;let s,o=[],a=[];if("**"===e.path){const f=i.length>0?pj(i).parameters:{};s=new Y_(i,f,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Qj(e),Cr(e),e.component,e,Wj(t),Kj(t)+i.length,Yj(e))}else{const f=J_(t,e,i);if(!f.matched)return null;o=f.consumedSegments,a=f.remainingSegments,s=new Y_(o,f.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Qj(e),Cr(e),e.component,e,Wj(t),Kj(t)+o.length,Yj(e))}const l=function Qce(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:u}=ey(t,o,a,l.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const f=this.processChildren(l,c);return null===f?null:[new ao(s,f)]}if(0===l.length&&0===u.length)return[new ao(s,[])];const d=Cr(e)===r,h=this.processSegment(l,c,u,d?xe:r);return null===h?null:[new ao(s,h)]}}function Yce(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Gj(n){const e=[],t=new Set;for(const i of n){if(!Yce(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=Gj(i.children);e.push(new ao(i.value,r))}return e.filter(i=>!t.has(i))}function Wj(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Kj(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Qj(n){return n.data||{}}function Yj(n){return n.resolve||{}}function Xj(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function QD(n){return dl(e=>{const t=n(e);return t?zn(t).pipe(we(()=>e)):ne(e)})}class rue extends class iue{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const YD=new k("ROUTES");class Zj{constructor(e,t,i,r){this.injector=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const r=this.loadModuleFactory(t.loadChildren).pipe(we(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=s.create(e);return new qD(fj(o.injector.get(YD,void 0,le.Self|le.Optional)).map(WD),o)}),so(s=>{throw t._loader$=void 0,s}));return t._loader$=new yle(r,()=>new H).pipe(nj()),t._loader$}loadModuleFactory(e){return ys(e()).pipe(yn(t=>t instanceof bV?ne(t):zn(this.compiler.compileModuleAsync(t))))}}class oue{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function aue(n){throw n}function lue(n,e,t){return e.parse("/")}function Jj(n,e){return ne(null)}const cue={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},uue={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Wn=(()=>{class n{constructor(t,i,r,s,o,a,l){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new H,this.errorHandler=aue,this.malformedUriErrorHandler=lue,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Jj,afterPreactivation:Jj},this.urlHandlingStrategy=new oue,this.routeReuseStrategy=new rue,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(Xs),this.console=o.get(rB);const d=o.get(oe);this.isNgZoneEnabled=d instanceof oe&&oe.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function Fle(){return new hl(new Oe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Zj(o,a,h=>this.triggerEvent(new lj(h)),h=>this.triggerEvent(new cj(h))),this.routerState=Tj(this.currentUrlTree,this.rootComponentType),this.transitions=new tn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(hn(r=>0!==r.id),we(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),dl(r=>{let s=!1,o=!1;return ne(r).pipe(kn(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),dl(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return eH(a.source)&&(this.browserUrlTree=a.extractedUrl),ne(a).pipe(dl(d=>{const h=this.transitions.getValue();return i.next(new OD(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?xr:Promise.resolve(d)}),function kce(n,e,t,i){return dl(r=>function Ace(n,e,t,i,r){return new xce(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(we(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),kn(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function Xce(n,e,t,i,r){return yn(s=>function Gce(n,e,t,i,r="emptyOnly",s="legacy"){try{const o=new Wce(n,e,t,i,r,s).recognize();return null===o?qj(new qce):ne(o)}catch(o){return qj(o)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),i,r).pipe(we(o=>Object.assign(Object.assign({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),kn(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new Ele(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);i.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:p,restoredState:m,extras:g}=a,b=new OD(h,this.serializeUrl(f),p,m);i.next(b);const v=Tj(f,this.rootComponentType).snapshot;return ne(Object.assign(Object.assign({},a),{targetSnapshot:v,urlAfterRedirects:f,extras:Object.assign(Object.assign({},g),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),xr}),QD(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),kn(a=>{const l=new Dle(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),we(a=>Object.assign(Object.assign({},a),{guards:Rce(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function Lce(n,e){return yn(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?ne(Object.assign(Object.assign({},t),{guardsResult:!0})):function Vce(n,e,t,i){return zn(n).pipe(yn(r=>function zce(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ne(s.map(a=>{const l=ry(a,e,r);let c;if(function _ce(n){return n&&Jo(n.canDeactivate)}(l))c=ys(l.canDeactivate(n,e,t,i));else{if(!Jo(l))throw new Error("Invalid CanDeactivate guard");c=ys(l(n,e,t,i))}return c.pipe(gu())})).pipe(Jh()):ne(!0)}(r.component,r.route,t,e,i)),gu(r=>!0!==r,!0))}(o,i,r,n).pipe(yn(a=>a&&function fce(n){return"boolean"==typeof n}(a)?function Bce(n,e,t,i){return zn(e).pipe(mu(r=>z_(function jce(n,e){return null!==n&&e&&e(new Ale(n)),ne(!0)}(r.route.parent,i),function Uce(n,e){return null!==n&&e&&e(new Mle(n)),ne(!0)}(r.route,i),function $ce(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function Pce(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>RD(()=>ne(o.guards.map(l=>{const c=ry(l,o.node,t);let u;if(function gce(n){return n&&Jo(n.canActivateChild)}(c))u=ys(c.canActivateChild(i,n));else{if(!Jo(c))throw new Error("Invalid CanActivateChild guard");u=ys(c(i,n))}return u.pipe(gu())})).pipe(Jh())));return ne(s).pipe(Jh())}(n,r.path,t),function Hce(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return ne(!0);const r=i.map(s=>RD(()=>{const o=ry(s,e,t);let a;if(function mce(n){return n&&Jo(n.canActivate)}(o))a=ys(o.canActivate(e,n));else{if(!Jo(o))throw new Error("Invalid CanActivate guard");a=ys(o(e,n))}return a.pipe(gu())}));return ne(r).pipe(Jh())}(n,r.route,t))),gu(r=>!0!==r,!0))}(i,s,n,e):ne(a)),we(a=>Object.assign(Object.assign({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),kn(a=>{if(pl(a.guardsResult)){const c=ND(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const l=new Ile(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),hn(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),QD(a=>{if(a.guards.canActivateChecks.length)return ne(a).pipe(kn(l=>{const c=new Sle(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),dl(l=>{let c=!1;return ne(l).pipe(function Zce(n,e){return yn(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return ne(t);let s=0;return zn(r).pipe(mu(o=>function Jce(n,e,t,i){return function eue(n,e,t,i){const r=Xj(n);if(0===r.length)return ne({});const s={};return zn(r).pipe(yn(o=>function tue(n,e,t,i){const r=ry(n,e,i);return ys(r.resolve?r.resolve(e,t):r(e,t))}(n[o],e,t,i).pipe(kn(a=>{s[o]=a}))),PD(1),yn(()=>Xj(s).length===r.length?ne(s):xr))}(n._resolve,n,e,i).pipe(we(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),Aj(n,t).resolve),null)))}(o.route,i,n,e)),kn(()=>s++),PD(1),yn(o=>s===r.length?ne(t):xr))})}(this.paramsInheritanceStrategy,this.ngModule.injector),kn({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),kn(l=>{const c=new Tle(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),QD(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),we(a=>{const l=function ece(n,e,t){const i=Yh(n,e._root,t?t._root:void 0);return new Sj(i,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),kn(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>we(i=>(new dce(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),kn({next(){s=!0},complete(){s=!0}}),oj(()=>{var a;s||o||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===r.id&&(this.currentNavigation=null)}),so(a=>{if(o=!0,function Ple(n){return n&&n[dj]}(a)){const l=pl(a.url);l||(this.navigated=!0,this.restoreHistory(r,!0));const c=new aj(r.id,this.serializeUrl(r.extractedUrl),a.message);i.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||eH(r.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new Cle(r.id,this.serializeUrl(r.extractedUrl),a);i.next(l);try{r.resolve(this.errorHandler(a))}catch(c){r.reject(c)}}return xr}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const s={replaceUrl:!0},o=(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t.url);this.scheduleNavigation(a,i,o,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Lj(t),this.config=t.map(WD),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),function ice(n,e,t,i,r){if(0===t.length)return HD(e.root,e.root,e.root,i,r);const s=function rce(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Rj(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Gn(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new Rj(t,e,i)}(t);if(s.toRoot())return HD(e.root,e.root,new Oe([],{}),i,r);const o=function sce(n,e,t){if(n.isAbsolute)return new $D(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new $D(s,s===e.root,0)}const i=X_(n.commands[0])?0:1;return function oce(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new $D(i,!1,r-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,e,n),a=o.processChildren?Z_(o.segmentGroup,o.index,s.commands):Pj(o.segmentGroup,o.index,s.commands);return HD(e.root,o.segmentGroup,a,i,r)}(c,this.currentUrlTree,t,d,null!=u?u:null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=pl(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function due(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?Object.assign({},cue):!1===i?Object.assign({},uue):i,pl(t))return gj(this.currentUrlTree,t,r);const s=this.parseUrl(t);return gj(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Wh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,o){var a,l;if(this.disposed)return Promise.resolve(!1);let c,u,d;o?(c=o.resolve,u=o.reject,d=o.promise):d=new Promise((p,m)=>{c=p,u=m});const h=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),f=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(l=this.browserPageId)&&void 0!==l?l:0)+1):f=0,this.setTransition({id:h,targetPageId:f,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:c,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===o?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const r=new aj(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(r),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){wh()},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})();function eH(n){return"imperative"!==n}class tH{}class nH{preload(e,t){return ne(null)}}let iH=(()=>{class n{constructor(t,i,r,s){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=new Zj(r,i,l=>t.triggerEvent(new lj(l)),l=>t.triggerEvent(new cj(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(hn(t=>t instanceof Wh),mu(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Xs);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(t,s)):s.children&&r.push(this.processRoutes(t,s.children));return zn(r).pipe(qd(),we(s=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?ne(i._loadedConfig):this.loader.load(t.injector,i)).pipe(yn(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(w(Wn),w(sB),w(Je),w(tH))},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})(),JD=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof OD?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Wh&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof uj&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new uj(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){wh()},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})();const ml=new k("ROUTER_CONFIGURATION"),rH=new k("ROUTER_FORROOT_GUARD"),mue=[Lh,{provide:bj,useClass:wj},{provide:Wn,useFactory:function wue(n,e,t,i,r,s,o={},a,l){const c=new Wn(null,n,e,t,i,r,fj(s));return a&&(c.urlHandlingStrategy=a),l&&(c.routeReuseStrategy=l),function Cue(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(u=>{var d,h;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(h=console.groupEnd)||void 0===h||h.call(console)}),c},deps:[bj,ef,Lh,Je,sB,YD,ml,[class sue{},new Ze],[class nue{},new Ze]]},ef,{provide:vu,useFactory:function Eue(n){return n.routerState.root},deps:[Wn]},iH,nH,class pue{preload(e,t){return t().pipe(so(()=>ne(null)))}},{provide:ml,useValue:{enableTracing:!1}}];function gue(){return new uB("Router",Wn)}let _ue=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[mue,sH(t),{provide:rH,useFactory:bue,deps:[[Wn,new Ze,new Nc]]},{provide:ml,useValue:i||{}},{provide:uu,useFactory:vue,deps:[ol,[new Dg(B0),new Ze],ml]},{provide:JD,useFactory:yue,deps:[Wn,Sse,ml]},{provide:tH,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:nH},{provide:uB,multi:!0,useFactory:gue},[eI,{provide:I0,multi:!0,useFactory:Due,deps:[eI]},{provide:oH,useFactory:Iue,deps:[eI]},{provide:iB,multi:!0,useExisting:oH}]]}}static forChild(t){return{ngModule:n,providers:[sH(t)]}}}return n.\u0275fac=function(t){return new(t||n)(w(rH,8),w(Wn,8))},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({}),n})();function yue(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new JD(n,e,t)}function vue(n,e,t={}){return t.useHash?new ure(n,e):new MB(n,e)}function bue(n){return"guarded"}function sH(n){return[{provide:ZY,multi:!0,useValue:n},{provide:YD,multi:!0,useValue:n}]}let eI=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new H}appInitializer(){return this.injector.get(are,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(a=>i=a),s=this.injector.get(Wn),o=this.injector.get(ml);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?ne(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(t){const i=this.injector.get(ml),r=this.injector.get(iH),s=this.injector.get(JD),o=this.injector.get(Wn),a=this.injector.get(i_);t===a.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&o.initialNavigation(),r.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(w(Je))},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})();function Due(n){return n.appInitializer.bind(n)}function Iue(n){return n.bootstrapListener.bind(n)}const oH=new k("Router Initializer");function aH(...n){const e=G1(n),{args:t,keys:i}=JU(n),r=new it(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;Ri(t[u]).subscribe(Rt(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(i?ej(i,a):a),s.complete())}))}});return e?r.pipe(kD(e)):r}let lH=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(y(Ys),y(je))},n.\u0275dir=L({type:n}),n})(),gl=(()=>{class n extends lH{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mn(n)))(i||n)}}(),n.\u0275dir=L({type:n,features:[se]}),n})();const Gr=new k("NgValueAccessor"),Aue={provide:Gr,useExisting:at(()=>_l),multi:!0},Mue=new k("CompositionEventMode");let _l=(()=>{class n extends lH{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function xue(){const n=ps()?ps().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(y(Ys),y(je),y(Mue,8))},n.\u0275dir=L({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&J("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[ze([Aue]),se]}),n})();function ea(n){return null==n||0===n.length}function uH(n){return null!=n&&"number"==typeof n.length}const ci=new k("NgValidators"),ta=new k("NgAsyncValidators"),kue=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class yl{static min(e){return function dH(n){return e=>{if(ea(e.value)||ea(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function hH(n){return e=>{if(ea(e.value)||ea(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function fH(n){return ea(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function pH(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function mH(n){return ea(n.value)||kue.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function gH(n){return e=>ea(e.value)||!uH(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function _H(n){return e=>uH(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function yH(n){if(!n)return sy;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(ea(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return DH(e)}static composeAsync(e){return IH(e)}}function sy(n){return null}function vH(n){return null!=n}function bH(n){const e=Dh(n)?zn(n):n;return ZE(e),e}function wH(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function CH(n,e){return e.map(t=>t(n))}function EH(n){return n.map(e=>function Rue(n){return!n.validate}(e)?e:t=>e.validate(t))}function DH(n){if(!n)return null;const e=n.filter(vH);return 0==e.length?null:function(t){return wH(CH(t,e))}}function tI(n){return null!=n?DH(EH(n)):null}function IH(n){if(!n)return null;const e=n.filter(vH);return 0==e.length?null:function(t){return aH(CH(t,e).map(bH)).pipe(we(wH))}}function nI(n){return null!=n?IH(EH(n)):null}function SH(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function TH(n){return n._rawValidators}function AH(n){return n._rawAsyncValidators}function iI(n){return n?Array.isArray(n)?n:[n]:[]}function oy(n,e){return Array.isArray(n)?n.includes(e):n===e}function xH(n,e){const t=iI(e);return iI(n).forEach(r=>{oy(t,r)||t.push(r)}),t}function MH(n,e){return iI(e).filter(t=>!oy(n,t))}class kH{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=tI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=nI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class lo extends kH{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Di extends kH{get formDirective(){return null}get path(){return null}}let sf=(()=>{class n extends class RH{constructor(e){this._cd=e}is(e){var t,i,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(y(lo,2))},n.\u0275dir=L({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&Ht("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[se]}),n})();function af(n,e){oI(n,e),e.valueAccessor.writeValue(n.value),function jue(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&OH(n,e)})}(n,e),function $ue(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Hue(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&OH(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Uue(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function cy(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),dy(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function uy(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function oI(n,e){const t=TH(n);null!==e.validator?n.setValidators(SH(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=AH(n);null!==e.asyncValidator?n.setAsyncValidators(SH(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();uy(e._rawValidators,r),uy(e._rawAsyncValidators,r)}function dy(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=TH(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=AH(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return uy(e._rawValidators,i),uy(e._rawAsyncValidators,i),t}function OH(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function NH(n,e){oI(n,e)}function aI(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function LH(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function lI(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===_l?t=s:function Gue(n){return Object.getPrototypeOf(n.constructor)===gl}(s)?i=s:r=s}),r||i||t||null}function cI(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const lf="VALID",hy="INVALID",wu="PENDING",cf="DISABLED";function dI(n){return(fy(n)?n.validators:n)||null}function VH(n){return Array.isArray(n)?tI(n):n||null}function hI(n,e){return(fy(e)?e.asyncValidators:n)||null}function BH(n){return Array.isArray(n)?nI(n):n||null}function fy(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const UH=n=>n instanceof Cu,fI=n=>n instanceof mI;function jH(n){return UH(n)?n.value:n.getRawValue()}function HH(n,e){const t=fI(n),i=n.controls;if(!(t?Object.keys(i):i).length)throw new q(1e3,"");if(!i[e])throw new q(1001,"")}function $H(n,e){fI(n),n._forEachChild((i,r)=>{if(void 0===e[r])throw new q(1002,"")})}class pI{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=VH(this._rawValidators),this._composedAsyncValidatorFn=BH(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===lf}get invalid(){return this.status===hy}get pending(){return this.status==wu}get disabled(){return this.status===cf}get enabled(){return this.status!==cf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=VH(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=BH(e)}addValidators(e){this.setValidators(xH(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(xH(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(MH(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(MH(e,this._rawAsyncValidators))}hasValidator(e){return oy(this._rawValidators,e)}hasAsyncValidator(e){return oy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=wu,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=cf,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=lf,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===lf||this.status===wu)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?cf:lf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=wu,this._hasOwnPendingAsyncValidator=!0;const t=bH(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function Wue(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let i=n;return e.forEach(r=>{i=fI(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(n=>n instanceof Que)(i)&&i.at(r)||null}),i}(this,e,".")}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Le,this.statusChanges=new Le}_calculateStatus(){return this._allControlsDisabled()?cf:this.errors?hy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wu)?wu:this._anyControlsHaveStatus(hy)?hy:lf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){fy(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Cu extends pI{constructor(e=null,t,i){super(dI(t),hI(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),fy(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){cI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){cI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class mI extends pI{constructor(e,t,i){super(dI(t),hI(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){$H(this,e),Object.keys(e).forEach(i=>{HH(this,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=jH(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const i=this.controls[t];if(this.contains(t)&&e(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,i)=>((t.enabled||this.disabled)&&(e[i]=t.value),e))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Que extends pI{constructor(e,t,i){super(dI(t),hI(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){$H(this,e),e.forEach((i,r)=>{HH(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>jH(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Yue={provide:Di,useExisting:at(()=>py)},uf=(()=>Promise.resolve(null))();let py=(()=>{class n extends Di{constructor(t,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new Le,this.form=new mI({},tI(t),nI(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){uf.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),af(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){uf.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){uf.then(()=>{const i=this._findContainer(t.path),r=new mI({});NH(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){uf.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){uf.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,LH(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(y(ci,10),y(ta,10))},n.\u0275dir=L({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&J("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ze([Yue]),se]}),n})();const Zue={provide:lo,useExisting:at(()=>df)},GH=(()=>Promise.resolve(null))();let df=(()=>{class n extends lo{constructor(t,i,r,s,o){super(),this._changeDetectorRef=o,this.control=new Cu,this._registered=!1,this.update=new Le,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=lI(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),aI(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){af(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){GH.then(()=>{var i;this.control.setValue(t,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=""===i||i&&"false"!==i;GH.then(()=>{var s;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_getPath(t){return this._parent?function ly(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(y(Di,9),y(ci,10),y(ta,10),y(Gr,10),y(Ei,8))},n.\u0275dir=L({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ze([Zue]),se,qn]}),n})(),KH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({}),n})();const gI=new k("NgModelWithFormControlWarning"),rde={provide:lo,useExisting:at(()=>my)};let my=(()=>{class n extends lo{constructor(t,i,r,s){super(),this._ngModelWarningConfig=s,this.update=new Le,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(i),this.valueAccessor=lI(0,r)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const i=t.form.previousValue;i&&cy(i,this,!1),af(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}aI(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&cy(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(y(ci,10),y(ta,10),y(Gr,10),y(gI,8))},n.\u0275dir=L({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[ze([rde]),se,qn]}),n})();const sde={provide:Di,useExisting:at(()=>gy)};let gy=(()=>{class n extends Di{constructor(t,i){super(),this.validators=t,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Le,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(dy(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return af(i,t),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){cy(t.control||null,t,!1),cI(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,LH(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(cy(i||null,t),UH(r)&&(af(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);NH(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function zue(n,e){return dy(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){oI(this.form,this),this._oldForm&&dy(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(y(ci,10),y(ta,10))},n.\u0275dir=L({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&J("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ze([sde]),se,qn]}),n})(),u$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({imports:[[KH]]}),n})(),Dde=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({imports:[u$]}),n})(),Ide=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:gI,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({imports:[u$]}),n})(),Sde=(()=>{class n{constructor(){this.title="chatapp"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Qe({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){1&t&&et(0,"router-outlet")},directives:[GD],styles:[""]}),n})();const d$_firebase={projectId:"chatapp-5597b",appId:"1:520036062373:web:05d803ec67d1937aa6a94c",databaseURL:"https://chatapp-5597b-default-rtdb.firebaseio.com",storageBucket:"chatapp-5597b.appspot.com",apiKey:"AIzaSyBAMetAOwZHLbU_89R8vLkWi54tVJHKDl8",authDomain:"chatapp-5597b.firebaseapp.com",messagingSenderId:"520036062373",measurementId:"G-15T03DEZQR"};function h$(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function _(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){h$(s,i,r,o,a,"next",l)}function a(l){h$(s,i,r,o,a,"throw",l)}o(void 0)})}}const R=function(n,e){if(!n)throw Eu(e)},Eu=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},f$=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=63&r|128):55296==(64512&r)&&i+1<n.length&&56320==(64512&n.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&n.charCodeAt(++i)),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=63&r|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=63&r|128)}return e},_y={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const s=n[r],o=r+1<n.length,a=o?n[r+1]:0,l=r+2<n.length,c=l?n[r+2]:0;let h=(15&a)<<2|c>>6,f=63&c;l||(f=64,o||(h=64)),i.push(t[s>>2],t[(3&s)<<4|a>>4],t[h],t[f])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(f$(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=n[t++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const l=((7&r)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(1023&l))}else{const s=n[t++],o=n[t++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;const c=r<n.length?t[n.charAt(r)]:64;++r;const d=r<n.length?t[n.charAt(r)]:64;if(++r,null==s||null==a||null==c||null==d)throw new Ade;i.push(s<<2|a>>4),64!==c&&(i.push(a<<4&240|c>>2),64!==d&&i.push(c<<6&192|d))}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Ade extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const p$=function(n){const e=f$(n);return _y.encodeByteArray(e,!0)},yy=function(n){return p$(n).replace(/\./g,"")},vy=function(n){try{return _y.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function xde(n){return m$(void 0,n)}function m$(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Mde(t)||(n[t]=m$(n[t],e[t]));return n}function Mde(n){return"__proto__"!==n}const by=()=>{try{return function kde(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if("undefined"==typeof document)return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=n&&vy(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},g$=n=>{var e,t;return null===(t=null===(e=by())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},EI=n=>{const e=g$(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),i]:[e.substring(0,t),i]},_$=()=>{var n;return null===(n=by())||void 0===n?void 0:n.config},y$=n=>{var e;return null===(e=by())||void 0===e?void 0:e[`_${n}`]};class Er{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,i))}}}function DI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[yy(JSON.stringify({alg:"none",type:"JWT"})),yy(JSON.stringify(o)),""].join(".")}function Rn(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function II(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rn())}function SI(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function b$(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function bl(){try{return"object"==typeof indexedDB}catch(n){return!1}}function hf(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e((null===(s=r.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}function TI(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class er extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vs.prototype.create)}}class vs{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?function Lde(n,e){return n.replace(Vde,(t,i)=>{const r=e[i];return null!=r?String(r):`<${i}?>`})}(s,i):"Error";return new er(r,`${this.serviceName}: ${o} (${r}).`,i)}}const Vde=/\{\$([^}]+)}/g;function ff(n){return JSON.parse(n)}function Dn(n){return JSON.stringify(n)}const wy=function(n){let e={},t={},i={},r="";try{const s=n.split(".");e=ff(vy(s[0])||""),t=ff(vy(s[1])||""),r=s[2],i=t.d||{},delete t.d}catch(s){}return{header:e,claims:t,data:i,signature:r}};function bs(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Du(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Cy(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ey(n,e,t){const i={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=e.call(t,n[r],r,n));return i}function Dy(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const s=n[r],o=e[r];if(w$(s)&&w$(o)){if(!Dy(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function w$(n){return null!==n&&"object"==typeof n}function pf(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function mf(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function gf(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class jde{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)i[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)i[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const h=i[d-3]^i[d-8]^i[d-14]^i[d-16];i[d]=4294967295&(h<<1|h>>>31)}let c,u,r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):d<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const h=(r<<5|r>>>27)+c+l+u+i[d]&4294967295;l=a,a=o,o=4294967295&(s<<30|s>>>2),s=r,r=h}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const i=t-this.blockSize;let r=0;const s=this.buf_;let o=this.inbuf_;for(;r<t;){if(0===o)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(s[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<t;)if(s[o]=e[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}}class $de{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(void 0===e&&void 0===t&&void 0===i)throw new Error("Missing Observer.");r=function zde(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:i},void 0===r.next&&(r.next=AI),void 0===r.error&&(r.error=AI),void 0===r.complete&&(r.complete=AI);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(o){}}),this.observers.push(r),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(i){"undefined"!=typeof console&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AI(){}function ws(n,e){return`${n} failed: ${e} argument `}const Iy=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};function xI(n,e=1e3,t=2){const i=e*Math.pow(t,n),r=Math.round(.5*i*(Math.random()-.5)*2);return Math.min(144e5,i+r)}function Re(n){return n&&n._delegate?n._delegate:n}class Pn{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const wl="[DEFAULT]";class Xde{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Er;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch(r){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function Jde(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:wl})}catch(t){}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch(s){}}}}clearInstance(e=wl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return _(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=wl){return this.instances.has(e)}getOptions(e=wl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[s,o]of this.instancesDeferred.entries())i===this.normalizeInstanceIdentifier(s)&&o.resolve(r);return r}onInit(e,t){var i;const r=this.normalizeInstanceIdentifier(t),s=null!==(i=this.onInitCallbacks.get(r))&&void 0!==i?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch(s){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===wl?void 0:n),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch(r){}var n;return i||null}normalizeInstanceIdentifier(e=wl){return this.component?this.component.multipleInstances?e:wl:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ehe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Xde(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const MI=[];var Ne=(()=>{return(n=Ne||(Ne={}))[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",Ne;var n})();const C$={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},the=Ne.INFO,nhe={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},ihe=(n,e,...t)=>{if(e<n.logLevel)return;const i=(new Date).toISOString(),r=nhe[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${n.name}:`,...t)};class Cl{constructor(e){this.name=e,this._logLevel=the,this._logHandler=ihe,this._userLogHandler=null,MI.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?C$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}let E$,D$;const I$=new WeakMap,kI=new WeakMap,S$=new WeakMap,RI=new WeakMap,PI=new WeakMap;let OI={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return kI.get(n);if("objectStoreNames"===e)return n.objectStoreNames||S$.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return na(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function dhe(n){return"function"==typeof n?function uhe(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ohe(){return D$||(D$=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(NI(this),e),na(I$.get(this))}:function(...e){return na(n.apply(NI(this),e))}:function(e,...t){const i=n.call(NI(this),e,...t);return S$.set(i,e.sort?e.sort():[e]),na(i)}}(n):(n instanceof IDBTransaction&&function lhe(n){if(kI.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});kI.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,function she(){return E$||(E$=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,OI):n)}function na(n){if(n instanceof IDBRequest)return function ahe(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(na(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&I$.set(t,n)}).catch(()=>{}),PI.set(e,n),e}(n);if(RI.has(n))return RI.get(n);const e=dhe(n);return e!==n&&(RI.set(n,e),PI.set(e,n)),e}const NI=n=>PI.get(n),fhe=["get","getKey","getAll","getAllKeys","count"],phe=["put","add","delete","clear"],FI=new Map;function T$(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(FI.get(e))return FI.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=phe.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!fhe.includes(t))return;const s=function(){var o=_(function*(a,...l){const c=this.transaction(a,r?"readwrite":"readonly");let u=c.store;return i&&(u=u.index(l.shift())),(yield Promise.all([u[t](...l),r&&c.done]))[0]});return function(l){return o.apply(this,arguments)}}();return FI.set(e,s),s}!function che(n){OI=n(OI)}(n=>Qw(Kw({},n),{get:(e,t,i)=>T$(e,t)||n.get(e,t,i),has:(e,t)=>!!T$(e,t)||n.has(e,t)}));class mhe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function ghe(n){const e=n.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}return null}).filter(t=>t).join(" ")}}const LI="@firebase/app",El=new Cl("@firebase/app"),Sy="[DEFAULT]",Hhe={[LI]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Dl=new Map,Ty=new Map;function $he(n,e){try{n.container.addComponent(e)}catch(t){El.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Kn(n){const e=n.name;if(Ty.has(e))return El.debug(`There were multiple attempts to register component ${e}.`),!1;Ty.set(e,n);for(const t of Dl.values())$he(t,n);return!0}function ia(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const uo=new vs("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class qhe{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Pn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw uo.create("app-deleted",{appName:this._name})}}const ho="9.22.0";function x$(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const i=Object.assign({name:Sy,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!=typeof r||!r)throw uo.create("bad-app-name",{appName:String(r)});if(t||(t=_$()),!t)throw uo.create("no-options");const s=Dl.get(r);if(s){if(Dy(t,s.options)&&Dy(i,s.config))return s;throw uo.create("duplicate-app",{appName:r})}const o=new ehe(r);for(const l of Ty.values())o.addComponent(l);const a=new qhe(t,i,o);return Dl.set(r,a),a}function _f(n=Sy){const e=Dl.get(n);if(!e&&n===Sy&&_$())return x$();if(!e)throw uo.create("no-app",{appName:n});return e}function M$(){return Array.from(Dl.values())}function ut(n,e,t){var i;let r=null!==(i=Hhe[n])&&void 0!==i?i:n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];return s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void El.warn(a.join(" "))}Kn(new Pn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const yf="firebase-heartbeat-store";let F$,L$,BI=null;function k$(){return BI||(BI=function hhe(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(n,e),a=na(o);return i&&o.addEventListener("upgradeneeded",l=>{i(na(o.result),l.oldVersion,l.newVersion,na(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(yf)}}).catch(n=>{throw uo.create("idb-open",{originalErrorMessage:n.message})})),BI}function UI(){return(UI=_(function*(n){try{return yield(yield k$()).transaction(yf).objectStore(yf).get(P$(n))}catch(e){if(e instanceof er)El.warn(e.message);else{const t=uo.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});El.warn(t.message)}}})).apply(this,arguments)}function R$(n,e){return jI.apply(this,arguments)}function jI(){return(jI=_(function*(n,e){try{const i=(yield k$()).transaction(yf,"readwrite");yield i.objectStore(yf).put(e,P$(n)),yield i.done}catch(t){if(t instanceof er)El.warn(t.message);else{const i=uo.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});El.warn(i.message)}}})).apply(this,arguments)}function P$(n){return`${n.name}!${n.options.appId}`}class Xhe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Jhe(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){var e=this;return _(function*(){const i=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=O$();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==r&&!e._heartbeatsCache.heartbeats.some(s=>s.date===r))return e._heartbeatsCache.heartbeats.push({date:r,agent:i}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return _(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=O$(),{heartbeatsToSend:i,unsentEntries:r}=function Zhe(n,e=1024){const t=[];let i=n.slice();for(const r of n){const s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),N$(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),N$(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}(e._heartbeatsCache.heartbeats),s=yy(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(e._heartbeatsCache.heartbeats=r,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function O$(){return(new Date).toISOString().substring(0,10)}class Jhe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(function*(){return!!bl()&&hf().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return _(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function Khe(n){return UI.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return _(function*(){var i;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return R$(t.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return _(function*(){var i;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return R$(t.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function N$(n){return yy(JSON.stringify({version:2,heartbeats:n})).length}!function efe(n){Kn(new Pn("platform-logger",e=>new mhe(e),"PRIVATE")),Kn(new Pn("heartbeat",e=>new Xhe(e),"PRIVATE")),ut(LI,"0.9.10",n),ut(LI,"0.9.10","esm2017"),ut("fire-js","")}(""),ut("firebase","9.22.0","app");const V$=new WeakMap,HI=new WeakMap,B$=new WeakMap,$I=new WeakMap,zI=new WeakMap;let qI={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return HI.get(n);if("objectStoreNames"===e)return n.objectStoreNames||B$.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ra(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function ufe(n){return"function"==typeof n?function cfe(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function sfe(){return L$||(L$=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(GI(this),e),ra(V$.get(this))}:function(...e){return ra(n.apply(GI(this),e))}:function(e,...t){const i=n.call(GI(this),e,...t);return B$.set(i,e.sort?e.sort():[e]),ra(i)}}(n):(n instanceof IDBTransaction&&function afe(n){if(HI.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});HI.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,function rfe(){return F$||(F$=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,qI):n)}function ra(n){if(n instanceof IDBRequest)return function ofe(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(ra(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&V$.set(t,n)}).catch(()=>{}),zI.set(e,n),e}(n);if($I.has(n))return $I.get(n);const e=ufe(n);return e!==n&&($I.set(n,e),zI.set(e,n)),e}const GI=n=>zI.get(n),hfe=["get","getKey","getAll","getAllKeys","count"],ffe=["put","add","delete","clear"],WI=new Map;function U$(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(WI.get(e))return WI.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=ffe.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!hfe.includes(t))return;const s=function(){var o=_(function*(a,...l){const c=this.transaction(a,r?"readwrite":"readonly");let u=c.store;return i&&(u=u.index(l.shift())),(yield Promise.all([u[t](...l),r&&c.done]))[0]});return function(l){return o.apply(this,arguments)}}();return WI.set(e,s),s}!function lfe(n){qI=n(qI)}(n=>Qw(Kw({},n),{get:(e,t,i)=>U$(e,t)||n.get(e,t,i),has:(e,t)=>!!U$(e,t)||n.has(e,t)}));const j$="@firebase/installations",$$="w:0.6.4",z$="FIS_v2",fo=new vs("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function q$(n){return n instanceof er&&n.code.includes("request-failed")}function QI({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function G$(n){return{token:n.token,requestStatus:2,expiresIn:vfe(n.expiresIn),creationTime:Date.now()}}function YI(n,e){return XI.apply(this,arguments)}function XI(){return(XI=_(function*(n,e){const i=(yield e.json()).error;return fo.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})).apply(this,arguments)}function W$({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function K$(n,{refreshToken:e}){const t=W$(n);return t.append("Authorization",function bfe(n){return`${z$} ${n}`}(e)),t}function ZI(n){return JI.apply(this,arguments)}function JI(){return(JI=_(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function vfe(n){return Number(n.replace("s","000"))}function wfe(n,e){return eS.apply(this,arguments)}function eS(){return(eS=_(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=QI(n),r=W$(n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const a={method:"POST",headers:r,body:JSON.stringify({fid:t,authVersion:z$,appId:n.appId,sdkVersion:$$})},l=yield ZI(()=>fetch(i,a));if(l.ok){const c=yield l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:G$(c.authToken)}}throw yield YI("Create Installation",l)})).apply(this,arguments)}function Q$(n){return new Promise(e=>{setTimeout(e,n)})}const Efe=/^[cdef][\w-]{21}$/;function Dfe(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function Ife(n){return function Cfe(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return Efe.test(t)?t:""}catch(n){return""}}function Iu(n){return`${n.appName}!${n.appId}`}const Su=new Map;function Y$(n,e){const t=Iu(n);X$(t,e),function Afe(n,e){const t=function Z$(){return!Il&&"BroadcastChannel"in self&&(Il=new BroadcastChannel("[Firebase] FID Change"),Il.onmessage=n=>{X$(n.data.key,n.data.fid)}),Il}();t&&t.postMessage({key:n,fid:e}),function J$(){0===Su.size&&Il&&(Il.close(),Il=null)}()}(t,e)}function X$(n,e){const t=Su.get(n);if(t)for(const i of t)i(e)}let Il=null;const Sl="firebase-installations-store";let nS=null;function iS(){return nS||(nS=function dfe(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(n,e),a=ra(o);return i&&o.addEventListener("upgradeneeded",l=>{i(ra(o.result),l.oldVersion,l.newVersion,ra(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}("firebase-installations-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Sl)}})),nS}function Ay(n,e){return rS.apply(this,arguments)}function rS(){return(rS=_(function*(n,e){const t=Iu(n),r=(yield iS()).transaction(Sl,"readwrite"),s=r.objectStore(Sl),o=yield s.get(t);return yield s.put(e,t),yield r.done,(!o||o.fid!==e.fid)&&Y$(n,e.fid),e})).apply(this,arguments)}function sS(n){return oS.apply(this,arguments)}function oS(){return(oS=_(function*(n){const e=Iu(n),i=(yield iS()).transaction(Sl,"readwrite");yield i.objectStore(Sl).delete(e),yield i.done})).apply(this,arguments)}function vf(n,e){return aS.apply(this,arguments)}function aS(){return(aS=_(function*(n,e){const t=Iu(n),r=(yield iS()).transaction(Sl,"readwrite"),s=r.objectStore(Sl),o=yield s.get(t),a=e(o);return void 0===a?yield s.delete(t):yield s.put(a,t),yield r.done,a&&(!o||o.fid!==a.fid)&&Y$(n,a.fid),a})).apply(this,arguments)}function lS(n){return cS.apply(this,arguments)}function cS(){return(cS=_(function*(n){let e;const t=yield vf(n.appConfig,i=>{const r=kfe(i),s=Rfe(n,r);return e=s.registrationPromise,s.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})).apply(this,arguments)}function kfe(n){return tz(n||{fid:Dfe(),registrationStatus:0})}function Rfe(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(fo.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=function Pfe(n,e){return uS.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Ofe(n)}:{installationEntry:e}}function uS(){return(uS=_(function*(n,e){try{const t=yield wfe(n,e);return Ay(n.appConfig,t)}catch(t){throw q$(t)&&409===t.customData.serverCode?yield sS(n.appConfig):yield Ay(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})).apply(this,arguments)}function Ofe(n){return dS.apply(this,arguments)}function dS(){return(dS=_(function*(n){let e=yield ez(n.appConfig);for(;1===e.registrationStatus;)yield Q$(100),e=yield ez(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:i}=yield lS(n);return i||t}return e})).apply(this,arguments)}function ez(n){return vf(n,e=>{if(!e)throw fo.create("installation-not-found");return tz(e)})}function tz(n){return function Nfe(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function Ffe(n,e){return hS.apply(this,arguments)}function hS(){return(hS=_(function*({appConfig:n,heartbeatServiceProvider:e},t){const i=Lfe(n,t),r=K$(n,t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const a={method:"POST",headers:r,body:JSON.stringify({installation:{sdkVersion:$$,appId:n.appId}})},l=yield ZI(()=>fetch(i,a));if(l.ok)return G$(yield l.json());throw yield YI("Generate Auth Token",l)})).apply(this,arguments)}function Lfe(n,{fid:e}){return`${QI(n)}/${e}/authTokens:generate`}function fS(n){return pS.apply(this,arguments)}function pS(){return(pS=_(function*(n,e=!1){let t;const i=yield vf(n.appConfig,s=>{if(!iz(s))throw fo.create("not-registered");const o=s.authToken;if(!e&&Ufe(o))return s;if(1===o.requestStatus)return t=Vfe(n,e),s;{if(!navigator.onLine)throw fo.create("app-offline");const a=Hfe(s);return t=Bfe(n,a),a}});return t?yield t:i.authToken})).apply(this,arguments)}function Vfe(n,e){return mS.apply(this,arguments)}function mS(){return(mS=_(function*(n,e){let t=yield nz(n.appConfig);for(;1===t.authToken.requestStatus;)yield Q$(100),t=yield nz(n.appConfig);const i=t.authToken;return 0===i.requestStatus?fS(n,e):i})).apply(this,arguments)}function nz(n){return vf(n,e=>{if(!iz(e))throw fo.create("not-registered");return function $fe(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Bfe(n,e){return gS.apply(this,arguments)}function gS(){return(gS=_(function*(n,e){try{const t=yield Ffe(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return yield Ay(n.appConfig,i),t}catch(t){if(!q$(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Ay(n.appConfig,i)}else yield sS(n.appConfig);throw t}})).apply(this,arguments)}function iz(n){return void 0!==n&&2===n.registrationStatus}function Ufe(n){return 2===n.requestStatus&&!function jfe(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function Hfe(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function _S(){return(_S=_(function*(n){const e=n,{installationEntry:t,registrationPromise:i}=yield lS(e);return i?i.catch(console.error):fS(e).catch(console.error),t.fid})).apply(this,arguments)}function yS(){return(yS=_(function*(n,e=!1){const t=n;return yield Gfe(t),(yield fS(t,e)).token})).apply(this,arguments)}function Gfe(n){return vS.apply(this,arguments)}function vS(){return(vS=_(function*(n){const{registrationPromise:e}=yield lS(n);e&&(yield e)})).apply(this,arguments)}function CS(n){return fo.create("missing-app-config-values",{valueName:n})}const rz="installations",Xfe=n=>{const e=n.getProvider("app").getImmediate(),t=function Qfe(n){if(!n||!n.options)throw CS("App Configuration");if(!n.name)throw CS("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw CS(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:ia(e,"heartbeat"),_delete:()=>Promise.resolve()}},Zfe=n=>{const t=ia(n.getProvider("app").getImmediate(),rz).getImmediate();return{getId:()=>function zfe(n){return _S.apply(this,arguments)}(t),getToken:r=>function qfe(n){return yS.apply(this,arguments)}(t,r)}};(function Jfe(){Kn(new Pn(rz,Xfe,"PUBLIC")),Kn(new Pn("installations-internal",Zfe,"PRIVATE"))})(),ut(j$,"0.6.4"),ut(j$,"0.6.4","esm2017");const ES="@firebase/remote-config",Li=new vs("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class upe{constructor(e,t,i,r){this.client=e,this.storage=t,this.storageCache=i,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const i=Date.now()-t,r=i<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${i}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}fetch(e){var t=this;return _(function*(){const[i,r]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(r&&t.isCachedDataFresh(e.cacheMaxAgeMillis,i))return r;e.eTag=r&&r.eTag;const s=yield t.client.fetch(e),o=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function dpe(n=navigator){return n.languages&&n.languages[0]||n.language}class hpe{constructor(e,t,i,r,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=i,this.projectId=r,this.apiKey=s,this.appId=o}fetch(e){var t=this;return _(function*(){const[i,r]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},l={sdk_version:t.sdkVersion,app_instance_id:i,app_instance_id_token:r,app_id:t.appId,language_code:dpe()},c={method:"POST",headers:a,body:JSON.stringify(l)},u=fetch(o,c),d=new Promise((b,v)=>{e.signal.addEventListener(()=>{const E=new Error("The operation was aborted.");E.name="AbortError",v(E)})});let h;try{yield Promise.race([u,d]),h=yield u}catch(b){let v="fetch-client-network";throw"AbortError"===(null==b?void 0:b.name)&&(v="fetch-timeout"),Li.create(v,{originalErrorMessage:null==b?void 0:b.message})}let f=h.status;const p=h.headers.get("ETag")||void 0;let m,g;if(200===h.status){let b;try{b=yield h.json()}catch(v){throw Li.create("fetch-client-parse",{originalErrorMessage:null==v?void 0:v.message})}m=b.entries,g=b.state}if("INSTANCE_STATE_UNSPECIFIED"===g?f=500:"NO_CHANGE"===g?f=304:("NO_TEMPLATE"===g||"EMPTY_CONFIG"===g)&&(m={}),304!==f&&200!==f)throw Li.create("fetch-status",{httpStatus:f});return{status:f,eTag:p,config:m}})()}}class mpe{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return _(function*(){const i=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,i)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:i}){var r=this;return _(function*(){yield function fpe(n,e){return new Promise((t,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(s),i(Li.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield r.client.fetch(e);return yield r.storage.deleteThrottleMetadata(),s}catch(s){if(!function ppe(n){if(!(n instanceof er&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+xI(i),backoffCount:i+1};return yield r.storage.setThrottleMetadata(o),r.attemptFetch(e,o)}})()}}class ype{constructor(e,t,i,r,s){this.app=e,this._client=t,this._storageCache=i,this._storage=r,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function My(n,e){const t=n.target.error||void 0;return Li.create(e,{originalErrorMessage:t&&(null==t?void 0:t.message)})}const Tl="app_namespace_store";class Cpe{constructor(e,t,i,r=function wpe(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=i=>{e(My(i,"storage-open"))},t.onsuccess=i=>{n(i.target.result)},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Tl,{keyPath:"compositeKey"})}}catch(t){e(Li.create("storage-open",{originalErrorMessage:null==t?void 0:t.message}))}})}()){this.appId=e,this.appName=t,this.namespace=i,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return _(function*(){const i=yield t.openDbPromise;return new Promise((r,s)=>{const a=i.transaction([Tl],"readonly").objectStore(Tl),l=t.createCompositeKey(e);try{const c=a.get(l);c.onerror=u=>{s(My(u,"storage-get"))},c.onsuccess=u=>{const d=u.target.result;r(d?d.value:void 0)}}catch(c){s(Li.create("storage-get",{originalErrorMessage:null==c?void 0:c.message}))}})})()}set(e,t){var i=this;return _(function*(){const r=yield i.openDbPromise;return new Promise((s,o)=>{const l=r.transaction([Tl],"readwrite").objectStore(Tl),c=i.createCompositeKey(e);try{const u=l.put({compositeKey:c,value:t});u.onerror=d=>{o(My(d,"storage-set"))},u.onsuccess=()=>{s()}}catch(u){o(Li.create("storage-set",{originalErrorMessage:null==u?void 0:u.message}))}})})()}delete(e){var t=this;return _(function*(){const i=yield t.openDbPromise;return new Promise((r,s)=>{const a=i.transaction([Tl],"readwrite").objectStore(Tl),l=t.createCompositeKey(e);try{const c=a.delete(l);c.onerror=u=>{s(My(u,"storage-delete"))},c.onsuccess=()=>{r()}}catch(c){s(Li.create("storage-delete",{originalErrorMessage:null==c?void 0:c.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class Epe{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return _(function*(){const t=e.storage.getLastFetchStatus(),i=e.storage.getLastSuccessfulFetchTimestampMillis(),r=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const o=yield i;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield r;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Ipe(){return AS.apply(this,arguments)}function AS(){return(AS=_(function*(){if(!bl())return!1;try{return yield hf()}catch(n){return!1}})).apply(this,arguments)}let lz,cz;!function Dpe(){Kn(new Pn("remote-config",function n(e,{instanceIdentifier:t}){const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Li.create("registration-window");if(!bl())throw Li.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=i.options;if(!s)throw Li.create("registration-project-id");if(!o)throw Li.create("registration-api-key");if(!a)throw Li.create("registration-app-id");const l=new Cpe(a,i.name,t=t||"firebase"),c=new Epe(l),u=new Cl(ES);u.logLevel=Ne.ERROR;const d=new hpe(r,ho,t,s,o,a),h=new mpe(d,l),f=new upe(h,l,c,u),p=new ype(i,f,c,l,u);return function ape(n){const e=Re(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),ut(ES,"0.4.4"),ut(ES,"0.4.4","esm2017")}();const uz=new WeakMap,xS=new WeakMap,dz=new WeakMap,MS=new WeakMap,kS=new WeakMap;let RS={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return xS.get(n);if("objectStoreNames"===e)return n.objectStoreNames||dz.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return po(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function Ppe(n){return"function"==typeof n?function Rpe(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ape(){return cz||(cz=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(PS(this),e),po(uz.get(this))}:function(...e){return po(n.apply(PS(this),e))}:function(e,...t){const i=n.call(PS(this),e,...t);return dz.set(i,e.sort?e.sort():[e]),po(i)}}(n):(n instanceof IDBTransaction&&function Mpe(n){if(xS.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});xS.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,function Tpe(){return lz||(lz=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,RS):n)}function po(n){if(n instanceof IDBRequest)return function xpe(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(po(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&uz.set(t,n)}).catch(()=>{}),kS.set(e,n),e}(n);if(MS.has(n))return MS.get(n);const e=Ppe(n);return e!==n&&(MS.set(n,e),kS.set(e,n)),e}const PS=n=>kS.get(n);function hz(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(n,e),a=po(o);return i&&o.addEventListener("upgradeneeded",l=>{i(po(o.result),l.oldVersion,l.newVersion,po(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}function OS(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),po(t).then(()=>{})}const Ope=["get","getKey","getAll","getAllKeys","count"],Npe=["put","add","delete","clear"],NS=new Map;function fz(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(NS.get(e))return NS.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=Npe.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Ope.includes(t))return;const s=function(){var o=_(function*(a,...l){const c=this.transaction(a,r?"readwrite":"readonly");let u=c.store;return i&&(u=u.index(l.shift())),(yield Promise.all([u[t](...l),r&&c.done]))[0]});return function(l){return o.apply(this,arguments)}}();return NS.set(e,s),s}!function kpe(n){RS=n(RS)}(n=>Qw(Kw({},n),{get:(e,t,i)=>fz(e,t)||n.get(e,t,i),has:(e,t)=>!!fz(e,t)||n.has(e,t)}));const Fpe="/firebase-messaging-sw.js",Lpe="/firebase-cloud-messaging-push-scope",pz="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",mz="google.c.a.c_id",Bpe="google.c.a.c_l",Upe="google.c.a.ts",jpe="google.c.a.e";var Tu=(()=>{return(n=Tu||(Tu={})).PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",Tu;var n})();function mo(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Hpe(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(t),r=new Uint8Array(i.length);for(let s=0;s<i.length;++s)r[s]=i.charCodeAt(s);return r}const FS="fcm_token_details_db",gz="fcm_token_object_Store";function zpe(n){return LS.apply(this,arguments)}function LS(){return LS=_(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(FS))return null;let e=null;return(yield hz(FS,5,{upgrade:(i=_(function*(r,s,o,a){var l;if(s<2||!r.objectStoreNames.contains(gz))return;const c=a.objectStore(gz),u=yield c.index("fcmSenderId").get(n);if(yield c.clear(),u)if(2===s){const d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(l=d.createTime)&&void 0!==l?l:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:mo(d.vapidKey)}}}else if(3===s){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:mo(d.auth),p256dh:mo(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:mo(d.vapidKey)}}}else if(4===s){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:mo(d.auth),p256dh:mo(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:mo(d.vapidKey)}}}}),function(s,o,a,l){return i.apply(this,arguments)})})).close(),yield OS(FS),yield OS("fcm_vapid_details_db"),yield OS("undefined"),qpe(e)?e:null;var i}),LS.apply(this,arguments)}function qpe(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const Al="firebase-messaging-store";let VS=null;function BS(){return VS||(VS=hz("firebase-messaging-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Al)}})),VS}function _z(n){return US.apply(this,arguments)}function US(){return(US=_(function*(n){const e=zS(n),i=yield(yield BS()).transaction(Al).objectStore(Al).get(e);if(i)return i;{const r=yield zpe(n.appConfig.senderId);if(r)return yield jS(n,r),r}})).apply(this,arguments)}function jS(n,e){return HS.apply(this,arguments)}function HS(){return(HS=_(function*(n,e){const t=zS(n),r=(yield BS()).transaction(Al,"readwrite");return yield r.objectStore(Al).put(e,t),yield r.done,e})).apply(this,arguments)}function Kpe(n){return $S.apply(this,arguments)}function $S(){return($S=_(function*(n){const e=zS(n),i=(yield BS()).transaction(Al,"readwrite");yield i.objectStore(Al).delete(e),yield i.done})).apply(this,arguments)}function zS({appConfig:n}){return n.appId}const Qn=new vs("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ype(n,e){return qS.apply(this,arguments)}function qS(){return(qS=_(function*(n,e){const t=yield QS(n),i=vz(e),r={method:"POST",headers:t,body:JSON.stringify(i)};let s;try{s=yield(yield fetch(KS(n.appConfig),r)).json()}catch(o){throw Qn.create("token-subscribe-failed",{errorInfo:null==o?void 0:o.toString()})}if(s.error)throw Qn.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw Qn.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function Xpe(n,e){return GS.apply(this,arguments)}function GS(){return(GS=_(function*(n,e){const t=yield QS(n),i=vz(e.subscriptionOptions),r={method:"PATCH",headers:t,body:JSON.stringify(i)};let s;try{s=yield(yield fetch(`${KS(n.appConfig)}/${e.token}`,r)).json()}catch(o){throw Qn.create("token-update-failed",{errorInfo:null==o?void 0:o.toString()})}if(s.error)throw Qn.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw Qn.create("token-update-no-token");return s.token})).apply(this,arguments)}function yz(n,e){return WS.apply(this,arguments)}function WS(){return(WS=_(function*(n,e){const i={method:"DELETE",headers:yield QS(n)};try{const s=yield(yield fetch(`${KS(n.appConfig)}/${e}`,i)).json();if(s.error)throw Qn.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(r){throw Qn.create("token-unsubscribe-failed",{errorInfo:null==r?void 0:r.toString()})}})).apply(this,arguments)}function KS({projectId:n}){return`https://fcmregistrations.googleapis.com/v1/projects/${n}/registrations`}function QS(n){return YS.apply(this,arguments)}function YS(){return(YS=_(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function vz({p256dh:n,auth:e,endpoint:t,vapidKey:i}){const r={web:{endpoint:t,auth:e,p256dh:n}};return i!==pz&&(r.web.applicationPubKey=i),r}function Jpe(n){return XS.apply(this,arguments)}function XS(){return(XS=_(function*(n){const e=yield tme(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:mo(e.getKey("auth")),p256dh:mo(e.getKey("p256dh"))},i=yield _z(n.firebaseDependencies);if(i){if(nme(i.subscriptionOptions,t))return Date.now()>=i.createTime+6048e5?eme(n,{token:i.token,createTime:Date.now(),subscriptionOptions:t}):i.token;try{yield yz(n.firebaseDependencies,i.token)}catch(r){console.warn(r)}return wz(n.firebaseDependencies,t)}return wz(n.firebaseDependencies,t)})).apply(this,arguments)}function bz(n){return ZS.apply(this,arguments)}function ZS(){return(ZS=_(function*(n){const e=yield _z(n.firebaseDependencies);e&&(yield yz(n.firebaseDependencies,e.token),yield Kpe(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()})).apply(this,arguments)}function eme(n,e){return JS.apply(this,arguments)}function JS(){return(JS=_(function*(n,e){try{const t=yield Xpe(n.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield jS(n.firebaseDependencies,i),t}catch(t){throw yield bz(n),t}})).apply(this,arguments)}function wz(n,e){return eT.apply(this,arguments)}function eT(){return(eT=_(function*(n,e){const i={token:yield Ype(n,e),createTime:Date.now(),subscriptionOptions:e};return yield jS(n,i),i.token})).apply(this,arguments)}function tme(n,e){return tT.apply(this,arguments)}function tT(){return(tT=_(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Hpe(e)})})).apply(this,arguments)}function nme(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}function Cz(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function ime(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const i=e.notification.body;i&&(n.notification.body=i);const r=e.notification.image;r&&(n.notification.image=r);const s=e.notification.icon;s&&(n.notification.icon=s)}(e,n),function rme(n,e){!e.data||(n.data=e.data)}(e,n),function sme(n,e){var t,i,r,s,o;if(!e.fcmOptions&&!(null===(t=e.notification)||void 0===t?void 0:t.click_action))return;n.fcmOptions={};const a=null!==(r=null===(i=e.fcmOptions)||void 0===i?void 0:i.link)&&void 0!==r?r:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(n.fcmOptions.link=a);const l=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;l&&(n.fcmOptions.analyticsLabel=l)}(e,n),e}function ome(n){return"object"==typeof n&&!!n&&mz in n}function Ez(n,e){const t=[];for(let i=0;i<n.length;i++)t.push(n.charAt(i)),i<e.length&&t.push(e.charAt(i));return t.join("")}function nT(n){return Qn.create("missing-app-config-values",{valueName:n})}Ez("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ez("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class lme{constructor(e,t,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function ame(n){if(!n||!n.options)throw nT("App Configuration Object");if(!n.name)throw nT("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const i of e)if(!t[i])throw nT(i);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:i}}_delete(){return Promise.resolve()}}function Dz(n){return iT.apply(this,arguments)}function iT(){return(iT=_(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(Fpe,{scope:Lpe}),n.swRegistration.update().catch(()=>{})}catch(e){throw Qn.create("failed-service-worker-registration",{browserErrorMessage:null==e?void 0:e.message})}})).apply(this,arguments)}function cme(n,e){return rT.apply(this,arguments)}function rT(){return(rT=_(function*(n,e){if(!e&&!n.swRegistration&&(yield Dz(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Qn.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function ume(n,e){return sT.apply(this,arguments)}function sT(){return(sT=_(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=pz)})).apply(this,arguments)}function oT(){return(oT=_(function*(n,e){if(!navigator)throw Qn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Qn.create("permission-blocked");return yield ume(n,null==e?void 0:e.vapidKey),yield cme(n,null==e?void 0:e.serviceWorkerRegistration),Jpe(n)})).apply(this,arguments)}function dme(n,e,t){return aT.apply(this,arguments)}function aT(){return(aT=_(function*(n,e,t){const i=hme(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:t[mz],message_name:t[Bpe],message_time:t[Upe],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function hme(n){switch(n){case Tu.NOTIFICATION_CLICKED:return"notification_open";case Tu.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function lT(){return(lT=_(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Tu.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(Cz(t)):n.onMessageHandler.next(Cz(t)));const i=t.data;ome(i)&&"1"===i[jpe]&&(yield dme(n,t.messageType,i))})).apply(this,arguments)}const Sz="@firebase/messaging",pme=n=>{const e=new lme(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function fme(n,e){return lT.apply(this,arguments)}(e,t)),e},mme=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:i=>function Iz(n,e){return oT.apply(this,arguments)}(e,i)}};function Az(){return cT.apply(this,arguments)}function cT(){return(cT=_(function*(){try{yield hf()}catch(n){return!1}return"undefined"!=typeof window&&bl()&&TI()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function gme(){Kn(new Pn("messaging",pme,"PUBLIC")),Kn(new Pn("messaging-internal",mme,"PRIVATE")),ut(Sz,"0.12.4"),ut(Sz,"0.12.4","esm2017")}();const ky="analytics",vme="firebase_id",Cme="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",hT="https://www.googletagmanager.com/gtag/js",On=new Cl("@firebase/analytics"),Ii=new vs("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Dme(n){if(!n.startsWith(hT)){const e=Ii.create("invalid-gtag-resource",{gtagURL:n});return On.warn(e.message),""}return n}function xz(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Sme(n,e){const t=function Ime(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:Dme}),i=document.createElement("script"),r=`${hT}?l=${n}&id=${e}`;i.src=t?null==t?void 0:t.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function Ame(n,e,t,i,r,s){return fT.apply(this,arguments)}function fT(){return(fT=_(function*(n,e,t,i,r,s){const o=i[r];try{if(o)yield e[o];else{const l=(yield xz(t)).find(c=>c.measurementId===r);l&&(yield e[l.appId])}}catch(a){On.error(a)}n("config",r,s)})).apply(this,arguments)}function xme(n,e,t,i,r){return pT.apply(this,arguments)}function pT(){return(pT=_(function*(n,e,t,i,r){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=yield xz(t);for(const l of o){const c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(!u){s=[];break}s.push(u)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",i,r||{})}catch(s){On.error(s)}})).apply(this,arguments)}function Rme(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(hT)&&t.src.includes(n))return t;return null}const Mz=new class Nme{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Fme(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function Lme(n){return mT.apply(this,arguments)}function mT(){return(mT=_(function*(n){var e;const{appId:t,apiKey:i}=n,r={method:"GET",headers:Fme(i)},s=Cme.replace("{app-id}",t),o=yield fetch(s,r);if(200!==o.status&&304!==o.status){let a="";try{const l=yield o.json();(null===(e=l.error)||void 0===e?void 0:e.message)&&(a=l.error.message)}catch(l){}throw Ii.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function Vme(n){return gT.apply(this,arguments)}function gT(){return(gT=_(function*(n,e=Mz,t){const{appId:i,apiKey:r,measurementId:s}=n.options;if(!i)throw Ii.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw Ii.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new jme;return setTimeout(_(function*(){a.abort()}),void 0!==t?t:6e4),kz({appId:i,apiKey:r,measurementId:s},o,a,e)})).apply(this,arguments)}function kz(n,e,t){return _T.apply(this,arguments)}function _T(){return(_T=_(function*(n,{throttleEndTimeMillis:e,backoffCount:t},i,r=Mz){var s;const{appId:o,measurementId:a}=n;try{yield Bme(i,e)}catch(l){if(a)return On.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==l?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=yield Lme(n);return r.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!Ume(c)){if(r.deleteThrottleMetadata(o),a)return On.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==c?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const u=503===Number(null===(s=null==c?void 0:c.customData)||void 0===s?void 0:s.httpStatus)?xI(t,r.intervalMillis,30):xI(t,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:t+1};return r.setThrottleMetadata(o,d),On.debug(`Calling attemptFetch again in ${u} millis`),kz(n,d,i,r)}})).apply(this,arguments)}function Bme(n,e){return new Promise((t,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(s),i(Ii.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Ume(n){if(!(n instanceof er&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class jme{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let yT,IT;function vT(){return(vT=_(function*(n,e,t,i,r){if(r&&r.global)n("event",t,i);else{const s=yield e;n("event",t,Object.assign(Object.assign({},i),{send_to:s}))}})).apply(this,arguments)}function Rz(n){IT=n}function Pz(n){yT=n}function Kme(){return ST.apply(this,arguments)}function ST(){return(ST=_(function*(){if(!bl())return On.warn(Ii.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield hf()}catch(n){return On.warn(Ii.create("indexeddb-unavailable",{errorInfo:null==n?void 0:n.toString()}).message),!1}return!0})).apply(this,arguments)}function TT(){return(TT=_(function*(n,e,t,i,r,s,o){var a;const l=Vme(n);l.then(f=>{t[f.measurementId]=f.appId,n.options.measurementId&&f.measurementId!==n.options.measurementId&&On.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>On.error(f)),e.push(l);const c=Kme().then(f=>{if(f)return i.getId()}),[u,d]=yield Promise.all([l,c]);Rme(s)||Sme(s,u.measurementId),IT&&(r("consent","default",IT),Rz(void 0)),r("js",new Date);const h=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return h.origin="firebase",h.update=!0,null!=d&&(h[vme]=d),r("config",u.measurementId,h),yT&&(r("set",yT),Pz(void 0)),u.measurementId})).apply(this,arguments)}class Yme{constructor(e){this.app=e}_delete(){return delete Cs[this.app.options.appId],Promise.resolve()}}let Cs={},Oz=[];const Nz={};let Lz,Es,Ry="dataLayer",AT=!1;function Zme(n,e,t){!function Xme(){const n=[];if(SI()&&n.push("This is a browser extension environment."),TI()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,r)=>`(${r+1}) ${i}`).join(" "),t=Ii.create("invalid-analytics-context",{errorInfo:e});On.warn(t.message)}}();const i=n.options.appId;if(!i)throw Ii.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw Ii.create("no-api-key");On.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Cs[i])throw Ii.create("already-exists",{id:i});if(!AT){!function Tme(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(Ry);const{wrappedGtag:s,gtagCore:o}=function kme(n,e,t,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&"function"==typeof window[r]&&(s=window[r]),window[r]=function Mme(n,e,t,i){function s(){return(s=_(function*(o,...a){try{if("event"===o){const[l,c]=a;yield xme(n,e,t,l,c)}else if("config"===o){const[l,c]=a;yield Ame(n,e,t,i,l,c)}else if("consent"===o){const[l]=a;n("consent","update",l)}else if("get"===o){const[l,c,u]=a;n("get",l,c,u)}else if("set"===o){const[l]=a;n("set",l)}else n(o,...a)}catch(l){On.error(l)}})).apply(this,arguments)}return function r(o){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[r]}}(Cs,Oz,Nz,Ry,"gtag");Es=s,Lz=o,AT=!0}return Cs[i]=function Qme(n,e,t,i,r,s,o){return TT.apply(this,arguments)}(n,Oz,Nz,e,Lz,Ry,t),new Yme(n)}function ege(){return xT.apply(this,arguments)}function xT(){return(xT=_(function*(){if(SI()||!TI()||!bl())return!1;try{return yield hf()}catch(n){return!1}})).apply(this,arguments)}const Vz="@firebase/analytics";!function nge(){Kn(new Pn(ky,(e,{options:t})=>Zme(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Kn(new Pn("analytics-internal",function n(e){try{const t=e.getProvider(ky).getImmediate();return{logEvent:(i,r,s)=>function tge(n,e,t,i){n=Re(n),function Hme(n,e,t,i,r){return vT.apply(this,arguments)}(Es,Cs[n.app.options.appId],e,t,i).catch(r=>On.error(r))}(t,i,r,s)}}catch(t){throw Ii.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),ut(Vz,"0.10.0"),ut(Vz,"0.10.0","esm2017")}();class ige extends Et{constructor(e,t){super()}schedule(e,t=0){return this}}const Py={setInterval(n,e,...t){const{delegate:i}=Py;return(null==i?void 0:i.setInterval)?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Py;return((null==e?void 0:e.clearInterval)||clearInterval)(n)},delegate:void 0};class Oy extends ige{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return Py.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&Py.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,vc(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Uz={now:()=>(Uz.delegate||Date).now(),delegate:void 0};class bf{constructor(e,t=bf.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}bf.now=Uz.now;class Ny extends bf{constructor(e,t=bf.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const oge=new class sge extends Ny{}(class rge extends Oy{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!=i&&i>0||null==i&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}}),wf=new Ny(Oy),age=wf,Au=new Qo("7.5.0"),kT="__angularfire_symbol__analyticsIsSupportedValue",RT="__angularfire_symbol__analyticsIsSupported",PT="__angularfire_symbol__remoteConfigIsSupportedValue",OT="__angularfire_symbol__remoteConfigIsSupported",NT="__angularfire_symbol__messagingIsSupportedValue",FT="__angularfire_symbol__messagingIsSupported";function Cf(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}globalThis[RT]||(globalThis[RT]=ege().then(n=>globalThis[kT]=n).catch(()=>globalThis[kT]=!1)),globalThis[FT]||(globalThis[FT]=Az().then(n=>globalThis[NT]=n).catch(()=>globalThis[NT]=!1)),globalThis[OT]||(globalThis[OT]=Ipe().then(n=>globalThis[PT]=n).catch(()=>globalThis[PT]=!1));const Ef=(n,e)=>{const t=e?[e]:M$(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i};function xu(){}class jz{constructor(e,t=oge){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){const r=this.zone;return this.delegate.schedule(function(o){r.runGuarded(()=>{e.apply(this,[o])})},t,i)}}class lge{constructor(e){this.zone=e,this.task=null}call(e,t){const i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xu,{},xu,xu)),t.pipe(kn({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Df=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new jz(Zone.current)),this.insideAngular=t.run(()=>new jz(Zone.current,wf)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(w(oe))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function xl(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function cge(n){return xl().ngZone.runOutsideAngular(()=>n())}function Ml(n){return xl().ngZone.run(()=>n())}function uge(n){return xl(),function dge(n){return function(t){return(t=t.lift(new lge(n.ngZone))).pipe(Zm(n.outsideAngular),Xm(n.insideAngular))}}(xl())(n)}const hge=(n,e)=>function(){const i=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Ml(()=>n.apply(void 0,i))},Ie=(n,e)=>function(){let t;const i=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof i[s]&&(e&&(t||(t=Ml(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xu,{},xu,xu)))),i[s]=hge(i[s],t));const r=cge(()=>n.apply(this,i));if(!e){if(r instanceof it){const s=xl();return r.pipe(Zm(s.outsideAngular),Xm(s.insideAngular))}return Ml(()=>r)}return r instanceof it?r.pipe(uge):r instanceof Promise?Ml(()=>new Promise((s,o)=>r.then(a=>Ml(()=>s(a)),a=>Ml(()=>o(a))))):"function"==typeof r&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),r.apply(this,arguments)}:Ml(()=>r)};class sa{constructor(e){return e}}class If{constructor(){return M$()}}const VT=new k("angularfire2._apps"),pge={provide:sa,useFactory:function fge(n){return n&&1===n.length?n[0]:new sa(_f())},deps:[[new Ze,VT]]},mge={provide:If,deps:[[new Ze,VT]]};function gge(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new sa(i)}}let _ge=(()=>{class n{constructor(t){ut("angularfire",Au.full,"core"),ut("angularfire",Au.full,"app"),ut("angular",_V.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(w(cu))},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({providers:[pge,mge]}),n})();function yge(n,...e){return{ngModule:_ge,providers:[{provide:VT,useFactory:gge(n),multi:!0,deps:[oe,Je,Df,...e]}]}}const vge=Ie(x$,!0),BT=new Map,Hz={activated:!1,tokenObservers:[]},bge={initialized:!1,enabled:!1};function qt(n){return BT.get(n)||Object.assign({},Hz)}function Fy(){return bge}class Sge{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return _(function*(){t.stop();try{t.pending=new Er,yield function Tge(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Er,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Yn=new vs("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function jT(n){if(!qt(n).activated)throw Yn.create("use-before-activation",{appName:n.name})}function By(n,e){return $T.apply(this,arguments)}function $T(){return($T=_(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},r=t.getImmediate({optional:!0});if(r){const d=yield r.getHeartbeatsHeader();d&&(i["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(e),headers:i};let o,a;try{o=yield fetch(n,s)}catch(d){throw Yn.create("fetch-network-error",{originalErrorMessage:null==d?void 0:d.message})}if(200!==o.status)throw Yn.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(d){throw Yn.create("fetch-parse-error",{originalErrorMessage:null==d?void 0:d.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Yn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=1e3*Number(l[1]),u=Date.now();return{token:a.token,expireTimeMillis:u+c,issuedAtTimeMillis:u}})).apply(this,arguments)}function zz(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:e}}}const Sf="firebase-app-check-store";let Uy=null;function Gz(){return Uy||(Uy=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(Yn.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Sf,{keyPath:"compositeKey"})}}catch(t){e(Yn.create("storage-open",{originalErrorMessage:null==t?void 0:t.message}))}}),Uy)}function zT(){return(zT=_(function*(n,e){const i=(yield Gz()).transaction(Sf,"readwrite"),s=i.objectStore(Sf).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},i.onerror=l=>{var c;a(Yn.create("storage-set",{originalErrorMessage:null===(c=l.target.error)||void 0===c?void 0:c.message}))}})})).apply(this,arguments)}const Tf=new Cl("@firebase/app-check");function WT(n,e){return bl()?function Oge(n,e){return function Wz(n,e){return zT.apply(this,arguments)}(function Qz(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Tf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function QT(){return Fy().enabled}function YT(){return XT.apply(this,arguments)}function XT(){return(XT=_(function*(){const n=Fy();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Uge={error:"UNKNOWN_ERROR"};function jge(n){return _y.encodeString(JSON.stringify(n),!1)}function jy(n){return ZT.apply(this,arguments)}function ZT(){return(ZT=_(function*(n,e=!1){const t=n.app;jT(t);const i=qt(t);let s,r=i.token;if(r&&!Mu(r)&&(i.token=void 0,r=void 0),!r){const l=yield i.cachedTokenPromise;l&&(Mu(l)?r=l:yield WT(t,void 0))}if(!e&&r&&Mu(r))return{token:r.token};let a,o=!1;if(QT()){i.exchangeTokenPromise||(i.exchangeTokenPromise=By(zz(t,yield YT()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);const l=yield i.exchangeTokenPromise;return yield WT(t,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),r=yield qt(t).exchangeTokenPromise}catch(l){"appCheck/throttled"===l.code?Tf.warn(l.message):Tf.error(l),s=l}return r?s?a=Mu(r)?{token:r.token,internalError:s}:Zz(s):(a={token:r.token},i.token=r,yield WT(t,r)):a=Zz(s),o&&Xz(t,a),a})).apply(this,arguments)}function tA(n,e){const t=qt(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function Yz(n){const{app:e}=n,t=qt(e);let i=t.tokenRefresher;i||(i=function $ge(n){const{app:e}=n;return new Sge(_(function*(){let i;if(i=qt(e).token?yield jy(n,!0):yield jy(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=qt(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function Xz(n,e){const t=qt(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(r){}}function Mu(n){return n.expireTimeMillis-Date.now()>0}function Zz(n){return{token:jge(Uge),error:n}}class zge{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=qt(this.app);for(const t of e)tA(this.app,t.next);return Promise.resolve()}}const oq="app-check-internal";!function r_e(){Kn(new Pn("app-check",n=>function qge(n,e){return new zge(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(oq).initialize()})),Kn(new Pn(oq,n=>function Gge(n){return{getToken:e=>jy(n,e),addTokenListener:e=>function eA(n,e,t,i){const{app:r}=n,s=qt(r);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:i,type:e}],s.token&&Mu(s.token)){const a=s.token;Promise.resolve().then(()=>{t({token:a.token}),Yz(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Yz(n))}(n,"INTERNAL",e),removeTokenListener:e=>tA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),ut("@firebase/app-check","0.7.0")}();class Af{constructor(){return Ef("app-check")}}"undefined"!=typeof window&&window;const c_e=function lq(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},cq=new vs("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),$y=new Cl("@firebase/auth");function zy(n,...e){$y.logLevel<=Ne.ERROR&&$y.error(`Auth (${ho}): ${n}`,...e)}function Vi(n,...e){throw oA(n,...e)}function Ds(n,...e){return oA(n,...e)}function uq(n,e,t){const i=Object.assign(Object.assign({},c_e()),{[e]:t});return new vs("auth","Firebase",i).create(e,{appName:n.name})}function oA(n,...e){if("string"!=typeof n){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return cq.create(n,...e)}function P(n,e,...t){if(!n)throw oA(e,...t)}function Is(n){const e="INTERNAL ASSERTION FAILED: "+n;throw zy(e),new Error(e)}function oa(n,e){n||Is(e)}function xf(){var n;return"undefined"!=typeof self&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function dq(){var n;return"undefined"!=typeof self&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class Mf{constructor(e,t){this.shortDelay=e,this.longDelay=t,oa(t>e,"Short delay should be less than long delay!"),this.isMobile=II()||b$()}get(){return function d_e(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function aA(){return"http:"===dq()||"https:"===dq()}()||SI()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function lA(n,e){oa(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class hq{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Is("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Is("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Is("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const f_e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},p_e=new Mf(3e4,6e4);function Ot(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Gt(n,e,t,i){return cA.apply(this,arguments)}function cA(){return(cA=_(function*(n,e,t,i,r={}){return fq(n,r,_(function*(){let s={},o={};i&&("GET"===e?o=i:s={body:JSON.stringify(i)});const a=pf(Object.assign({key:n.config.apiKey},o)).slice(1),l=yield n._getAdditionalHeaders();return l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode),hq.fetch()(pq(n,n.config.apiHost,t,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function fq(n,e,t){return uA.apply(this,arguments)}function uA(){return(uA=_(function*(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},f_e),e);try{const r=new m_e(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw kf(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===l)throw kf(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===l)throw kf(n,"email-already-in-use",o);if("USER_DISABLED"===l)throw kf(n,"user-disabled",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw uq(n,u,c);Vi(n,u)}}catch(r){if(r instanceof er)throw r;Vi(n,"network-request-failed",{message:String(r)})}})).apply(this,arguments)}function go(n,e,t,i){return dA.apply(this,arguments)}function dA(){return(dA=_(function*(n,e,t,i,r={}){const s=yield Gt(n,e,t,i,r);return"mfaPendingCredential"in s&&Vi(n,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function pq(n,e,t,i){const r=`${e}${t}?${i}`;return n.config.emulator?lA(n.config,r):`${n.config.apiScheme}://${r}`}class m_e{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ds(this.auth,"network-request-failed")),p_e.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=Ds(n,e,i);return r.customData._tokenResponse=t,r}function hA(){return(hA=_(function*(n,e){return Gt(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function y_e(n,e){return pA.apply(this,arguments)}function pA(){return(pA=_(function*(n,e){return Gt(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Rf(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function mA(){return(mA=_(function*(n,e=!1){const t=Re(n),i=yield t.getIdToken(e),r=qy(i);P(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const s="object"==typeof r.firebase?r.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Rf(gA(r.auth_time)),issuedAtTime:Rf(gA(r.iat)),expirationTime:Rf(gA(r.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}})).apply(this,arguments)}function gA(n){return 1e3*Number(n)}function qy(n){const[e,t,i]=n.split(".");if(void 0===e||void 0===t||void 0===i)return zy("JWT malformed, contained fewer than 3 sections"),null;try{const r=vy(t);return r?JSON.parse(r):(zy("Failed to decode base64 JWT payload"),null)}catch(r){return zy("Caught error parsing JWT payload as JSON",null==r?void 0:r.toString()),null}}function _o(n,e){return _A.apply(this,arguments)}function _A(){return(_A=_(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(i){throw i instanceof er&&w_e(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})).apply(this,arguments)}function w_e({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}class C_e{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),i}{this.errorBackoff=3e4;const r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const i=this.getInterval(e);this.timerId=setTimeout(_(function*(){yield t.iteration()}),i)}iteration(){var e=this;return _(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null==t?void 0:t.code)&&e.schedule(!0))}e.schedule()})()}}class mq{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rf(this.lastLoginAt),this.creationTime=Rf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Pf(n){return yA.apply(this,arguments)}function yA(){return(yA=_(function*(n){var e;const t=n.auth,i=yield n.getIdToken(),r=yield _o(n,y_e(t,{idToken:i}));P(null==r?void 0:r.users.length,t,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?I_e(s.providerUserInfo):[],a=D_e(n.providerData,o),u=!!n.isAnonymous&&!(n.email&&s.passwordHash||(null==a?void 0:a.length)),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new mq(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)})).apply(this,arguments)}function vA(){return(vA=_(function*(n){const e=Re(n);yield Pf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function D_e(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function I_e(n){return n.map(e=>{var{providerId:t}=e,i=rC(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function bA(){return(bA=_(function*(n,e){const t=yield fq(n,{},_(function*(){const i=pf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=pq(n,r,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",hq.fetch()(o,{method:"POST",headers:a,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}class Of{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){P(e.idToken,"internal-error"),P(void 0!==e.idToken,"internal-error"),P(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function b_e(n){const e=qy(n);return P(e,"internal-error"),P(void 0!==e.exp,"internal-error"),P(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var i=this;return _(function*(){return P(!i.accessToken||i.refreshToken,e,"user-token-expired"),t||!i.accessToken||i.isExpired?i.refreshToken?(yield i.refresh(e,i.refreshToken),i.accessToken):null:i.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var i=this;return _(function*(){const{accessToken:r,refreshToken:s,expiresIn:o}=yield function S_e(n,e){return bA.apply(this,arguments)}(e,t);i.updateTokensAndExpiration(r,s,Number(o))})()}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*i}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new Of;return i&&(P("string"==typeof i,"internal-error",{appName:e}),o.refreshToken=i),r&&(P("string"==typeof r,"internal-error",{appName:e}),o.accessToken=r),s&&(P("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Of,this.toJSON())}_performRefresh(){return Is("not implemented")}}function aa(n,e){P("string"==typeof n||void 0===n,"internal-error",{appName:e})}class kl{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=rC(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new C_e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new mq(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return _(function*(){const i=yield _o(t,t.stsTokenManager.getToken(t.auth,e));return P(i,t.auth,"internal-error"),t.accessToken!==i&&(t.accessToken=i,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),i})()}getIdTokenResult(e){return function v_e(n){return mA.apply(this,arguments)}(this,e)}reload(){return function E_e(n){return vA.apply(this,arguments)}(this)}_assign(e){this!==e&&(P(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new kl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){P(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var i=this;return _(function*(){let r=!1;e.idToken&&e.idToken!==i.stsTokenManager.accessToken&&(i.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Pf(i)),yield i.auth._persistUserIfCurrent(i),r&&i.auth._notifyListenersIfCurrent(i)})()}delete(){var e=this;return _(function*(){const t=yield e.getIdToken();return yield _o(e,function g_e(n,e){return hA.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,a,l,c,u;const d=null!==(i=t.displayName)&&void 0!==i?i:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,b=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:E,emailVerified:I,isAnonymous:B,providerData:W,stsTokenManager:ae}=t;P(E&&ae,e,"internal-error");const X=Of.fromJSON(this.name,ae);P("string"==typeof E,e,"internal-error"),aa(d,e.name),aa(h,e.name),P("boolean"==typeof I,e,"internal-error"),P("boolean"==typeof B,e,"internal-error"),aa(f,e.name),aa(p,e.name),aa(m,e.name),aa(g,e.name),aa(b,e.name),aa(v,e.name);const be=new kl({uid:E,auth:e,email:h,emailVerified:I,displayName:d,isAnonymous:B,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:X,createdAt:b,lastLoginAt:v});return W&&Array.isArray(W)&&(be.providerData=W.map(Ct=>Object.assign({},Ct))),g&&(be._redirectEventId=g),be}static _fromIdTokenResponse(e,t,i=!1){return _(function*(){const r=new Of;r.updateFromServerResponse(t);const s=new kl({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Pf(s),s})()}}const gq=new Map;function yo(n){oa(n instanceof Function,"Expected a class definition");let e=gq.get(n);return e?(oa(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,gq.set(n,e),e)}const _q=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(function*(){return!0})()}_set(t,i){var r=this;return _(function*(){r.storage[t]=i})()}_get(t){var i=this;return _(function*(){const r=i.storage[t];return void 0===r?null:r})()}_remove(t){var i=this;return _(function*(){delete i.storage[t]})()}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})();function Gy(n,e,t){return`firebase:${n}:${e}:${t}`}class Ru{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Gy(this.userKey,r.apiKey,s),this.fullPersistenceKey=Gy("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return _(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?kl._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return _(function*(){if(t.persistence===e)return;const i=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,i?t.setCurrentUser(i):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return _(function*(){if(!t.length)return new Ru(yo(_q),e,i);const r=(yield Promise.all(t.map(function(){var c=_(function*(u){if(yield u._isAvailable())return u});return function(u){return c.apply(this,arguments)}}()))).filter(c=>c);let s=r[0]||yo(_q);const o=Gy(i,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=yield c._get(o);if(u){const d=kl._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch(u){}const l=r.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&l.length?(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var c=_(function*(u){if(u!==s)try{yield u._remove(o)}catch(d){}});return function(u){return c.apply(this,arguments)}}())),new Ru(s,e,i)):new Ru(s,e,i)})()}}function yq(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wq(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vq(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Eq(e))return"Blackberry";if(Dq(e))return"Webos";if(wA(e))return"Safari";if((e.includes("chrome/")||bq(e))&&!e.includes("edge/"))return"Chrome";if(Cq(e))return"Android";{const i=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==i?void 0:i.length))return i[1]}return"Other"}function vq(n=Rn()){return/firefox\//i.test(n)}function wA(n=Rn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bq(n=Rn()){return/crios\//i.test(n)}function wq(n=Rn()){return/iemobile/i.test(n)}function Cq(n=Rn()){return/android/i.test(n)}function Eq(n=Rn()){return/blackberry/i.test(n)}function Dq(n=Rn()){return/webos/i.test(n)}function Wy(n=Rn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Iq(n=Rn()){return Wy(n)||Cq(n)||Dq(n)||Eq(n)||/windows phone/i.test(n)||wq(n)}function Sq(n,e=[]){let t;switch(n){case"Browser":t=yq(Rn());break;case"Worker":t=`${yq(Rn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ho}/${i}`}function Tq(n,e){return EA.apply(this,arguments)}function EA(){return(EA=_(function*(n,e){return Gt(n,"GET","/v2/recaptchaConfig",Ot(n,e))})).apply(this,arguments)}function xq(n){return void 0!==n&&void 0!==n.enterprise}class Mq{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(t=>"EMAIL_PASSWORD_PROVIDER"===t.provider&&"OFF"!==t.enforcementState)}}function DA(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const s=Ds("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",function k_e(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(i)})}function kq(n){return`__${n}${Math.floor(1e6*Math.random())}`}class Rq{constructor(e){this.type="recaptcha-enterprise",this.auth=Nn(e)}verify(e="verify",t=!1){var i=this;return _(function*(){function s(){return s=_(function*(a){if(!t){if(null==a.tenantId&&null!=a._agentRecaptchaConfig)return a._agentRecaptchaConfig.siteKey;if(null!=a.tenantId&&void 0!==a._tenantRecaptchaConfigs[a.tenantId])return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(function(){var l=_(function*(c,u){Tq(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(void 0!==d.recaptchaKey){const h=new Mq(d);return null==a.tenantId?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,c(h.siteKey)}u(new Error("recaptcha Enterprise site key undefined"))}).catch(d=>{u(d)})});return function(c,u){return l.apply(this,arguments)}}())}),s.apply(this,arguments)}function o(a,l,c){const u=window.grecaptcha;xq(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{l(d)}).catch(()=>{l("NO_RECAPTCHA")})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,l)=>{(function r(a){return s.apply(this,arguments)})(i.auth).then(c=>{if(!t&&xq(window.grecaptcha))o(c,a,l);else{if("undefined"==typeof window)return void l(new Error("RecaptchaVerifier is only supported in browser"));DA("https://www.google.com/recaptcha/enterprise.js?render="+c).then(()=>{o(c,a,l)}).catch(u=>{l(u)})}}).catch(c=>{l(c)})})})()}}function la(n,e,t){return IA.apply(this,arguments)}function IA(){return(IA=_(function*(n,e,t,i=!1){const r=new Rq(n);let s;try{s=yield r.verify(t)}catch(a){s=yield r.verify(t,!0)}const o=Object.assign({},e);return Object.assign(o,i?{captchaResp:s}:{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})).apply(this,arguments)}class N_e{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=s=>new Promise((o,a)=>{try{o(e(s))}catch(l){a(l)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return _(function*(){if(t.auth.currentUser===e)return;const i=[];try{for(const r of t.queue)yield r(e),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const s of i)try{s()}catch(o){}throw t.auth._errorFactory.create("login-blocked",{originalMessage:null==r?void 0:r.message})}})()}}class F_e{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pq(this),this.idTokenSubscription=new Pq(this),this.beforeStateQueue=new N_e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cq,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){var i=this;return t&&(this._popupRedirectResolver=yo(t)),this._initializationPromise=this.queue(_(function*(){var r,s;if(!i._deleted&&(i.persistenceManager=yield Ru.create(i,e),!i._deleted)){if(null===(r=i._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{yield i._popupRedirectResolver._initialize(i)}catch(o){}yield i.initializeCurrentUser(t),i.lastNotifiedUid=(null===(s=i.currentUser)||void 0===s?void 0:s.uid)||null,!i._deleted&&(i._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return _(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return _(function*(){var i;const r=yield t.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId,l=null==s?void 0:s._redirectEventId,c=yield t.tryRedirectSignIn(e);(!a||a===l)&&(null==c?void 0:c.user)&&(s=c.user,o=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield t.beforeStateQueue.runMiddleware(s)}catch(a){s=r,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return P(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return _(function*(){let i=null;try{i=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(r){yield t._setRedirectUser(null)}return i})()}reloadAndSetCurrentUserOrClear(e){var t=this;return _(function*(){try{yield Pf(e)}catch(i){if("auth/network-request-failed"!==(null==i?void 0:i.code))return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function h_e(){if("undefined"==typeof navigator)return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return _(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return _(function*(){const i=e?Re(e):null;return i&&P(i.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(i&&i._clone(t))})()}_updateCurrentUser(e,t=!1){var i=this;return _(function*(){if(!i._deleted)return e&&P(i.tenantId===e.tenantId,i,"tenant-id-mismatch"),t||(yield i.beforeStateQueue.runMiddleware(e)),i.queue(_(function*(){yield i.directlySetCurrentUser(e),i.notifyAuthListeners()}))})()}signOut(){var e=this;return _(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(_(function*(){yield t.assertedPersistence.setPersistence(yo(e))}))}initializeRecaptchaConfig(){var e=this;return _(function*(){const t=yield Tq(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new Mq(t);null==e.tenantId?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.emailPasswordEnabled&&new Rq(e).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new vs("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var i=this;return _(function*(){const r=yield i.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return _(function*(){if(!t.redirectPersistenceManager){const i=e&&yo(e)||t._popupRedirectResolver;P(i,t,"argument-error"),t.redirectPersistenceManager=yield Ru.create(t,[yo(i._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return _(function*(){var i,r;return t._isInitialized&&(yield t.queue(_(function*(){}))),(null===(i=t._currentUser)||void 0===i?void 0:i._redirectEventId)===e?t._currentUser:(null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return _(function*(){if(e===t.currentUser)return t.queue(_(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return P(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof t?e.addObserver(t,i,r):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return _(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return P(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sq(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return _(function*(){var t;const i={"X-Client-Version":e.clientVersion};e.app.options.appId&&(i["X-Firebase-gmpid"]=e.app.options.appId);const r=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();r&&(i["X-Firebase-Client"]=r);const s=yield e._getAppCheckToken();return s&&(i["X-Firebase-AppCheck"]=s),i})()}_getAppCheckToken(){var e=this;return _(function*(){var t;const i=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return(null==i?void 0:i.error)&&function u_e(n,...e){$y.logLevel<=Ne.WARN&&$y.warn(`Auth (${ho}): ${n}`,...e)}(`Error while retrieving App Check token: ${i.error}`),null==i?void 0:i.token})()}}function Nn(n){return Re(n)}class Pq{constructor(e){this.auth=e,this.observer=null,this.addObserver=function Hde(n,e){const t=new $de(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return P(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Oq(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Nq(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class Fq{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Is("not implemented")}_getIdTokenResponse(e){return Is("not implemented")}_linkToIdToken(e,t){return Is("not implemented")}_getReauthenticationResolver(e){return Is("not implemented")}}function TA(){return(TA=_(function*(n,e){return Gt(n,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function xA(n,e){return MA.apply(this,arguments)}function MA(){return(MA=_(function*(n,e){return go(n,"POST","/v1/accounts:signInWithPassword",Ot(n,e))})).apply(this,arguments)}function VA(){return(VA=_(function*(n,e){return go(n,"POST","/v1/accounts:signInWithEmailLink",Ot(n,e))})).apply(this,arguments)}function BA(){return(BA=_(function*(n,e){return go(n,"POST","/v1/accounts:signInWithEmailLink",Ot(n,e))})).apply(this,arguments)}class Nf extends Fq{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Nf(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Nf(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return _(function*(){var i;switch(t.signInMethod){case"password":const r={returnSecureToken:!0,email:t._email,password:t._password,clientType:"CLIENT_TYPE_WEB"};if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){const s=yield la(e,r,"signInWithPassword");return xA(e,s)}return xA(e,r).catch(function(){var s=_(function*(o){if("auth/missing-recaptcha-token"===o.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const a=yield la(e,r,"signInWithPassword");return xA(e,a)}return Promise.reject(o)});return function(o){return s.apply(this,arguments)}}());case"emailLink":return function q_e(n,e){return VA.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:Vi(e,"internal-error")}})()}_linkToIdToken(e,t){var i=this;return _(function*(){switch(i.signInMethod){case"password":return function Vq(n,e){return TA.apply(this,arguments)}(e,{idToken:t,returnSecureToken:!0,email:i._email,password:i._password});case"emailLink":return function G_e(n,e){return BA.apply(this,arguments)}(e,{idToken:t,email:i._email,oobCode:i._password});default:Vi(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function vo(n,e){return UA.apply(this,arguments)}function UA(){return(UA=_(function*(n,e){return go(n,"POST","/v1/accounts:signInWithIdp",Ot(n,e))})).apply(this,arguments)}class Vf{constructor(e){var t,i,r,s,o,a;const l=mf(gf(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(i=l.oobCode)&&void 0!==i?i:null,d=function J_e(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);P(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(s=l.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=l.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function eye(n){const e=mf(gf(n)).link,t=e?mf(gf(e)).deep_link_id:null,i=mf(gf(n)).deep_link_id;return(i?mf(gf(i)).link:null)||i||t||e||n}(e);try{return new Vf(t)}catch(i){return null}}}let Bq=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return Nf._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const r=Vf.parseLink(i);return P(r,"argument-error"),Nf._fromEmailAndCode(t,r.code,r.tenantId)}}return n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink",n})();class ca{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class tye extends ca{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}function Yy(n,e){return GA.apply(this,arguments)}function GA(){return(GA=_(function*(n,e){return go(n,"POST","/v1/accounts:signUp",Ot(n,e))})).apply(this,arguments)}class Dr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return _(function*(){const s=yield kl._fromIdTokenResponse(e,i,r),o=Uq(i);return new Dr({user:s,providerId:o,_tokenResponse:i,operationType:t})})()}static _forOperation(e,t,i){return _(function*(){yield e._updateTokensIfNecessary(i,!0);const r=Uq(i);return new Dr({user:e,providerId:r,_tokenResponse:i,operationType:t})})()}}function Uq(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Xy extends er{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Xy.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new Xy(e,t,i,r)}}function jq(n,e,t,i){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?Xy._fromErrorAndOperation(n,s,e,i):s})}function QA(n,e){return YA.apply(this,arguments)}function YA(){return(YA=_(function*(n,e,t=!1){const i=yield _o(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Dr._forOperation(n,"link",i)})).apply(this,arguments)}function ZA(){return(ZA=_(function*(n,e,t=!1){const{auth:i}=n,r="reauthenticate";try{const s=yield _o(n,jq(i,r,e,n),t);P(s.idToken,i,"internal-error");const o=qy(s.idToken);P(o,i,"internal-error");const{sub:a}=o;return P(n.uid===a,i,"user-mismatch"),Dr._forOperation(n,r,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&Vi(i,"user-mismatch"),s}})).apply(this,arguments)}function zq(n,e){return JA.apply(this,arguments)}function JA(){return(JA=_(function*(n,e,t=!1){const i="signIn",r=yield jq(n,i,e),s=yield Dr._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})).apply(this,arguments)}function tx(){return(tx=_(function*(n,e){return zq(Nn(n),e)})).apply(this,arguments)}function lye(n,e,t){return px.apply(this,arguments)}function px(){return px=_(function*(n,e,t){var i;const r=Nn(n),s={returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"};let o;if(null===(i=r._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){const c=yield la(r,s,"signUpPassword");o=Yy(r,c)}else o=Yy(r,s).catch(function(){var c=_(function*(u){if("auth/missing-recaptcha-token"===u.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const d=yield la(r,s,"signUpPassword");return Yy(r,d)}return Promise.reject(u)});return function(u){return c.apply(this,arguments)}}());const a=yield o.catch(c=>Promise.reject(c)),l=yield Dr._fromIdTokenResponse(r,"signIn",a);return yield r._updateCurrentUser(l.user),l}),px.apply(this,arguments)}function cye(n,e,t){return function ex(n,e){return tx.apply(this,arguments)}(Re(n),Bq.credential(e,t))}function dye(n,e){return wx.apply(this,arguments)}function wx(){return(wx=_(function*(n,e){return Gt(n,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function hye(n,e){return Cx.apply(this,arguments)}function Cx(){return(Cx=_(function*(n,{displayName:e,photoURL:t}){if(void 0===e&&void 0===t)return;const i=Re(n),s={idToken:yield i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=yield _o(i,dye(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find(({providerId:l})=>"password"===l);a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),yield i._updateTokensIfNecessary(o)})).apply(this,arguments)}function Gq(n,e,t,i){return Re(n).onAuthStateChanged(e,t,i)}function bye(n){return Re(n).signOut()}const Jy="__sak";class Wq{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jy,"1"),this.storage.removeItem(Jy),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Aye=(()=>{class n extends Wq{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Iye(){const n=Rn();return wA(n)||Wy(n)}()&&function x_e(){try{return!(!window||window===window.top)}catch(n){return!1}}(),this.fallbackToPolling=Iq(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key)return void this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});const r=t.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(r);if(t.newValue!==a)null!==t.newValue?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!i)return}const s=()=>{const a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);!function A_e(){return function Nde(){const n=Rn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||o===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,i){var r=()=>super._set,s=this;return _(function*(){yield r().call(s,t,i),s.localCache[t]=JSON.stringify(i)})()}_get(t){var i=()=>super._get,r=this;return _(function*(){const s=yield i().call(r,t);return r.localCache[t]=JSON.stringify(s),s})()}_remove(t){var i=()=>super._remove,r=this;return _(function*(){yield i().call(r,t),delete r.localCache[t]})()}}return n.type="LOCAL",n})(),Kq=(()=>{class n extends Wq{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})();let Mye=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;const r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){var i=this;return _(function*(){const r=t,{eventId:s,eventType:o,data:a}=r.data,l=i.handlersMap[o];if(!(null==l?void 0:l.size))return;r.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const c=Array.from(l).map(function(){var d=_(function*(h){return h(r.origin,a)});return function(h){return d.apply(this,arguments)}}()),u=yield function xye(n){return Promise.all(n.map(function(){var e=_(function*(t){try{return{fulfilled:!0,value:yield t}}catch(i){return{fulfilled:!1,reason:i}}});return function(t){return e.apply(this,arguments)}}()))}(c);r.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:u})})()}_subscribe(t,i){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function xx(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(10*Math.random());return n+t}class kye{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){var r=this;return _(function*(){const s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,c)=>{const u=xx("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(f.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"))}}},r.handlers.add(a),s.port1.addEventListener("message",a.onMessage),r.target.postMessage({eventType:e,eventId:u,data:t},[s.port2])}).finally(()=>{a&&r.removeMessageHandler(a)})})()}}function fn(){return window}function Mx(){return void 0!==fn().WorkerGlobalScope&&"function"==typeof fn().importScripts}function kx(){return(kx=_(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(n){return null}})).apply(this,arguments)}const Qq="firebaseLocalStorageDb",ev="firebaseLocalStorage",Yq="fbase_key";class Uf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function tv(n,e){return n.transaction([ev],e?"readwrite":"readonly").objectStore(ev)}function Rx(){const n=indexedDB.open(Qq,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(ev,{keyPath:Yq})}catch(r){t(r)}}),n.addEventListener("success",_(function*(){const i=n.result;i.objectStoreNames.contains(ev)?e(i):(i.close(),yield function Lye(){const n=indexedDB.deleteDatabase(Qq);return new Uf(n).toPromise()}(),e(yield Rx()))}))})}function Xq(n,e,t){return Px.apply(this,arguments)}function Px(){return(Px=_(function*(n,e,t){const i=tv(n,!0).put({[Yq]:e,value:t});return new Uf(i).toPromise()})).apply(this,arguments)}function Ox(){return(Ox=_(function*(n,e){const t=tv(n,!1).get(e),i=yield new Uf(t).toPromise();return void 0===i?null:i.value})).apply(this,arguments)}function Zq(n,e){const t=tv(n,!0).delete(e);return new Uf(t).toPromise()}const jye=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return _(function*(){return t.db||(t.db=yield Rx()),t.db})()}_withRetries(t){var i=this;return _(function*(){let r=0;for(;;)try{const s=yield i._openDb();return yield t(s)}catch(s){if(r++>3)throw s;i.db&&(i.db.close(),i.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return _(function*(){return Mx()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return _(function*(){t.receiver=Mye._getInstance(function Nye(){return Mx()?self:null}()),t.receiver._subscribe("keyChanged",function(){var i=_(function*(r,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(r,s){return i.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var i=_(function*(r,s){return["keyChanged"]});return function(r,s){return i.apply(this,arguments)}}())})()}initializeSender(){var t=this;return _(function*(){var i,r;if(t.activeServiceWorker=yield function Pye(){return kx.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new kye(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);!s||(null===(i=s[0])||void 0===i?void 0:i.fulfilled)&&(null===(r=s[0])||void 0===r?void 0:r.value.includes("keyChanged"))&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var i=this;return _(function*(){if(i.sender&&i.activeServiceWorker&&function Oye(){var n;return(null===(n=null==navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null}()===i.activeServiceWorker)try{yield i.sender._send("keyChanged",{key:t},i.serviceWorkerReceiverAvailable?800:50)}catch(r){}})()}_isAvailable(){return _(function*(){try{if(!indexedDB)return!1;const t=yield Rx();return yield Xq(t,Jy,"1"),yield Zq(t,Jy),!0}catch(t){}return!1})()}_withPendingWrite(t){var i=this;return _(function*(){i.pendingWrites++;try{yield t()}finally{i.pendingWrites--}})()}_set(t,i){var r=this;return _(function*(){return r._withPendingWrite(_(function*(){return yield r._withRetries(s=>Xq(s,t,i)),r.localCache[t]=i,r.notifyServiceWorker(t)}))})()}_get(t){var i=this;return _(function*(){const r=yield i._withRetries(s=>function Vye(n,e){return Ox.apply(this,arguments)}(s,t));return i.localCache[t]=r,r})()}_remove(t){var i=this;return _(function*(){return i._withPendingWrite(_(function*(){return yield i._withRetries(r=>Zq(r,t)),delete i.localCache[t],i.notifyServiceWorker(t)}))})()}_poll(){var t=this;return _(function*(){const i=yield t._withRetries(o=>{const a=tv(o,!1).getAll();return new Uf(a).toPromise()});if(!i)return[];if(0!==t.pendingWrites)return[];const r=[],s=new Set;for(const{fbase_key:o,value:a}of i)s.add(o),JSON.stringify(t.localCache[o])!==JSON.stringify(a)&&(t.notifyListeners(o,a),r.push(o));for(const o of Object.keys(t.localCache))t.localCache[o]&&!s.has(o)&&(t.notifyListeners(o,null),r.push(o));return r})()}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const s of Array.from(r))s(i)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(_(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function Pl(n,e){return e?yo(e):(P(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}kq("rcb"),new Mf(3e4,6e4);class $x extends Fq{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ive(n){return zq(n.auth,new $x(n),n.bypassAuthState)}function rve(n){const{auth:e,user:t}=n;return P(t,e,"internal-error"),function $q(n,e){return ZA.apply(this,arguments)}(t,new $x(n),n.bypassAuthState)}function sve(n){return zx.apply(this,arguments)}function zx(){return(zx=_(function*(n){const{auth:e,user:t}=n;return P(t,e,"internal-error"),QA(t,new $x(n),n.bypassAuthState)})).apply(this,arguments)}new Mf(2e3,1e4);const jf=new Map;class lve extends class ove{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=_(function*(i,r){e.pendingPromise={resolve:i,reject:r};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(i,r){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return _(function*(){const{urlResponse:i,sessionId:r,postBody:s,tenantId:o,error:a,type:l}=e;if(a)return void t.reject(a);const c={auth:t.auth,requestUri:i,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(l)(c))}catch(u){t.reject(u)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ive;case"linkViaPopup":case"linkViaRedirect":return sve;case"reauthViaPopup":case"reauthViaRedirect":return rve;default:Vi(this.auth,"internal-error")}}resolve(e){oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){var e=()=>super.execute,t=this;return _(function*(){let i=jf.get(t.auth._key());if(!i){try{const s=(yield function cve(n,e){return Qx.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;i=()=>Promise.resolve(s)}catch(r){i=()=>Promise.reject(r)}jf.set(t.auth._key(),i)}return t.bypassAuthState||jf.set(t.auth._key(),()=>Promise.resolve(null)),i()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,i=this;return _(function*(){if("signInViaRedirect"===e.type)return t().call(i,e);if("unknown"!==e.type){if(e.eventId){const r=yield i.auth._redirectUserForId(e.eventId);if(r)return i.user=r,t().call(i,e);i.resolve(null)}}else i.resolve(null)})()}onExecution(){return _(function*(){})()}cleanUp(){}}function Qx(){return(Qx=_(function*(n,e){const t=tG(e),i=eG(n);if(!(yield i._isAvailable()))return!1;const r="true"===(yield i._get(t));return yield i._remove(t),r})).apply(this,arguments)}function uve(n,e){jf.set(n._key(),e)}function eG(n){return yo(n._redirectPersistence)}function tG(n){return Gy("pendingRedirect",n.config.apiKey,n.name)}function nG(n,e){return nM.apply(this,arguments)}function nM(){return(nM=_(function*(n,e,t=!1){const i=Nn(n),r=Pl(i,e),o=yield new lve(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})).apply(this,arguments)}class mve{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function gve(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sG(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!sG(e)){const r=(null===(i=e.error.code)||void 0===i?void 0:i.split("auth/")[1])||"internal-error";t.onError(Ds(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(rG(e))}saveEventToCache(e){this.cachedEventUids.add(rG(e)),this.lastProcessedEventTime=Date.now()}}function rG(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function sG({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===(null==e?void 0:e.code)}function _ve(n){return rM.apply(this,arguments)}function rM(){return(rM=_(function*(n,e={}){return Gt(n,"GET","/v1/projects",e)})).apply(this,arguments)}const yve=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vve=/^https?/;function sM(){return(sM=_(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield _ve(n);for(const t of e)try{if(wve(t))return}catch(i){}Vi(n,"unauthorized-domain")})).apply(this,arguments)}function wve(n){const e=xf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return""===o.hostname&&""===i?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&o.hostname===i}if(!vve.test(t))return!1;if(yve.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Cve=new Mf(3e4,6e4);function oG(){const n=fn().___jsl;if(null==n?void 0:n.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let iv=null;function Dve(n){return iv=iv||function Eve(n){return new Promise((e,t)=>{var i,r,s;function o(){oG(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{oG(),t(Ds(n,"network-request-failed"))},timeout:Cve.get()})}if(null===(r=null===(i=fn().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=fn().gapi)||void 0===s?void 0:s.load)){const a=kq("iframefcb");return fn()[a]=()=>{gapi.load?o():t(Ds(n,"network-request-failed"))},DA(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>t(l))}o()}}).catch(e=>{throw iv=null,e})}(n),iv}const Ive=new Mf(5e3,15e3),Ave={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xve=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Mve(n){const e=n.config;P(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?lA(e,"emulator/auth/iframe"):`https://${n.config.authDomain}/__/auth/iframe`,i={apiKey:e.apiKey,appName:n.name,v:ho},r=xve.get(n.config.apiHost);r&&(i.eid=r);const s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${pf(i).slice(1)}`}function oM(){return oM=_(function*(n){const e=yield Dve(n),t=fn().gapi;return P(t,n,"internal-error"),e.open({where:document.body,url:Mve(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ave,dontclear:!0},i=>new Promise(function(){var r=_(function*(s,o){yield i.restyle({setHideOnLeave:!1});const a=Ds(n,"network-request-failed"),l=fn().setTimeout(()=>{o(a)},Ive.get());function c(){fn().clearTimeout(l),s(i)}i.ping(c).then(c,()=>{o(a)})});return function(s,o){return r.apply(this,arguments)}}()))}),oM.apply(this,arguments)}const Rve={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class aG{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const jve=encodeURIComponent("fac");function lG(n,e,t,i,r,s){return aM.apply(this,arguments)}function aM(){return(aM=_(function*(n,e,t,i,r,s){P(n.config.authDomain,n,"auth-domain-config-required"),P(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ho,eventId:r};if(e instanceof ca){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Cy(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof tye){const u=e.getScopes().filter(d=>""!==d);u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=yield n._getAppCheckToken(),c=l?`#${jve}=${encodeURIComponent(l)}`:"";return`${Hve(n)}?${pf(a).slice(1)}${c}`})).apply(this,arguments)}function Hve({config:n}){return n.emulator?lA(n,"emulator/auth/handler"):`https://${n.authDomain}/__/auth/handler`}const lM="webStorageSupport",zve=class $ve{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kq,this._completeRedirectFn=nG,this._overrideRedirectResult=uve}_openPopup(e,t,i,r){var s=this;return _(function*(){var o;oa(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=yield lG(e,t,i,xf(),r);return function Lve(n,e,t,i=500,r=600){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Rve),{width:i.toString(),height:r.toString(),top:s,left:o}),c=Rn().toLowerCase();t&&(a=bq(c)?"_blank":t),vq(c)&&(e=e||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(function T_e(n=Rn()){var e;return Wy(n)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function Vve(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}(e||"",a),new aG(null);const d=window.open(e||"",a,u);P(d,n,"popup-blocked");try{d.focus()}catch(h){}return new aG(d)}(e,a,xx())})()}_openRedirect(e,t,i,r){var s=this;return _(function*(){return yield s._originValidation(e),function Rye(n){fn().location.href=n}(yield lG(e,t,i,xf(),r)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(oa(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){var t=this;return _(function*(){const i=yield function kve(n){return oM.apply(this,arguments)}(e),r=new mve(e);return i.register("authEvent",s=>(P(null==s?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:r},t.iframes[e._key()]=i,r})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(lM,{type:lM},r=>{var s;const o=null===(s=null==r?void 0:r[0])||void 0===s?void 0:s[lM];void 0!==o&&t(!!o),Vi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function bve(n){return sM.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Iq()||wA()||Wy()}};var dG="@firebase/auth";class qve{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return _(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((null==i?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){P(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Qve=y$("authIdTokenMaxAge")||300;let fG=null;const Yve=n=>function(){var e=_(function*(t){const i=t&&(yield t.getIdTokenResult()),r=i&&((new Date).getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>Qve)return;const s=null==i?void 0:i.token;fG!==s&&(fG=s,yield fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function Xve(n=_f()){const e=ia(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function L_e(n,e){const t=ia(n,"auth");if(t.isInitialized()){const r=t.getImmediate();if(Dy(t.getOptions(),null!=e?e:{}))return r;Vi(r,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:zve,persistence:[jye,Aye,Kq]}),i=y$("authTokenSyncURL");if(i){const s=Yve(i);(function vye(n,e,t){Re(n).beforeAuthStateChanged(e,t)})(t,s,()=>s(t.currentUser)),function yye(n,e,t,i){Re(n).onIdTokenChanged(e,t,i)}(t,o=>s(o))}const r=g$("auth");return r&&function B_e(n,e,t){const i=Nn(n);P(i._canInitEmulator,i,"emulator-config-failed"),P(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(null==t?void 0:t.disableWarnings),s=Oq(e),{host:o,port:a}=function U_e(n){const e=Oq(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:Nq(i.substr(s.length+1))}}{const[s,o]=i.split(":");return{host:s,port:Nq(o)}}}(e);i.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function j_e(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${r}`),t}function Zve(n){return new it(function(e){return{unsubscribe:Gq(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e))}})}!function Wve(n){Kn(new Pn("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;P(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sq(n)},c=new F_e(i,r,s,l);return function V_e(n,e){const t=(null==e?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(yo);(null==e?void 0:e.errorMap)&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,null==e?void 0:e.popupRedirectResolver)}(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Kn(new Pn("auth-internal",e=>{const t=Nn(e.getProvider("auth").getImmediate());return new qve(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ut(dG,"0.23.2",function Gve(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),ut(dG,"0.23.2","esm2017")}("Browser");class bo{constructor(e){return e}}class sv{constructor(){return Ef("auth")}}const uM=new k("angularfire2.auth-instances");function tbe(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new bo(i)}}const nbe={provide:sv,deps:[[new Ze,uM]]},ibe={provide:bo,useFactory:function ebe(n,e){const t=Cf("auth",n,e);return t&&new bo(t)},deps:[[new Ze,uM],sa]};let rbe=(()=>{class n{constructor(){ut("angularfire",Au.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({providers:[ibe,nbe]}),n})();function sbe(n,...e){return{ngModule:rbe,providers:[{provide:uM,useFactory:tbe(n),multi:!0,deps:[oe,Je,Df,If,[new Ze,Af],...e]}]}}const obe=Ie(Zve,!0),abe=Ie(lye,!0),lbe=Ie(Xve,!0),Ou=Ie(Gq,!0),cbe=Ie(cye,!0),ube=Ie(bye,!0),mG=Ie(hye,!0);var j,dbe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Wr={},dM=dM||{},de=dbe||self;function ov(){}function av(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Hf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var hM="closure_uid_"+(1e9*Math.random()>>>0),fbe=0;function pbe(n,e,t){return n.call.apply(n.bind,arguments)}function mbe(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function ui(n,e,t){return(ui=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?pbe:mbe).apply(null,arguments)}function lv(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Fn(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function ua(){this.s=this.s,this.o=this.o}ua.prototype.s=!1,ua.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function hbe(n){Object.prototype.hasOwnProperty.call(n,hM)&&n[hM]||(n[hM]=++fbe)}(this)},ua.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const gG=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function fM(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function _G(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(av(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let o=0;o<s;o++)n[r+o]=i[o]}else n.push(i)}}function di(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}di.prototype.h=function(){this.defaultPrevented=!0};var _be=function(){if(!de.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{de.addEventListener("test",ov,e),de.removeEventListener("test",ov,e)}catch(t){}return n}();function cv(n){return/^[\s\xa0]*$/.test(n)}var yG=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function pM(n,e){return n<e?-1:n>e?1:0}function uv(){var n=de.navigator;return n&&(n=n.userAgent)?n:""}function Ss(n){return-1!=uv().indexOf(n)}function mM(n){return mM[" "](n),n}function vG(n,e,t){return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}mM[" "]=ov;var dv,n,ybe=Ss("Opera"),Nu=Ss("Trident")||Ss("MSIE"),bG=Ss("Edge"),gM=bG||Nu,wG=Ss("Gecko")&&!(-1!=uv().toLowerCase().indexOf("webkit")&&!Ss("Edge"))&&!(Ss("Trident")||Ss("MSIE"))&&!Ss("Edge"),vbe=-1!=uv().toLowerCase().indexOf("webkit")&&!Ss("Edge");function CG(){var n=de.document;return n?n.documentMode:void 0}e:{var _M="",yM=(n=uv(),wG?/rv:([^\);]+)(\)|;)/.exec(n):bG?/Edge\/([\d\.]+)/.exec(n):Nu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):vbe?/WebKit\/(\S+)/.exec(n):ybe?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(yM&&(_M=yM?yM[1]:""),Nu){var vM=CG();if(null!=vM&&vM>parseFloat(_M)){dv=String(vM);break e}}dv=_M}var bbe={},Cbe=de.document&&Nu&&(CG()||parseInt(dv,10))||void 0;function $f(n,e){if(di.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(wG){e:{try{mM(e.nodeName);var r=!0;break e}catch(s){}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Ebe[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&$f.$.h.call(this)}}Fn($f,di);var Ebe={2:"touch",3:"pen",4:"mouse"};$f.prototype.h=function(){$f.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var zf="closure_listenable_"+(1e6*Math.random()|0),Dbe=0;function Ibe(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.la=r,this.key=++Dbe,this.fa=this.ia=!1}function hv(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function wM(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function DG(n){const e={};for(const t in n)e[t]=n[t];return e}const IG="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function SG(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let s=0;s<IG.length;s++)t=IG[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function fv(n){this.src=n,this.g={},this.h=0}function CM(n,e){var t=e.type;if(t in n.g){var s,i=n.g[t],r=gG(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(hv(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function EM(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==i)return r}return-1}fv.prototype.add=function(n,e,t,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=EM(n,e,i,r);return-1<o?(e=n[o],t||(e.ia=!1)):((e=new Ibe(e,this.src,s,!!i,r)).ia=t,n.push(e)),e};var DM="closure_lm_"+(1e6*Math.random()|0),IM={};function TG(n,e,t,i,r){if(i&&i.once)return xG(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)TG(n,e[s],t,i,r);return null}return t=xM(t),n&&n[zf]?n.O(e,t,Hf(i)?!!i.capture:!!i,r):AG(n,e,t,!1,i,r)}function AG(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var o=Hf(r)?!!r.capture:!!r,a=TM(n);if(a||(n[DM]=a=new fv(n)),(t=a.add(e,t,i,o,s)).proxy)return t;if(i=function Sbe(){const e=Tbe;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)_be||(r=o),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(kG(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function xG(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)xG(n,e[s],t,i,r);return null}return t=xM(t),n&&n[zf]?n.P(e,t,Hf(i)?!!i.capture:!!i,r):AG(n,e,t,!0,i,r)}function MG(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)MG(n,e[s],t,i,r);else i=Hf(i)?!!i.capture:!!i,t=xM(t),n&&n[zf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=EM(s=n.g[e],t,i,r))&&(hv(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=TM(n))&&(e=n.g[e.toString()],n=-1,e&&(n=EM(e,t,i,r)),(t=-1<n?e[n]:null)&&SM(t))}function SM(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[zf])CM(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(kG(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=TM(e))?(CM(t,n),0==t.h&&(t.src=null,e[DM]=null)):hv(n)}}}function kG(n){return n in IM?IM[n]:IM[n]="on"+n}function Tbe(n,e){if(n.fa)n=!0;else{e=new $f(e,this);var t=n.listener,i=n.la||n.src;n.ia&&SM(n),n=t.call(i,e)}return n}function TM(n){return(n=n[DM])instanceof fv?n:null}var AM="__closure_events_fn_"+(1e9*Math.random()>>>0);function xM(n){return"function"==typeof n?n:(n[AM]||(n[AM]=function(e){return n.handleEvent(e)}),n[AM])}function Ln(){ua.call(this),this.i=new fv(this),this.S=this,this.J=null}function Xn(n,e){var t,i=n.J;if(i)for(t=[];i;i=i.J)t.push(i);if(n=n.S,i=e.type||e,"string"==typeof e)e=new di(e,n);else if(e instanceof di)e.target=e.target||n;else{var r=e;SG(e=new di(i,n),r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];r=pv(o,i,!0,e)&&r}if(r=pv(o=e.g=n,i,!0,e)&&r,r=pv(o,i,!1,e)&&r,t)for(s=0;s<t.length;s++)r=pv(o=e.g=t[s],i,!1,e)&&r}function pv(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var a=o.listener,l=o.la||o.src;o.ia&&CM(n.i,o),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}Fn(Ln,ua),Ln.prototype[zf]=!0,Ln.prototype.removeEventListener=function(n,e,t,i){MG(this,n,e,t,i)},Ln.prototype.N=function(){if(Ln.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)hv(t[i]);delete n.g[e],n.h--}}this.J=null},Ln.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},Ln.prototype.P=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var MM=de.JSON.stringify;function Abe(){var n=OG;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var kM,RG=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Mbe,n=>n.reset());class Mbe{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function kbe(n){de.setTimeout(()=>{throw n},0)}function PG(n,e){kM||function Rbe(){var n=de.Promise.resolve(void 0);kM=function(){n.then(Pbe)}}(),RM||(kM(),RM=!0),OG.add(n,e)}var RM=!1,OG=new class xbe{constructor(){this.h=this.g=null}add(e,t){const i=RG.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function Pbe(){for(var n;n=Abe();){try{n.h.call(n.g)}catch(t){kbe(t)}var e=RG;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}RM=!1}function mv(n,e){Ln.call(this),this.h=n||1,this.g=e||de,this.j=ui(this.qb,this),this.l=Date.now()}function PM(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function OM(n,e,t){if("function"==typeof n)t&&(n=ui(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ui(n.handleEvent,n)}return 2147483647<Number(e)?-1:de.setTimeout(n,e||0)}function NG(n){n.g=OM(()=>{n.g=null,n.i&&(n.i=!1,NG(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Fn(mv,Ln),(j=mv.prototype).ga=!1,j.T=null,j.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Xn(this,"tick"),this.ga&&(PM(this),this.start()))}},j.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},j.N=function(){mv.$.N.call(this),PM(this),delete this.g};class Obe extends ua{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:NG(this)}N(){super.N(),this.g&&(de.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qf(n){ua.call(this),this.h=n,this.g={}}Fn(qf,ua);var FG=[];function LG(n,e,t,i){Array.isArray(t)||(t&&(FG[0]=t.toString()),t=FG);for(var r=0;r<t.length;r++){var s=TG(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function VG(n){wM(n.g,function(e,t){this.g.hasOwnProperty(t)&&SM(e)},n),n.g={}}function gv(){this.g=!0}function Fu(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Vbe(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return MM(t)}catch(a){return e}}(n,t)+(i?" "+i:"")})}qf.prototype.N=function(){qf.$.N.call(this),VG(this)},qf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},gv.prototype.Ea=function(){this.g=!1},gv.prototype.info=function(){};var Ol={},BG=null;function _v(){return BG=BG||new Ln}function UG(n){di.call(this,Ol.Ta,n)}function Gf(n){const e=_v();Xn(e,new UG(e))}function jG(n,e){di.call(this,Ol.STAT_EVENT,n),this.stat=e}function Si(n){const e=_v();Xn(e,new jG(e,n))}function HG(n,e){di.call(this,Ol.Ua,n),this.size=e}function Wf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return de.setTimeout(function(){n()},e)}Ol.Ta="serverreachability",Fn(UG,di),Ol.STAT_EVENT="statevent",Fn(jG,di),Ol.Ua="timingevent",Fn(HG,di);var yv={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},$G={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function NM(){}function qG(){}NM.prototype.h=null;var VM,Kf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function FM(){di.call(this,"d")}function LM(){di.call(this,"c")}function vv(){}function Qf(n,e,t,i){this.l=n,this.j=e,this.m=t,this.W=i||1,this.U=new qf(this),this.P=Bbe,this.V=new mv(n=gM?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new GG}function GG(){this.i=null,this.g="",this.h=!1}Fn(FM,di),Fn(LM,di),Fn(vv,NM),vv.prototype.g=function(){return new XMLHttpRequest},vv.prototype.i=function(){return{}},VM=new vv;var Bbe=45e3,BM={},bv={};function UM(n,e,t){n.L=1,n.v=Dv(wo(e)),n.s=t,n.S=!0,WG(n,null)}function WG(n,e){n.G=Date.now(),Yf(n),n.A=wo(n.v);var t=n.A,i=n.W;Array.isArray(i)||(i=[String(i)]),i4(t.i,"t",i),n.C=0,t=n.l.I,n.h=new GG,n.g=T4(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Obe(ui(n.Pa,n,n.g),n.O)),LG(n.U,n.g,"readystatechange",n.nb),e=n.I?DG(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Gf(),function Nbe(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.W,n.s)}function KG(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function QG(n,e,t){let r,i=!0;for(;!n.J&&n.C<t.length;){if(r=Ube(n,t),r==bv){4==e&&(n.o=4,Si(14),i=!1),Fu(n.j,n.m,null,"[Incomplete Response]");break}if(r==BM){n.o=4,Si(15),Fu(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}Fu(n.j,n.m,r,null),jM(n,r)}KG(n)&&r!=bv&&r!=BM&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Si(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.ca&&(n.ca=!0,(e=n.l).g==n&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),QM(e),e.L=!0,Si(11))):(Fu(n.j,n.m,t,"[Invalid Chunked Response]"),Nl(n),Xf(n))}function Ube(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?bv:(t=Number(e.substring(t,i)),isNaN(t)?BM:(i+=1)+t>e.length?bv:(e=e.substr(i,t),n.C=i+t,e))}function Yf(n){n.Y=Date.now()+n.P,YG(n,n.P)}function YG(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Wf(ui(n.lb,n),e)}function wv(n){n.B&&(de.clearTimeout(n.B),n.B=null)}function Xf(n){0==n.l.H||n.J||E4(n.l,n)}function Nl(n){wv(n);var e=n.M;e&&"function"==typeof e.ra&&e.ra(),n.M=null,PM(n.V),VG(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.ra())}function jM(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||HM(t.h,n)))if(!n.K&&HM(t.h,n)&&3==t.H){try{var i=t.Ja.g.parse(e)}catch(c){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0])e:if(t.u)t.Fa=r[1],0<t.Fa-t.V&&37500>r[2]&&t.M&&0==t.A&&!t.v&&(t.v=Wf(ui(t.ib,t),6e3));else{if(t.g){if(!(t.g.G+3e3<n.G))break e;Mv(t),Av(t)}KM(t),Si(18)}if(1>=o4(t.h)&&t.na){try{t.na()}catch(c){}t.na=void 0}}else Ll(t,11)}else if((n.K||t.g==n)&&Mv(t),!cv(e))for(r=t.Ja.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(t.V=c[0],c=c[1],2==t.H)if("c"==c[0]){t.J=c[1],t.oa=c[2];const u=c[3];null!=u&&(t.qa=u,t.j.info("VER="+t.qa));const d=c[4];null!=d&&(t.Ga=d,t.j.info("SVER="+t.Ga));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(t.K=i=1.5*h,t.j.info("backChannelRequestTimeoutMs_="+i)),i=t;const f=n.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=i.h;s.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&($M(s,s.h),s.h=null))}if(i.F){const m=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(i.Da=m,xt(i.G,i.F,m))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-n.G,t.j.info("Handshake RTT: "+t.S+"ms"));var o=n;if((i=t).wa=S4(i,i.I?i.oa:null,i.Y),o.K){a4(i.h,o);var a=o,l=i.K;l&&a.setTimeout(l),a.B&&(wv(a),Yf(a)),i.g=o}else w4(i);0<t.i.length&&xv(t)}else"stop"!=c[0]&&"close"!=c[0]||Ll(t,7);else 3==t.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Ll(t,7):WM(t):"noop"!=c[0]&&t.l&&t.l.Aa(c),t.A=0)}Gf()}catch(c){}}function XG(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(av(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Hbe(n){if(n.sa&&"function"==typeof n.sa)return n.sa();if(!n.Z||"function"!=typeof n.Z){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(av(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function jbe(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(av(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}(j=Qf.prototype).setTimeout=function(n){this.P=n},j.nb=function(n){n=n.target;const e=this.M;e&&3==Co(n)?e.l():this.Pa(n)},j.Pa=function(n){try{if(n==this.g)e:{const u=Co(this.g);var e=this.g.Ia();if(this.g.da(),!(3>u)&&(3!=u||gM||this.g&&(this.h.h||this.g.ja()||m4(this.g)))){this.J||4!=u||7==e||Gf(),wv(this);var t=this.g.da();this.aa=t;t:if(KG(this)){var i=m4(this.g);n="";var r=i.length,s=4==Co(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Nl(this),Xf(this);var o="";break t}this.h.i=new de.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==t,function Fbe(n,e,t,i,r,s,o){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,u,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!cv(a)){var c=a;break t}}c=null}if(!(t=c)){this.i=!1,this.o=3,Si(12),Nl(this),Xf(this);break e}Fu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jM(this,t)}this.S?(QG(this,u,o),gM&&this.i&&3==u&&(LG(this.U,this.V,"tick",this.mb),this.V.start())):(Fu(this.j,this.m,o,null),jM(this,o)),4==u&&Nl(this),this.i&&!this.J&&(4==u?E4(this.l,this):(this.i=!1,Yf(this)))}else 400==t&&0<o.indexOf("Unknown SID")?(this.o=3,Si(12)):(this.o=0,Si(13)),Nl(this),Xf(this)}}}catch(u){}},j.mb=function(){if(this.g){var n=Co(this.g),e=this.g.ja();this.C<e.length&&(wv(this),QG(this,n,e),this.i&&4!=n&&Yf(this))}},j.cancel=function(){this.J=!0,Nl(this)},j.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Lbe(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Gf(),Si(17)),Nl(this),this.o=2,Xf(this)):YG(this,this.Y-n)};var ZG=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fl(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Fl){this.h=void 0!==e?e:n.h,Cv(this,n.j),this.s=n.s,this.g=n.g,Ev(this,n.m),this.l=n.l,e=n.i;var t=new ep;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),JG(this,t),this.o=n.o}else n&&(t=String(n).match(ZG))?(this.h=!!e,Cv(this,t[1]||"",!0),this.s=Zf(t[2]||""),this.g=Zf(t[3]||"",!0),Ev(this,t[4]),this.l=Zf(t[5]||"",!0),JG(this,t[6]||"",!0),this.o=Zf(t[7]||"")):(this.h=!!e,this.i=new ep(null,this.h))}function wo(n){return new Fl(n)}function Cv(n,e,t){n.j=t?Zf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ev(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function JG(n,e,t){e instanceof ep?(n.i=e,function Qbe(n,e){e&&!n.j&&(da(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(t4(this,i),i4(this,r,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Jf(e,Wbe)),n.i=new ep(e,n.h))}function xt(n,e,t){n.i.set(e,t)}function Dv(n){return xt(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Zf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Jf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,zbe),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function zbe(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Fl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Jf(e,e4,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Jf(e,e4,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Jf(t,"/"==t.charAt(0)?Gbe:qbe,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Jf(t,Kbe)),n.join("")};var e4=/[#\/\?@]/g,qbe=/[#\?:]/g,Gbe=/[#\?]/g,Wbe=/[#\?@]/g,Kbe=/#/g;function ep(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function da(n){n.g||(n.g=new Map,n.h=0,n.i&&function $be(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function t4(n,e){da(n),e=Lu(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function n4(n,e){return da(n),e=Lu(n,e),n.g.has(e)}function i4(n,e,t){t4(n,e),0<t.length&&(n.i=null,n.g.set(Lu(n,e),fM(t)),n.h+=t.length)}function Lu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function r4(n){this.l=n||Xbe,n=de.PerformanceNavigationTiming?0<(n=de.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(de.g&&de.g.Ka&&de.g.Ka()&&de.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(j=ep.prototype).add=function(n,e){da(this),this.i=null,n=Lu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},j.forEach=function(n,e){da(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)},j.sa=function(){da(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let s=0;s<r.length;s++)t.push(e[i])}return t},j.Z=function(n){da(this);let e=[];if("string"==typeof n)n4(this,n)&&(e=e.concat(this.g.get(Lu(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},j.set=function(n,e){return da(this),this.i=null,n4(this,n=Lu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},j.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},j.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),n.push(r)}}return this.i=n.join("&")};var Xbe=10;function s4(n){return!!n.h||!!n.g&&n.g.size>=n.j}function o4(n){return n.h?1:n.g?n.g.size:0}function HM(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function $M(n,e){n.g?n.g.add(e):n.h=e}function a4(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function l4(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return fM(n.i)}function zM(){}function Zbe(){this.g=new zM}function Jbe(n,e,t){const i=t||"";try{XG(n,function(r,s){let o=r;Hf(r)&&(o=MM(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function Iv(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(s){}}function tp(n){this.l=n.fc||null,this.j=n.ob||!1}function Sv(n,e){Ln.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=qM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}r4.prototype.cancel=function(){if(this.i=l4(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},zM.prototype.stringify=function(n){return de.JSON.stringify(n,void 0)},zM.prototype.parse=function(n){return de.JSON.parse(n,void 0)},Fn(tp,NM),tp.prototype.g=function(){return new Sv(this.l,this.j)},tp.prototype.i=function(n){return function(){return n}}({}),Fn(Sv,Ln);var qM=0;function c4(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function np(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ip(n)}function ip(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(j=Sv.prototype).open=function(n,e){if(this.readyState!=qM)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ip(this)},j.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||de).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},j.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,np(this)),this.readyState=qM},j.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ip(this)),this.g&&(this.readyState=3,ip(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==de.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;c4(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},j.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?np(this):ip(this),3==this.readyState&&c4(this)}},j.Za=function(n){this.g&&(this.response=this.responseText=n,np(this))},j.Ya=function(n){this.g&&(this.response=n,np(this))},j.ka=function(){this.g&&np(this)},j.setRequestHeader=function(n,e){this.v.append(n,e)},j.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},j.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Sv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var twe=de.JSON.parse;function Wt(n){Ln.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=u4,this.L=this.M=!1}Fn(Wt,Ln);var u4="",nwe=/^https?$/i,iwe=["POST","PUT"];function d4(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,h4(n),Tv(n)}function h4(n){n.F||(n.F=!0,Xn(n,"complete"),Xn(n,"error"))}function f4(n){if(n.h&&void 0!==dM&&(!n.C[1]||4!=Co(n)||2!=n.da()))if(n.v&&4==Co(n))OM(n.La,0,n);else if(Xn(n,"readystatechange"),4==Co(n)){n.h=!1;try{const a=n.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===a){var r=String(n.I).match(ZG)[1]||null;if(!r&&de.self&&de.self.location){var s=de.self.location.protocol;r=s.substr(0,s.length-1)}i=!nwe.test(r?r.toLowerCase():"")}t=i}if(t)Xn(n,"complete"),Xn(n,"success");else{n.m=6;try{var o=2<Co(n)?n.g.statusText:""}catch(l){o=""}n.j=o+" ["+n.da()+"]",h4(n)}}finally{Tv(n)}}}function Tv(n,e){if(n.g){p4(n);const t=n.g,i=n.C[0]?ov:null;n.g=null,n.C=null,e||Xn(n,"ready");try{t.onreadystatechange=i}catch(r){}}}function p4(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(de.clearTimeout(n.A),n.A=null)}function Co(n){return n.g?n.g.readyState:0}function m4(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case u4:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function g4(n){let e="";return wM(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function GM(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=g4(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):xt(n,e,t))}function rp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function _4(n){this.Ga=0,this.i=[],this.j=new gv,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=rp("failFast",!1,n),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=rp("baseRetryDelayMs",5e3,n),this.hb=rp("retryDelaySeedMs",1e4,n),this.eb=rp("forwardChannelMaxRetries",2,n),this.xa=rp("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.K=void 0,this.I=n&&n.supportsCrossDomainXhr||!1,this.J="",this.h=new r4(n&&n.concurrentRequestLimit),this.Ja=new Zbe,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.j.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function WM(n){if(y4(n),3==n.H){var e=n.W++,t=wo(n.G);xt(t,"SID",n.J),xt(t,"RID",e),xt(t,"TYPE","terminate"),sp(n,t),(e=new Qf(n,n.j,e,void 0)).L=2,e.v=Dv(wo(t)),t=!1,de.navigator&&de.navigator.sendBeacon&&(t=de.navigator.sendBeacon(e.v.toString(),"")),!t&&de.Image&&((new Image).src=e.v,t=!0),t||(e.g=T4(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Yf(e)}I4(n)}function Av(n){n.g&&(QM(n),n.g.cancel(),n.g=null)}function y4(n){Av(n),n.u&&(de.clearTimeout(n.u),n.u=null),Mv(n),n.h.cancel(),n.m&&("number"==typeof n.m&&de.clearTimeout(n.m),n.m=null)}function xv(n){s4(n.h)||n.m||(n.m=!0,PG(n.Na,n),n.C=0)}function v4(n,e){var t;t=e?e.m:n.W++;const i=wo(n.G);xt(i,"SID",n.J),xt(i,"RID",t),xt(i,"AID",n.V),sp(n,i),n.o&&n.s&&GM(i,n.o,n.s),t=new Qf(n,n.j,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.i=e.F.concat(n.i)),e=b4(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),$M(n.h,t),UM(t,i,e)}function sp(n,e){n.ma&&wM(n.ma,function(t,i){xt(e,i,t)}),n.l&&XG({},function(t,i){xt(e,i,t)})}function b4(n,e,t){t=Math.min(n.i.length,t);var i=n.l?ui(n.l.Va,n.l,n):null;e:{var r=n.i;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=r[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<t;l++){let c=r[l].h;const u=r[l].g;if(c-=s,0>c)s=Math.max(0,r[l].h-100),a=!1;else try{Jbe(u,o,"req"+c+"_")}catch(d){i&&i(u)}}if(a){i=o.join("&");break e}}}return n=n.i.splice(0,t),e.F=n,i}function w4(n){n.g||n.u||(n.ba=1,PG(n.Ma,n),n.A=0)}function KM(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Wf(ui(n.Ma,n),D4(n,n.A)),n.A++,0))}function QM(n){null!=n.B&&(de.clearTimeout(n.B),n.B=null)}function C4(n){n.g=new Qf(n,n.j,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=wo(n.wa);xt(e,"RID","rpc"),xt(e,"SID",n.J),xt(e,"CI",n.M?"0":"1"),xt(e,"AID",n.V),xt(e,"TYPE","xmlhttp"),sp(n,e),n.o&&n.s&&GM(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.oa,t.L=1,t.v=Dv(wo(e)),t.s=null,t.S=!0,WG(t,n)}function Mv(n){null!=n.v&&(de.clearTimeout(n.v),n.v=null)}function E4(n,e){var t=null;if(n.g==e){Mv(n),QM(n),n.g=null;var i=2}else{if(!HM(n.h,e))return;t=e.F,a4(n.h,e),i=1}if(0!=n.H)if(n.ta=e.aa,e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.G;var r=n.C;Xn(i=_v(),new HG(i,t)),xv(n)}else w4(n);else if(3==(r=e.o)||0==r&&0<n.ta||!(1==i&&function swe(n,e){return!(o4(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.F.concat(n.i),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Wf(ui(n.Na,n,e),D4(n,n.C)),n.C++,0)))}(n,e)||2==i&&KM(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),r){case 1:Ll(n,5);break;case 4:Ll(n,10);break;case 3:Ll(n,6);break;default:Ll(n,2)}}function D4(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.l||(t*=2),t*e}function Ll(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var i=ui(n.pb,n);t||(t=new Fl("//www.google.com/images/cleardot.gif"),de.location&&"http"==de.location.protocol||Cv(t,"https"),Dv(t)),function ewe(n,e){const t=new gv;if(de.Image){const i=new Image;i.onload=lv(Iv,t,i,"TestLoadImage: loaded",!0,e),i.onerror=lv(Iv,t,i,"TestLoadImage: error",!1,e),i.onabort=lv(Iv,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=lv(Iv,t,i,"TestLoadImage: timeout",!1,e),de.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else Si(2);n.H=0,n.l&&n.l.za(e),I4(n),y4(n)}function I4(n){if(n.H=0,n.pa=[],n.l){const e=l4(n.h);(0!=e.length||0!=n.i.length)&&(_G(n.pa,e),_G(n.pa,n.i),n.h.i.length=0,fM(n.i),n.i.length=0),n.l.ya()}}function S4(n,e,t){var i=t instanceof Fl?wo(t):new Fl(t,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),Ev(i,i.m);else{var r=de.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new Fl(null,void 0);i&&Cv(s,i),e&&(s.g=e),r&&Ev(s,r),t&&(s.l=t),i=s}return e=n.Da,(t=n.F)&&e&&xt(i,t,e),xt(i,"VER",n.qa),sp(n,i),i}function T4(n,e,t){if(e&&!n.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Wt(t&&n.Ha&&!n.va?new tp({ob:!0}):n.va)).Oa(n.I),e}function A4(){}function kv(){if(Nu&&!(10<=Number(Cbe)))throw Error("Environmental error: no available transport.")}function tr(n,e){Ln.call(this),this.g=new _4(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!cv(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!cv(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Vu(this)}function x4(n){FM.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function M4(){LM.call(this),this.status=1}function Vu(n){this.g=n}function Kr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function YM(n,e,t){t||(t=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(r=0;16>r;++r)i[r]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],o=(e=n.g[0])+(s^(t=n.g[1])&((r=n.g[2])^s))+i[0]+3614090360&4294967295;o=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=t+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(t^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(t^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(t^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(t^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(t^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(t|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~t))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(t|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~t))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(t|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~t))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=t+((o=e+(r^(t|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~t))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+s&4294967295}function st(n,e){this.h=e;for(var t=[],i=!0,r=n.length-1;0<=r;r--){var s=0|n[r];i&&s==e||(t[r]=s,i=!1)}this.g=t}(j=Wt.prototype).Oa=function(n){this.M=n},j.ha=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():VM.g(),this.C=function zG(n){return n.h||(n.h=n.i())}(this.u?this.u:VM),this.g.onreadystatechange=ui(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void d4(this,s)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())t.set(s,i.get(s))}i=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),r=de.FormData&&n instanceof de.FormData,!(0<=gG(iwe,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{p4(this),0<this.B&&((this.L=function rwe(n){return Nu&&function wbe(){return vG(bbe,9,function(){let n=0;const e=yG(String(dv)).split("."),t=yG("9").split("."),i=Math.max(e.length,t.length);for(let o=0;0==n&&o<i;o++){var r=e[o]||"",s=t[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=pM(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||pM(0==r[2].length,0==s[2].length)||pM(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ui(this.ua,this)):this.A=OM(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){d4(this,s)}},j.ua=function(){void 0!==dM&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xn(this,"timeout"),this.abort(8))},j.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Xn(this,"complete"),Xn(this,"abort"),Tv(this))},j.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Tv(this,!0)),Wt.$.N.call(this)},j.La=function(){this.s||(this.G||this.v||this.l?f4(this):this.kb())},j.kb=function(){f4(this)},j.da=function(){try{return 2<Co(this)?this.g.status:-1}catch(n){return-1}},j.ja=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},j.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),twe(e)}},j.Ia=function(){return this.m},j.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(j=_4.prototype).qa=8,j.H=1,j.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const r=new Qf(this,this.j,n,void 0);let s=this.s;if(this.U&&(s?(s=DG(s),SG(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var i=this.i[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=b4(this,r,e),xt(t=wo(this.G),"RID",n),xt(t,"CVER",22),this.F&&xt(t,"X-HTTP-Session-Id",this.F),sp(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(g4(s)))+"&"+e:this.o&&GM(t,this.o,s)),$M(this.h,r),this.bb&&xt(t,"TYPE","init"),this.P?(xt(t,"$req",e),xt(t,"SID","null"),r.ba=!0,UM(r,t,null)):UM(r,t,e),this.H=2}}else 3==this.H&&(n?v4(this,n):0==this.i.length||s4(this.h)||v4(this))},j.Ma=function(){if(this.u=null,C4(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var n=2*this.S;this.j.info("BP detection timer enabled: "+n),this.B=Wf(ui(this.jb,this),n)}},j.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,Si(10),Av(this),C4(this))},j.ib=function(){null!=this.v&&(this.v=null,Av(this),KM(this),Si(19))},j.pb=function(n){n?(this.j.info("Successfully pinged google.com"),Si(2)):(this.j.info("Failed to ping google.com"),Si(1))},(j=A4.prototype).Ba=function(){},j.Aa=function(){},j.za=function(){},j.ya=function(){},j.Va=function(){},kv.prototype.g=function(n,e){return new tr(n,e)},Fn(tr,Ln),tr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var n=this.g,e=this.l,t=this.h||void 0;Si(0),n.Y=e,n.ma=t||{},n.M=n.aa,n.G=S4(n,null,n.Y),xv(n)},tr.prototype.close=function(){WM(this.g)},tr.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=MM(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.fb++,n)),3==e.H&&xv(e)},tr.prototype.N=function(){this.g.l=null,delete this.j,WM(this.g),delete this.g,tr.$.N.call(this)},Fn(x4,FM),Fn(M4,LM),Fn(Vu,A4),Vu.prototype.Ba=function(){Xn(this.g,"a")},Vu.prototype.Aa=function(n){Xn(this.g,new x4(n))},Vu.prototype.za=function(n){Xn(this.g,new M4)},Vu.prototype.ya=function(){Xn(this.g,"b")},Fn(Kr,function owe(){this.blockSize=-1}),Kr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Kr.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=t;)YM(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(i[r++]=n.charCodeAt(s++),r==this.blockSize){YM(this,i),r=0;break}}else for(;s<e;)if(i[r++]=n[s++],r==this.blockSize){YM(this,i),r=0;break}}this.h=r,this.i+=e},Kr.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var i=0;32>i;i+=8)n[t++]=this.g[e]>>>i&255;return n};var awe={};function XM(n){return-128<=n&&128>n?vG(awe,n,function(e){return new st([0|e],0>e?-1:0)}):new st([0|n],0>n?-1:0)}function Ts(n){if(isNaN(n)||!isFinite(n))return Bu;if(0>n)return Zn(Ts(-n));for(var e=[],t=1,i=0;n>=t;i++)e[i]=n/t|0,t*=ZM;return new st(e,0)}var ZM=4294967296,Bu=XM(0),JM=XM(1),R4=XM(16777216);function Eo(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Ir(n){return-1==n.h}function Zn(n){for(var e=n.g.length,t=[],i=0;i<e;i++)t[i]=~n.g[i];return new st(t,~n.h).add(JM)}function Rv(n,e){return n.add(Zn(e))}function Pv(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function op(n,e){this.g=n,this.h=e}function Ov(n,e){if(Eo(e))throw Error("division by zero");if(Eo(n))return new op(Bu,Bu);if(Ir(n))return e=Ov(Zn(n),e),new op(Zn(e.g),Zn(e.h));if(Ir(e))return e=Ov(n,Zn(e)),new op(Zn(e.g),e.h);if(30<n.g.length){if(Ir(n)||Ir(e))throw Error("slowDivide_ only works with positive integers.");for(var t=JM,i=e;0>=i.X(n);)t=P4(t),i=P4(i);var r=Uu(t,1),s=Uu(i,1);for(i=Uu(i,2),t=Uu(t,2);!Eo(i);){var o=s.add(i);0>=o.X(n)&&(r=r.add(t),s=o),i=Uu(i,1),t=Uu(t,1)}return e=Rv(n,r.R(e)),new op(r,e)}for(r=Bu;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,i-48),o=(s=Ts(t)).R(e);Ir(o)||0<o.X(n);)o=(s=Ts(t-=i)).R(e);Eo(s)&&(s=JM),r=r.add(s),n=Rv(n,o)}return new op(r,n)}function P4(n){for(var e=n.g.length+1,t=[],i=0;i<e;i++)t[i]=n.D(i)<<1|n.D(i-1)>>>31;return new st(t,n.h)}function Uu(n,e){var t=e>>5;e%=32;for(var i=n.g.length-t,r=[],s=0;s<i;s++)r[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new st(r,n.h)}(j=st.prototype).ea=function(){if(Ir(this))return-Zn(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var i=this.D(t);n+=(0<=i?i:ZM+i)*e,e*=ZM}return n},j.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Eo(this))return"0";if(Ir(this))return"-"+Zn(this).toString(n);for(var e=Ts(Math.pow(n,6)),t=this,i="";;){var r=Ov(t,e).g,s=((0<(t=Rv(t,r.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Eo(t=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},j.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},j.X=function(n){return Ir(n=Rv(this,n))?-1:Eo(n)?0:1},j.abs=function(){return Ir(this)?Zn(this):this},j.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&n.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=o>>>16,t[r]=(o&=65535)<<16|(s&=65535)}return new st(t,-2147483648&t[t.length-1]?-1:0)},j.R=function(n){if(Eo(this)||Eo(n))return Bu;if(Ir(this))return Ir(n)?Zn(this).R(Zn(n)):Zn(Zn(this).R(n));if(Ir(n))return Zn(this.R(Zn(n)));if(0>this.X(R4)&&0>n.X(R4))return Ts(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],i=0;i<2*e;i++)t[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=n.D(r)>>>16,l=65535&n.D(r);t[2*i+2*r]+=o*l,Pv(t,2*i+2*r),t[2*i+2*r+1]+=s*l,Pv(t,2*i+2*r+1),t[2*i+2*r+1]+=o*a,Pv(t,2*i+2*r+1),t[2*i+2*r+2]+=s*a,Pv(t,2*i+2*r+2)}for(i=0;i<e;i++)t[i]=t[2*i+1]<<16|t[2*i];for(i=e;i<2*e;i++)t[i]=0;return new st(t,0)},j.gb=function(n){return Ov(this,n).h},j.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)&n.D(i);return new st(t,this.h&n.h)},j.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)|n.D(i);return new st(t,this.h|n.h)},j.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)^n.D(i);return new st(t,this.h^n.h)},kv.prototype.createWebChannel=kv.prototype.g,tr.prototype.send=tr.prototype.u,tr.prototype.open=tr.prototype.m,tr.prototype.close=tr.prototype.close,yv.NO_ERROR=0,yv.TIMEOUT=8,yv.HTTP_ERROR=6,$G.COMPLETE="complete",qG.EventType=Kf,Kf.OPEN="a",Kf.CLOSE="b",Kf.ERROR="c",Kf.MESSAGE="d",Ln.prototype.listen=Ln.prototype.O,Wt.prototype.listenOnce=Wt.prototype.P,Wt.prototype.getLastError=Wt.prototype.Sa,Wt.prototype.getLastErrorCode=Wt.prototype.Ia,Wt.prototype.getStatus=Wt.prototype.da,Wt.prototype.getResponseJson=Wt.prototype.Wa,Wt.prototype.getResponseText=Wt.prototype.ja,Wt.prototype.send=Wt.prototype.ha,Wt.prototype.setWithCredentials=Wt.prototype.Oa,Kr.prototype.digest=Kr.prototype.l,Kr.prototype.reset=Kr.prototype.reset,Kr.prototype.update=Kr.prototype.j,st.prototype.add=st.prototype.add,st.prototype.multiply=st.prototype.R,st.prototype.modulo=st.prototype.gb,st.prototype.compare=st.prototype.X,st.prototype.toNumber=st.prototype.ea,st.prototype.toString=st.prototype.toString,st.prototype.getBits=st.prototype.D,st.fromNumber=Ts,st.fromString=function k4(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Zn(k4(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Ts(Math.pow(e,8)),i=Bu,r=0;r<n.length;r+=8){var s=Math.min(8,n.length-r),o=parseInt(n.substring(r,r+s),e);8>s?(s=Ts(Math.pow(e,s)),i=i.R(s).add(Ts(o))):i=(i=i.R(t)).add(Ts(o))}return i};var lwe=Wr.createWebChannelTransport=function(){return new kv},cwe=Wr.getStatEventTarget=function(){return _v()},ek=Wr.ErrorCode=yv,uwe=Wr.EventType=$G,dwe=Wr.Event=Ol,O4=Wr.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},hwe=Wr.FetchXmlHttpFactory=tp,Nv=Wr.WebChannel=qG,fwe=Wr.XhrIo=Wt,pwe=Wr.Md5=Kr,ju=Wr.Integer=st;const N4="@firebase/firestore";class Vn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vn.UNAUTHENTICATED=new Vn(null),Vn.GOOGLE_CREDENTIALS=new Vn("google-credentials-uid"),Vn.FIRST_PARTY=new Vn("first-party-uid"),Vn.MOCK_USER=new Vn("mock-user");let Hu="9.22.0";const ha=new Cl("@firebase/firestore");function tk(){return ha.logLevel}function x(n,...e){if(ha.logLevel<=Ne.DEBUG){const t=e.map(nk);ha.debug(`Firestore (${Hu}): ${n}`,...t)}}function nn(n,...e){if(ha.logLevel<=Ne.ERROR){const t=e.map(nk);ha.error(`Firestore (${Hu}): ${n}`,...t)}}function Qr(n,...e){if(ha.logLevel<=Ne.WARN){const t=e.map(nk);ha.warn(`Firestore (${Hu}): ${n}`,...t)}}function nk(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function z(n="Unexpected state"){const e=`FIRESTORE (${Hu}) INTERNAL ASSERTION FAILED: `+n;throw nn(e),new Error(e)}function K(n,e){n||z()}function F(n,e){return n}const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class T extends er{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class In{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class F4{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mwe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Vn.UNAUTHENTICATED))}shutdown(){}}class gwe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _we{constructor(e){this.t=e,this.currentUser=Vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const s=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let o=new In;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new In,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(_(function*(){yield c.promise,yield s(i.currentUser)}))},l=c=>{x("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(x("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new In)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(x("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(K("string"==typeof i.accessToken),new F4(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return K(null===e||"string"==typeof e),new Vn(e)}}class ywe{constructor(e,t,i){this.h=e,this.l=t,this.m=i,this.type="FirstParty",this.user=Vn.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class vwe{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new ywe(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class L4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bwe{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const i=s=>{null!=s.error&&x("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,x("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{x("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?r(s):x("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(K("string"==typeof t.token),this.T=t.token,new L4(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function wwe(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class V4{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=wwe(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}}function ue(n,e){return n<e?-1:n>e?1:0}function $u(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}class Nt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new T(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new T(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new T(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new T(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Nt.fromMillis(Date.now())}static fromDate(e){return Nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Nt(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Q{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Q(e)}static min(){return new Q(new Nt(0,0))}static max(){return new Q(new Nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ap{constructor(e,t,i){void 0===t?t=0:t>e.length&&z(),void 0===i?i=e.length-t:i>e.length-t&&z(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===ap.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ap?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class He extends ap{construct(e,t,i){return new He(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new T(D.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new He(t)}static emptyPath(){return new He([])}}const Cwe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends ap{construct(e,t,i){return new rn(e,t,i)}static isValidIdentifier(e){return Cwe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rn(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(0===i.length)throw new T(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if("\\"===a){if(r+1===e.length)throw new T(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new T(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else"`"===a?(o=!o,r++):"."!==a||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new T(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(t)}static emptyPath(){return new rn([])}}class N{constructor(e){this.path=e}static fromPath(e){return new N(He.fromString(e))}static fromName(e){return new N(He.fromString(e).popFirst(5))}static empty(){return new N(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===He.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return He.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new N(new He(e.slice()))}}function j4(n){return new nr(n.readTime,n.key,-1)}class nr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new nr(Q.min(),N.empty(),-1)}static max(){return new nr(Q.max(),N.empty(),-1)}}function rk(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=N.comparator(n.documentKey,e.documentKey),0!==t?t:ue(n.largestBatchId,e.largestBatchId))}const H4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";function fa(n){return sk.apply(this,arguments)}function sk(){return sk=_(function*(n){if(n.code!==D.FAILED_PRECONDITION||n.message!==H4)throw n;x("LocalStore","Unexpectedly lost primary lease")}),sk.apply(this,arguments)}class C{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new C((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof C?t:C.resolve(t)}catch(t){return C.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):C.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):C.reject(t)}static resolve(e){return new C((t,i)=>{t(e)})}static reject(e){return new C((t,i)=>{i(e)})}static waitFor(e){return new C((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=C.resolve(!1);for(const i of e)t=t.next(r=>r?C.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new C((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,t){return new C((i,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):i()};s()})}}function pa(n){return"IndexedDbTransactionError"===n.name}let ir=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>i.writeSequenceNumber(r))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function up(n){return null==n}function dp(n){return 0===n&&1/n==-1/0}function X4(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ma(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Z4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class yt{constructor(e,t){this.comparator=e,this.root=t||Jn.EMPTY}insert(e,t){return new yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Jn.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uv(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uv(this.root,e,this.comparator,!0)}}class Uv{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jn{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=null!=i?i:Jn.RED,this.left=null!=r?r:Jn.EMPTY,this.right=null!=s?s:Jn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new Jn(null!=e?e:this.key,null!=t?t:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Jn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Jn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();const e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}}Jn.EMPTY=null,Jn.RED=!0,Jn.BLACK=!1,Jn.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(n,e,t,i,r){return this}insert(n,e,t){return new Jn(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class It{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new J4(this.data.getIterator())}getIteratorFrom(e){return new J4(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new It(this.comparator);return t.data=e,t}}class J4{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Bi{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new Bi([])}unionWith(e){let t=new It(rn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Bi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $u(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class e3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Sn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(r){throw"undefined"!=typeof DOMException&&r instanceof DOMException?new e3("Invalid base64 string: "+r):r}}(e);return new Sn(t)}static fromUint8Array(e){const t=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new Sn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sn.EMPTY_BYTE_STRING=new Sn("");const Kwe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ga(n){if(K(!!n),"string"==typeof n){let e=0;const t=Kwe.exec(n);if(K(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Kt(n.seconds),nanos:Kt(n.nanos)}}function Kt(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Do(n){return"string"==typeof n?Sn.fromBase64String(n):Sn.fromUint8Array(n)}function jv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Hv(n){const e=n.mapValue.fields.__previous_value__;return jv(e)?Hv(e):e}function hp(n){const e=ga(n.mapValue.fields.__local_write_time__.timestampValue);return new Nt(e.seconds,e.nanos)}class Qwe{constructor(e,t,i,r,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ul{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ul("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ul&&e.projectId===this.projectId&&e.database===this.database}}const _a_mapValue={fields:{__type__:{stringValue:"__max__"}}};function ya(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jv(n)?4:s3(n)?9007199254740991:10:z()}function xs(n,e){if(n===e)return!0;const t=ya(n);if(t!==ya(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hp(n).isEqual(hp(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=ga(i.timestampValue),o=ga(r.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,Do(n.bytesValue).isEqual(Do(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return Kt(i.geoPointValue.latitude)===Kt(r.geoPointValue.latitude)&&Kt(i.geoPointValue.longitude)===Kt(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Kt(i.integerValue)===Kt(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=Kt(i.doubleValue),o=Kt(r.doubleValue);return s===o?dp(s)===dp(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return $u(n.arrayValue.values||[],e.arrayValue.values||[],xs);case 10:return function(i,r){const s=i.mapValue.fields||{},o=r.mapValue.fields||{};if(X4(s)!==X4(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!xs(s[a],o[a])))return!1;return!0}(n,e);default:return z()}var r}function fp(n,e){return void 0!==(n.values||[]).find(t=>xs(t,e))}function va(n,e){if(n===e)return 0;const t=ya(n),i=ya(e);if(t!==i)return ue(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ue(n.booleanValue,e.booleanValue);case 2:return function(r,s){const o=Kt(r.integerValue||r.doubleValue),a=Kt(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(n,e);case 3:return t3(n.timestampValue,e.timestampValue);case 4:return t3(hp(n),hp(e));case 5:return ue(n.stringValue,e.stringValue);case 6:return function(r,s){const o=Do(r),a=Do(s);return o.compareTo(a)}(n.bytesValue,e.bytesValue);case 7:return function(r,s){const o=r.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=ue(o[l],a[l]);if(0!==c)return c}return ue(o.length,a.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,s){const o=ue(Kt(r.latitude),Kt(s.latitude));return 0!==o?o:ue(Kt(r.longitude),Kt(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,s){const o=r.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=va(o[l],a[l]);if(c)return c}return ue(o.length,a.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===_a_mapValue&&s===_a_mapValue)return 0;if(r===_a_mapValue)return 1;if(s===_a_mapValue)return-1;const o=r.fields||{},a=Object.keys(o),l=s.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const d=ue(a[u],c[u]);if(0!==d)return d;const h=va(o[a[u]],l[c[u]]);if(0!==h)return h}return ue(a.length,c.length)}(n.mapValue,e.mapValue);default:throw z()}}function t3(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return ue(n,e);const t=ga(n),i=ga(e),r=ue(t.seconds,i.seconds);return 0!==r?r:ue(t.nanos,i.nanos)}function qu(n){return lk(n)}function lk(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=ga(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Do(n.bytesValue).toBase64():"referenceValue"in n?N.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const o of i.values||[])s?s=!1:r+=",",r+=lk(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${lk(i.fields[a])}`;return s+"}"}(n.mapValue):z();var e}function jl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ck(n){return!!n&&"integerValue"in n}function pp(n){return!!n&&"arrayValue"in n}function n3(n){return!!n&&"nullValue"in n}function r3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function qv(n){return!!n&&"mapValue"in n}function mp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ma(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=mp(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function s3(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class ei{constructor(e){this.value=e}static empty(){return new ei({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!qv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mp(t)}setAll(e){let t=rn.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=mp(o):r.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());qv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];qv(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){ma(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new ei(mp(this.value))}}function l3(n){const e=[];return ma(n.fields,(t,i)=>{const r=new rn([t]);if(qv(i)){const s=l3(i.mapValue).fields;if(0===s.length)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new Bi(e)}class St{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new St(e,0,Q.min(),Q.min(),Q.min(),ei.empty(),0)}static newFoundDocument(e,t,i,r){return new St(e,1,t,Q.min(),i,r,0)}static newNoDocument(e,t){return new St(e,2,t,Q.min(),Q.min(),ei.empty(),0)}static newUnknownDocument(e,t){return new St(e,3,t,Q.min(),Q.min(),ei.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Q.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ei.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof St&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new St(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ba{constructor(e,t){this.position=e,this.inclusive=t}}function c3(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],o=n.position[r];if(i=s.field.isKeyField()?N.comparator(N.fromName(o.referenceValue),t.key):va(o,t.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function u3(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xs(n.position[t],e.position[t]))return!1;return!0}class Gu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Zwe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class d3{}class Fe extends d3{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new Jwe(e,t,i):"array-contains"===t?new nCe(e,i):"in"===t?new _3(e,i):"not-in"===t?new iCe(e,i):"array-contains-any"===t?new rCe(e,i):new Fe(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new eCe(e,i):new tCe(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(va(t,this.value)):null!==t&&ya(this.value)===ya(t)&&this.matchesComparison(va(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ot extends d3{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new ot(e,t)}matches(e){return Wu(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Wu(n){return"and"===n.op}function dk(n){return function h3(n){for(const e of n.filters)if(e instanceof ot)return!1;return!0}(n)&&Wu(n)}function hk(n){if(n instanceof Fe)return n.field.canonicalString()+n.op.toString()+qu(n.value);if(dk(n))return n.filters.map(e=>hk(e)).join(",");{const e=n.filters.map(t=>hk(t)).join(",");return`${n.op}(${e})`}}function f3(n,e){return n instanceof Fe?(t=n,(i=e)instanceof Fe&&t.op===i.op&&t.field.isEqual(i.field)&&xs(t.value,i.value)):n instanceof ot?function(t,i){return i instanceof ot&&t.op===i.op&&t.filters.length===i.filters.length&&t.filters.reduce((r,s,o)=>r&&f3(s,i.filters[o]),!0)}(n,e):void z();var t,i}function m3(n){return n instanceof Fe?`${(e=n).field.canonicalString()} ${e.op} ${qu(e.value)}`:n instanceof ot?function(e){return e.op.toString()+" {"+e.getFilters().map(m3).join(" ,")+"}"}(n):"Filter";var e}class Jwe extends Fe{constructor(e,t,i){super(e,t,i),this.key=N.fromName(i.referenceValue)}matches(e){const t=N.comparator(e.key,this.key);return this.matchesComparison(t)}}class eCe extends Fe{constructor(e,t){super(e,"in",t),this.keys=g3(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class tCe extends Fe{constructor(e,t){super(e,"not-in",t),this.keys=g3(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function g3(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>N.fromName(i.referenceValue))}class nCe extends Fe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pp(t)&&fp(t.arrayValue,this.value)}}class _3 extends Fe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&fp(this.value.arrayValue,t)}}class iCe extends Fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(fp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!fp(this.value.arrayValue,t)}}class rCe extends Fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>fp(this.value.arrayValue,i))}}class sCe{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.dt=null}}function fk(n,e=null,t=[],i=[],r=null,s=null,o=null){return new sCe(n,e,t,i,r,s,o)}function Hl(n){const e=F(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>hk(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),up(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>qu(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>qu(i)).join(",")),e.dt=t}return e.dt}function gp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Zwe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!f3(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!u3(n.startAt,e.startAt)&&u3(n.endAt,e.endAt)}function Gv(n){return N.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Io{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.wt=null,this._t=null}}function Ku(n){return new Io(n)}function w3(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function pk(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Kv(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function mk(n){return null!==n.collectionGroup}function $l(n){const e=F(n);if(null===e.wt){e.wt=[];const t=Kv(e),i=pk(e);if(null!==t&&null===i)t.isKeyField()||e.wt.push(new Gu(t)),e.wt.push(new Gu(rn.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Gu(rn.keyField(),s))}}}return e.wt}function Ti(n){const e=F(n);if(!e._t)if("F"===e.limitType)e._t=fk(e.path,e.collectionGroup,$l(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of $l(e))t.push(new Gu(s.field,"desc"===s.dir?"asc":"desc"));const i=e.endAt?new ba(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ba(e.startAt.position,e.startAt.inclusive):null;e._t=fk(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e._t}function gk(n,e){e.getFirstInequalityField(),Kv(n);const t=n.filters.concat([e]);return new Io(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Qv(n,e,t){return new Io(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _p(n,e){return gp(Ti(n),Ti(e))&&n.limitType===e.limitType}function C3(n){return`${Hl(Ti(n))}|lt:${n.limitType}`}function _k(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(i=>m3(i)).join(", ")}]`),up(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(i=>{return`${(r=i).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>qu(i)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>qu(i)).join(",")),`Target(${t})`}(Ti(n))}; limitType=${n.limitType})`}function yp(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):N.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of $l(t))if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,s,o){const a=c3(r,s,o);return r.inclusive?a<=0:a<0}(t.startAt,$l(t),i)||t.endAt&&!function(r,s,o){const a=c3(r,s,o);return r.inclusive?a>=0:a>0}(t.endAt,$l(t),i)));var t,i}function D3(n){return(e,t)=>{let i=!1;for(const r of $l(n)){const s=oCe(r,e,t);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function oCe(n,e,t){const i=n.field.isKeyField()?N.comparator(e.key,t.key):function(r,s,o){const a=s.data.field(r),l=o.data.field(r);return null!==a&&null!==l?va(a,l):z()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return z()}}class So{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ma(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return Z4(this.inner)}size(){return this.innerSize}}const aCe=new yt(N.comparator);function Ui(){return aCe}const I3=new yt(N.comparator);function vp(...n){let e=I3;for(const t of n)e=e.insert(t.key,t);return e}function S3(n){let e=I3;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Ms(){return bp()}function T3(){return bp()}function bp(){return new So(n=>n.toString(),(n,e)=>n.isEqual(e))}const lCe=new yt(N.comparator),cCe=new It(N.comparator);function ve(...n){let e=cCe;for(const t of n)e=e.add(t);return e}const uCe=new It(ue);function A3(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dp(e)?"-0":e}}function x3(n){return{integerValue:""+n}}function M3(n,e){return function z4(n){return"number"==typeof n&&Number.isInteger(n)&&!dp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?x3(e):A3(n,e)}class Yv{constructor(){this._=void 0}}function dCe(n,e,t){return n instanceof Qu?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&jv(r)&&(r=Hv(r)),r&&(s.fields.__previous_value__=r),{mapValue:s}}(t,e):n instanceof zl?R3(n,e):n instanceof ql?P3(n,e):function(i,r){const s=k3(i,r),o=O3(s)+O3(i.gt);return ck(s)&&ck(i.gt)?x3(o):A3(i.serializer,o)}(n,e)}function hCe(n,e,t){return n instanceof zl?R3(n,e):n instanceof ql?P3(n,e):t}function k3(n,e){return n instanceof Yu?ck(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class Qu extends Yv{}class zl extends Yv{constructor(e){super(),this.elements=e}}function R3(n,e){const t=N3(e);for(const i of n.elements)t.some(r=>xs(r,i))||t.push(i);return{arrayValue:{values:t}}}class ql extends Yv{constructor(e){super(),this.elements=e}}function P3(n,e){let t=N3(e);for(const i of n.elements)t=t.filter(r=>!xs(r,i));return{arrayValue:{values:t}}}class Yu extends Yv{constructor(e,t){super(),this.serializer=e,this.gt=t}}function O3(n){return Kt(n.integerValue||n.doubleValue)}function N3(n){return pp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class pCe{constructor(e,t){this.version=e,this.transformResults=t}}class Mt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mt}static exists(e){return new Mt(void 0,e)}static updateTime(e){return new Mt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xv(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Zv{}function F3(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Zu(n.key,Mt.none()):new Xu(n.key,n.data,Mt.none());{const t=n.data,i=ei.empty();let r=new It(rn.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?i.delete(s):i.set(s,o),r=r.add(s)}return new To(n.key,i,new Bi(r.toArray()),Mt.none())}}function mCe(n,e,t){n instanceof Xu?function(i,r,s){const o=i.value.clone(),a=B3(i.fieldTransforms,r,s.transformResults);o.setAll(a),r.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof To?function(i,r,s){if(!Xv(i.precondition,r))return void r.convertToUnknownDocument(s.version);const o=B3(i.fieldTransforms,r,s.transformResults),a=r.data;a.setAll(V3(i)),a.setAll(o),r.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Cp(n,e,t,i){return n instanceof Xu?function(r,s,o,a){if(!Xv(r.precondition,s))return o;const l=r.value.clone(),c=U3(r.fieldTransforms,a,s);return l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,i):n instanceof To?function(r,s,o,a){if(!Xv(r.precondition,s))return o;const l=U3(r.fieldTransforms,a,s),c=s.data;return c.setAll(V3(r)),c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null===o?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(u=>u.field))}(n,e,t,i):(o=t,Xv(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function gCe(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=k3(i.transform,r||null);null!=s&&(null===t&&(t=ei.empty()),t.set(i.field,s))}return t||null}function L3(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&$u(t,i,(r,s)=>function fCe(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof zl&&i instanceof zl||t instanceof ql&&i instanceof ql?$u(t.elements,i.elements,xs):t instanceof Yu&&i instanceof Yu?xs(t.gt,i.gt):t instanceof Qu&&i instanceof Qu);var t,i}(r,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class Xu extends Zv{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class To extends Zv{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function V3(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function B3(n,e,t){const i=new Map;K(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,hCe(o,a,t[r]))}return i}function U3(n,e,t){const i=new Map;for(const r of n){const s=r.transform,o=t.data.field(r.field);i.set(r.field,dCe(s,o,e))}return i}class Zu extends Zv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vk extends Zv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class bk{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&mCe(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Cp(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Cp(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=T3();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;const l=F3(o,a);null!==l&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Q.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ve())}isEqual(e){return this.batchId===e.batchId&&$u(this.mutations,e.mutations,(t,i)=>L3(t,i))&&$u(this.baseMutations,e.baseMutations,(t,i)=>L3(t,i))}}class wk{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){K(e.mutations.length===i.length);let r=lCe;const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new wk(e,t,i,r)}}class Ck{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class yCe{constructor(e,t){this.count=e,this.unchangedNames=t}}var pn,$e;function j3(n){switch(n){default:return z();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0}}function H3(n){if(void 0===n)return nn("GRPC error has no .code"),D.UNKNOWN;switch(n){case pn.OK:return D.OK;case pn.CANCELLED:return D.CANCELLED;case pn.UNKNOWN:return D.UNKNOWN;case pn.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case pn.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case pn.INTERNAL:return D.INTERNAL;case pn.UNAVAILABLE:return D.UNAVAILABLE;case pn.UNAUTHENTICATED:return D.UNAUTHENTICATED;case pn.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case pn.NOT_FOUND:return D.NOT_FOUND;case pn.ALREADY_EXISTS:return D.ALREADY_EXISTS;case pn.PERMISSION_DENIED:return D.PERMISSION_DENIED;case pn.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case pn.ABORTED:return D.ABORTED;case pn.OUT_OF_RANGE:return D.OUT_OF_RANGE;case pn.UNIMPLEMENTED:return D.UNIMPLEMENTED;case pn.DATA_LOSS:return D.DATA_LOSS;default:return z()}}($e=pn||(pn={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";class Ek{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Jv}static getOrCreateInstance(){return null===Jv&&(Jv=new Ek),Jv}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Jv=null;const vCe=new ju([4294967295,4294967295],0);function z3(n){const e=function $3(){return new TextEncoder}().encode(n),t=new pwe;return t.update(e),new Uint8Array(t.digest())}function q3(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ju([t,i],0),new ju([r,s],0)]}class Dk{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ep(`Invalid padding: ${t}`);if(i<0)throw new Ep(`Invalid hash count: ${i}`);if(e.length>0&&0===this.hashCount)throw new Ep(`Invalid hash count: ${i}`);if(0===e.length&&0!==t)throw new Ep(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=ju.fromNumber(this.It)}Et(e,t,i){let r=e.add(t.multiply(ju.fromNumber(i)));return 1===r.compare(vCe)&&(r=new ju([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=z3(e),[i,r]=q3(t);for(let s=0;s<this.hashCount;s++){const o=this.Et(i,r,s);if(!this.At(o))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Dk(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(0===this.It)return;const t=z3(e),[i,r]=q3(t);for(let s=0;s<this.hashCount;s++){const o=this.Et(i,r,s);this.Rt(o)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Ep extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Dp{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Ip.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Dp(Q.min(),r,new yt(ue),Ui(),ve())}}class Ip{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Ip(i,t,ve(),ve(),ve())}}class eb{constructor(e,t,i,r){this.Pt=e,this.removedTargetIds=t,this.key=i,this.bt=r}}class G3{constructor(e,t){this.targetId=e,this.Vt=t}}class W3{constructor(e,t,i=Sn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class K3{constructor(){this.St=0,this.Dt=Y3(),this.Ct=Sn.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ve(),t=ve(),i=ve();return this.Dt.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:z()}}),new Ip(this.Ct,this.xt,e,t,i)}Ft(){this.Nt=!1,this.Dt=Y3()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class bCe{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ui(),this.zt=Q3(),this.Wt=new yt(ue)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const i=this.Zt(t);switch(e.state){case 0:this.te(t)&&i.$t(e.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(e.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(t);break;case 3:this.te(t)&&(i.Kt(),i.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),i.$t(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((i,r)=>{this.te(r)&&t(r)})}ne(e){var t;const i=e.targetId,r=e.Vt.count,s=this.se(i);if(s){const o=s.target;if(Gv(o))if(0===r){const a=new N(o.path);this.Yt(i,a,St.newNoDocument(a,Q.min()))}else K(1===r);else{const a=this.ie(i);if(a!==r){const l=this.re(e,a);0!==l&&(this.ee(i),this.Wt=this.Wt.insert(i,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Ek.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(c,u,d){var h,f,p,m,g,b;const v={localCacheCount:u,existenceFilterCount:d.count},E=d.unchangedNames;return E&&(v.bloomFilter={applied:0===c,hashCount:null!==(h=null==E?void 0:E.hashCount)&&void 0!==h?h:0,bitmapLength:null!==(m=null===(p=null===(f=null==E?void 0:E.bits)||void 0===f?void 0:f.bitmap)||void 0===p?void 0:p.length)&&void 0!==m?m:0,padding:null!==(b=null===(g=null==E?void 0:E.bits)||void 0===g?void 0:g.padding)&&void 0!==b?b:0}),v}(l,a,e.Vt))}}}}re(e,t){const{unchangedNames:i,count:r}=e.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=i;let l,c;try{l=Do(s).toUint8Array()}catch(u){if(u instanceof e3)return Qr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw u}try{c=new Dk(l,o,a)}catch(u){return Qr(u instanceof Ep?"BloomFilter error: ":"Applying bloom filter failed: ",u),1}return 0===c.It?1:r!==t-this.oe(e.targetId,c)?2:0}oe(e,t){const i=this.Gt.getRemoteKeysForTarget(e);let r=0;return i.forEach(s=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.vt(a)||(this.Yt(e,s,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((s,o)=>{const a=this.se(o);if(a){if(s.current&&Gv(a.target)){const l=new N(a.target.path);null!==this.jt.get(l)||this.ae(o,l)||this.Yt(o,l,St.newNoDocument(l,e))}s.Mt&&(t.set(o,s.Ot()),s.Ft())}});let i=ve();this.zt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.se(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(i=i.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const r=new Dp(e,t,this.Wt,this.jt,i);return this.jt=Ui(),this.zt=Q3(),this.Wt=new yt(ue),r}Jt(e,t){if(!this.te(e))return;const i=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,i),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,i){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),i&&(this.jt=this.jt.insert(t,i))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new K3,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new It(ue),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||x("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new K3),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Q3(){return new yt(N.comparator)}function Y3(){return new yt(N.comparator)}const wCe={asc:"ASCENDING",desc:"DESCENDING"},CCe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ECe={and:"AND",or:"OR"};class DCe{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ik(n,e){return n.useProto3Json||up(e)?e:{value:e}}function Ju(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function X3(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ICe(n,e){return Ju(n,e.toTimestamp())}function sn(n){return K(!!n),Q.fromTimestamp(function(e){const t=ga(e);return new Nt(t.seconds,t.nanos)}(n))}function Sk(n,e){return(t=n,new He(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Z3(n){const e=He.fromString(n);return K(aW(e)),e}function Sp(n,e){return Sk(n.databaseId,e.path)}function ks(n,e){const t=Z3(e);if(t.get(1)!==n.databaseId.projectId)throw new T(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new T(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new N(eW(t))}function Tk(n,e){return Sk(n.databaseId,e)}function Tp(n){return new He(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function eW(n){return K(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function tW(n,e,t){return{name:Sp(n,e),fields:t.value.mapValue.fields}}function iW(n,e){return{documents:[Tk(n,e.path)]}}function xk(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=Tk(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Tk(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(l){if(0!==l.length)return oW(ot.create(l,"and"))}(e.filters);r&&(t.structuredQuery.where=r);const s=function(l){if(0!==l.length)return l.map(c=>{return{field:wa((u=c).field),direction:MCe(u.dir)};var u})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=Ik(n,e.limit);var a,l;return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(t.structuredQuery.endAt={before:!(l=e.endAt).inclusive,values:l.position}),t}function rW(n){let e=function J3(n){const e=Z3(n);return 4===e.length?He.emptyPath():eW(e)}(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){K(1===i);const u=t.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(u){const d=sW(u);return d instanceof ot&&dk(d)?d.getFilters():[d]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(u=>{return new Gu(ed((d=u).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;t.limit&&(a=function(u){let d;return d="object"==typeof u?u.value:u,up(d)?null:d}(t.limit));let l=null;var u;t.startAt&&(l=new ba((u=t.startAt).values||[],!!u.before));let c=null;return t.endAt&&(c=function(u){return new ba(u.values||[],!u.before)}(t.endAt)),function b3(n,e,t,i,r,s,o,a){return new Io(n,e,t,i,r,s,o,a)}(e,r,o,s,a,"F",l,c)}function sW(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ed(e.unaryFilter.field);return Fe.create(t,"==",{doubleValue:NaN});case"IS_NULL":const i=ed(e.unaryFilter.field);return Fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ed(e.unaryFilter.field);return Fe.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=ed(e.unaryFilter.field);return Fe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):void 0!==n.fieldFilter?Fe.create(ed((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return ot.create(e.compositeFilter.filters.map(t=>sW(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return z()}}(e.compositeFilter.op))}(n):z();var e}function MCe(n){return wCe[n]}function kCe(n){return CCe[n]}function RCe(n){return ECe[n]}function wa(n){return{fieldPath:n.canonicalString()}}function ed(n){return rn.fromServerFormat(n.fieldPath)}function oW(n){return n instanceof Fe?function(e){if("=="===e.op){if(r3(e.value))return{unaryFilter:{field:wa(e.field),op:"IS_NAN"}};if(n3(e.value))return{unaryFilter:{field:wa(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(r3(e.value))return{unaryFilter:{field:wa(e.field),op:"IS_NOT_NAN"}};if(n3(e.value))return{unaryFilter:{field:wa(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wa(e.field),op:kCe(e.op),value:e.value}}}(n):n instanceof ot?function(e){const t=e.getFilters().map(i=>oW(i));return 1===t.length?t[0]:{compositeFilter:{op:RCe(e.op),filters:t}}}(n):z()}function PCe(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function aW(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ao{constructor(e,t,i,r,s=Q.min(),o=Q.min(),a=Sn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ao(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ao(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class lW{constructor(e){this.fe=e}}function Mk(n){const e=rW({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Qv(e,e.limit,"L"):e}class Ql{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Kt(e.integerValue));else if("doubleValue"in e){const i=Kt(e.doubleValue);isNaN(i)?this.ye(t,13):(this.ye(t,15),dp(i)?t.pe(0):t.pe(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ye(t,20),"string"==typeof i?t.Ie(i):(t.Ie(`${i.seconds||""}`),t.pe(i.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Do(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?s3(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):z()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const i=e.fields||{};this.ye(t,55);for(const r of Object.keys(i))this.Te(r,t),this.me(i[r],t)}Pe(e,t){const i=e.values||[];this.ye(t,50);for(const r of i)this.me(r,t)}ve(e,t){this.ye(t,37),N.fromName(e).path.forEach(i=>{this.ye(t,60),this.be(i,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}Ql.Ve=new Ql;class HCe{constructor(){this.rn=new Fk}addToCollectionParentIndex(e,t){return this.rn.add(t),C.resolve()}getCollectionParents(e,t){return C.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return C.resolve()}deleteFieldIndex(e,t){return C.resolve()}getDocumentsMatchingTarget(e,t){return C.resolve(null)}getIndexType(e,t){return C.resolve(0)}getFieldIndexes(e,t){return C.resolve([])}getNextCollectionGroupToUpdate(e){return C.resolve(null)}getMinOffset(e,t){return C.resolve(nr.min())}getMinOffsetFromCollectionGroup(e,t){return C.resolve(nr.min())}updateCollectionGroup(e,t,i){return C.resolve()}updateIndexEntries(e,t){return C.resolve()}}class Fk{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new It(He.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new It(He.comparator)).toArray()}}new Uint8Array(0);class fi{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new fi(e,fi.DEFAULT_COLLECTION_PERCENTILE,fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}fi.DEFAULT_COLLECTION_PERCENTILE=10,fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fi.DEFAULT=new fi(41943040,fi.DEFAULT_COLLECTION_PERCENTILE,fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fi.DISABLED=new fi(-1,0,0);class Xl{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Xl(0)}static Mn(){return new Xl(-1)}}class XCe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class OW{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(null!==i&&Cp(i.mutation,r,Bi.empty(),Nt.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,ve()).next(()=>i))}getLocalViewOfDocuments(e,t,i=ve()){const r=Ms();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=vp();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=Ms();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,ve()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=Ui();const o=bp(),a=bp();return t.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(void 0===u||u.mutation instanceof To)?s=s.insert(c.key,c):void 0!==u?(o.set(c.key,u.mutation.getFieldMask()),Cp(u.mutation,c,u.mutation.getFieldMask(),Nt.now())):o.set(c.key,Bi.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var d;return a.set(c,new XCe(u,null!==(d=o.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,t){const i=bp();let r=new yt((o,a)=>o-a),s=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(null===c)return;let u=i.get(l)||Bi.empty();u=a.applyToLocalView(c,u),i.set(l,u);const d=(r.get(a.batchId)||ve()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=T3();u.forEach(h=>{if(!s.has(h)){const f=F3(t.get(h),i.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return C.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return N.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):mk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var r}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):C.resolve(Ms());let a=-1,l=s;return o.next(c=>C.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?C.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ve())).next(u=>({batchId:a,changes:S3(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new N(t)).next(i=>{let r=vp();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const r=t.collectionGroup;let s=vp();return this.indexManager.getCollectionParents(e,r).next(o=>C.forEach(o,a=>{const l=(c=t,u=a.child(r),new Io(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,u;return this.getDocumentsMatchingCollectionQuery(e,l,i).next(c=>{c.forEach((u,d)=>{s=s.insert(u,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,r))).next(s=>{r.forEach((a,l)=>{const c=l.getKey();null===s.get(c)&&(s=s.insert(c,St.newInvalidDocument(c)))});let o=vp();return s.forEach((a,l)=>{const c=r.get(a);void 0!==c&&Cp(c.mutation,l,Bi.empty(),Nt.now()),yp(t,l)&&(o=o.insert(a,l))}),o})}}class ZCe{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return C.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var i;return this.cs.set(t.id,{id:(i=t).id,version:i.version,createTime:sn(i.createTime)}),C.resolve()}getNamedQuery(e,t){return C.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(i=t).name,query:Mk(i.bundledQuery),readTime:sn(i.readTime)}),C.resolve();var i}}class JCe{constructor(){this.overlays=new yt(N.comparator),this.ls=new Map}getOverlay(e,t){return C.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ms();return C.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.we(e,t,s)}),C.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.ls.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(i)),C.resolve()}getOverlaysForCollection(e,t,i){const r=Ms(),s=t.length+1,o=new N(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return C.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new yt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let u=s.get(c.largestBatchId);null===u&&(u=Ms(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Ms(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return C.resolve(a)}we(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const o=this.ls.get(r.largestBatchId).delete(i.key);this.ls.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Ck(t,i));let s=this.ls.get(t);void 0===s&&(s=ve(),this.ls.set(t,s)),this.ls.set(t,s.add(i.key))}}class Lk{constructor(){this.fs=new It(Un.ds),this.ws=new It(Un._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const i=new Un(e,t);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.ys(new Un(e,t))}ps(e,t){e.forEach(i=>this.removeReference(i,t))}Is(e){const t=new N(new He([])),i=new Un(t,e),r=new Un(t,e+1),s=[];return this.ws.forEachInRange([i,r],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new N(new He([])),i=new Un(t,e),r=new Un(t,e+1);let s=ve();return this.ws.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Un(e,0),i=this.fs.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Un{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return N.comparator(e.key,t.key)||ue(e.As,t.As)}static _s(e,t){return ue(e.As,t.As)||N.comparator(e.key,t.key)}}class eEe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new It(Un.ds)}checkEmpty(e){return C.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const s=this.vs;this.vs++;const o=new bk(s,t,i,r);this.mutationQueue.push(o);for(const a of r)this.Rs=this.Rs.add(new Un(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return C.resolve(o)}lookupMutationBatch(e,t){return C.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.bs(t+1),s=r<0?0:r;return C.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return C.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return C.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Un(t,0),r=new Un(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([i,r],o=>{const a=this.Ps(o.As);s.push(a)}),C.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new It(ue);return t.forEach(r=>{const s=new Un(r,0),o=new Un(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],a=>{i=i.add(a.As)})}),C.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;N.isDocumentKey(s)||(s=s.child(""));const o=new Un(new N(s),0);let a=new It(ue);return this.Rs.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.As)),!0)},o),C.resolve(this.Vs(a))}Vs(e){const t=[];return e.forEach(i=>{const r=this.Ps(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){K(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let i=this.Rs;return C.forEach(t.mutations,r=>{const s=new Un(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=i})}Cn(e){}containsKey(e,t){const i=new Un(t,0),r=this.Rs.firstAfterOrEqual(i);return C.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return C.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class tEe{constructor(e){this.Ds=e,this.docs=new yt(N.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Ds(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return C.resolve(i?i.document.mutableCopy():St.newInvalidDocument(t))}getEntries(e,t){let i=Ui();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():St.newInvalidDocument(r))}),C.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=Ui();const o=t.path,a=new N(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||rk(j4(u),i)<=0||(r.has(u.key)||yp(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return C.resolve(s)}getAllFromCollectionGroup(e,t,i,r){z()}Cs(e,t){return C.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new nEe(this)}getSize(e){return C.resolve(this.size)}}class nEe extends class KCe{constructor(){this.changes=new So(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,St.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?C.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(i)}),C.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class iEe{constructor(e){this.persistence=e,this.xs=new So(t=>Hl(t),gp),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Lk,this.targetCount=0,this.Ms=Xl.kn()}forEachTarget(e,t){return this.xs.forEach((i,r)=>t(r)),C.resolve()}getLastRemoteSnapshotVersion(e){return C.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return C.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),C.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Ns&&(this.Ns=t),C.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Xl(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,C.resolve()}updateTargetData(e,t){return this.Fn(t),C.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,C.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=t&&null===i.get(a.targetId)&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),C.waitFor(s).next(()=>r)}getTargetCount(e){return C.resolve(this.targetCount)}getTargetData(e,t){const i=this.xs.get(t)||null;return C.resolve(i)}addMatchingKeys(e,t,i){return this.ks.gs(t,i),C.resolve()}removeMatchingKeys(e,t,i){this.ks.ps(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),C.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),C.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ks.Es(t);return C.resolve(i)}containsKey(e,t){return C.resolve(this.ks.containsKey(t))}}class Vk{constructor(e,t){this.$s={},this.overlays={},this.Os=new ir(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new iEe(this),this.indexManager=new HCe,this.remoteDocumentCache=new tEe(i=>this.referenceDelegate.Ls(i)),this.serializer=new lW(t),this.qs=new ZCe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new JCe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.$s[e.toKey()];return i||(i=new eEe(t,this.referenceDelegate),this.$s[e.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,i){x("MemoryPersistence","Starting transaction:",e);const r=new rEe(this.Os.next());return this.referenceDelegate.Us(),i(r).next(s=>this.referenceDelegate.Ks(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gs(e,t){return C.or(Object.values(this.$s).map(i=>()=>i.containsKey(e,t)))}}class rEe extends class Iwe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}{constructor(e){super(),this.currentSequenceNumber=e}}class cb{constructor(e){this.persistence=e,this.Qs=new Lk,this.js=null}static zs(e){return new cb(e)}get Ws(){if(this.js)return this.js;throw z()}addReference(e,t,i){return this.Qs.addReference(i,t),this.Ws.delete(i.toString()),C.resolve()}removeReference(e,t,i){return this.Qs.removeReference(i,t),this.Ws.add(i.toString()),C.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),C.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(r=>this.Ws.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Ws.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return C.forEach(this.Ws,i=>{const r=N.fromPath(i);return this.Hs(e,r).next(s=>{s||t.removeEntry(r,Q.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(i=>{i?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return C.or([()=>C.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Hk{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Fi=i,this.Bi=r}static Li(e,t){let i=ve(),r=ve();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Hk(e,t.fromCache,i,r)}}class FW{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,i,r){return this.Ki(e,t).next(s=>s||this.Gi(e,t,r,i)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(w3(t))return C.resolve(null);let i=Ti(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Qv(t,null,"F"),i=Ti(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=ve(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.ji(t,a);return this.zi(t,c,o,l.readTime)?this.Ki(e,Qv(t,null,"F")):this.Wi(e,c,t,l)}))})))}Gi(e,t,i,r){return w3(t)||r.isEqual(Q.min())?this.Qi(e,t):this.Ui.getDocuments(e,i).next(s=>{const o=this.ji(t,s);return this.zi(t,o,i,r)?this.Qi(e,t):(tk()<=Ne.DEBUG&&x("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_k(t)),this.Wi(e,o,t,function U4(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Q.fromTimestamp(1e9===i?new Nt(t+1,0):new Nt(t,i));return new nr(r,N.empty(),e)}(r,-1)))})}ji(e,t){let i=new It(D3(e));return t.forEach((r,s)=>{yp(e,s)&&(i=i.add(s))}),i}zi(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(e,t){return tk()<=Ne.DEBUG&&x("QueryEngine","Using full collection scan to execute query:",_k(t)),this.Ui.getDocumentsMatchingQuery(e,t,nr.min())}Wi(e,t,i,r){return this.Ui.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class oEe{constructor(e,t,i,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new yt(ue),this.Yi=new So(s=>Hl(s),gp),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(i)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OW(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function VW(n,e){return $k.apply(this,arguments)}function $k(){return $k=_(function*(n,e){const t=F(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.tr(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=ve();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(i,l).next(c=>({er:c,removedBatchIds:o,addedBatchIds:a}))})})}),$k.apply(this,arguments)}function aEe(n,e){const t=F(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const u=l.batch,d=u.keys();let h=C.resolve();return d.forEach(f=>{h=h.next(()=>c.getEntry(a,f)).next(p=>{const m=l.docVersions.get(f);K(null!==m),p.version.compareTo(m)<0&&(u.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),c.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let a=ve();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function BW(n){const e=F(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function lEe(n,e){const t=F(n),i=e.snapshotVersion;let r=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Zi.newChangeBuffer({trackRemovals:!0});r=t.Ji;const a=[];e.targetChanges.forEach((u,d)=>{const h=r.get(d);if(!h)return;a.push(t.Bs.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.Bs.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);var p,m,g;null!==e.targetMismatches.get(d)?f=f.withResumeToken(Sn.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),r=r.insert(d,f),m=f,g=u,(0===(p=h).resumeToken.approximateByteSize()||m.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8||g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0)&&a.push(t.Bs.updateTargetData(s,f))});let l=Ui(),c=ve();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(function UW(n,e,t){let i=ve(),r=ve();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=Ui();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Q.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):x("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{nr:o,sr:r}})}(s,o,e.documentUpdates).next(u=>{l=u.nr,c=u.sr})),!i.isEqual(Q.min())){const u=t.Bs.getLastRemoteSnapshotVersion(s).next(d=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return C.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.Ji=r,s))}function cEe(n,e){const t=F(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function id(n,e){const t=F(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Bs.getTargetData(i,e).next(s=>s?(r=s,C.resolve(r)):t.Bs.allocateTargetId(i).next(o=>(r=new Ao(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Bs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.Ji.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(i.targetId,i),t.Yi.set(e,i.targetId)),i})}function rd(n,e,t){return zk.apply(this,arguments)}function zk(){return zk=_(function*(n,e,t){const i=F(n),r=i.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!pa(o))throw o;x("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ji=i.Ji.remove(e),i.Yi.delete(r.target)}),zk.apply(this,arguments)}function hb(n,e,t){const i=F(n);let r=Q.min(),s=ve();return i.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const u=F(a),d=u.Yi.get(c);return void 0!==d?C.resolve(u.Ji.get(d)):u.Bs.getTargetData(l,c)}(i,o,Ti(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.Hi.getDocumentsMatchingQuery(o,e,t?r:Q.min(),t?s:ve())).next(a=>(function $W(n,e,t){let i=n.Xi.get(e)||Q.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Xi.set(e,i)}(i,function E3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),a),{documents:a,ir:s})))}class Qk{constructor(){this.activeTargetIds=function yk(){return uCe}()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GW{constructor(){this.Hr=new Qk,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,i){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Qk,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hEe{Yr(e){}shutdown(){}}class WW{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){x("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){x("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let mb=null;function Xk(){return null===mb?mb=268435456+Math.round(2147483648*Math.random()):mb++,"0x"+mb.toString(16)}const fEe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pEe{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const pi="WebChannelConnection";class mEe extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,i,r,s){const o=Xk(),a=this.To(e,t);x("RestConnection",`Sending RPC '${e}' ${o}:`,a,i);const l={};return this.Eo(l,r,s),this.Ao(e,a,l,i).then(c=>(x("RestConnection",`Received RPC '${e}' ${o}: `,c),c),c=>{throw Qr("RestConnection",`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",i),c})}vo(e,t,i,r,s,o){return this.Io(e,t,i,r,s)}Eo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+Hu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}To(e,t){return`${this.mo}/v1/${t}:${fEe[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,i,r){const s=Xk();return new Promise((o,a)=>{const l=new fwe;l.setWithCredentials(!0),l.listenOnce(uwe.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ek.NO_ERROR:const u=l.getResponseJson();x(pi,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case ek.TIMEOUT:x(pi,`RPC '${e}' ${s} timed out`),a(new T(D.DEADLINE_EXCEEDED,"Request time out"));break;case ek.HTTP_ERROR:const d=l.getStatus();if(x(pi,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=null==h?void 0:h.error;if(f&&f.status&&f.message){const p=function(m){const g=m.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(g)>=0?g:D.UNKNOWN}(f.status);a(new T(p,f.message))}else a(new T(D.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new T(D.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{x(pi,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);x(pi,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",c,i,15)})}Ro(e,t,i){const r=Xk(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=lwe(),a=cwe(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new hwe({})),this.Eo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const u=s.join("");x(pi,`Creating RPC '${e}' stream ${r}: ${u}`,l);const d=o.createWebChannel(u,l);let h=!1,f=!1;const p=new pEe({ro:g=>{f?x(pi,`Not sending because RPC '${e}' stream ${r} is closed:`,g):(h||(x(pi,`Opening RPC '${e}' stream ${r} transport.`),d.open(),h=!0),x(pi,`RPC '${e}' stream ${r} sending:`,g),d.send(g))},oo:()=>d.close()}),m=(g,b,v)=>{g.listen(b,E=>{try{v(E)}catch(I){setTimeout(()=>{throw I},0)}})};return m(d,Nv.EventType.OPEN,()=>{f||x(pi,`RPC '${e}' stream ${r} transport opened.`)}),m(d,Nv.EventType.CLOSE,()=>{f||(f=!0,x(pi,`RPC '${e}' stream ${r} transport closed`),p.wo())}),m(d,Nv.EventType.ERROR,g=>{f||(f=!0,Qr(pi,`RPC '${e}' stream ${r} transport errored:`,g),p.wo(new T(D.UNAVAILABLE,"The operation could not be completed")))}),m(d,Nv.EventType.MESSAGE,g=>{var b;if(!f){const v=g.data[0];K(!!v);const E=v,I=E.error||(null===(b=E[0])||void 0===b?void 0:b.error);if(I){x(pi,`RPC '${e}' stream ${r} received error:`,I);const B=I.status;let W=function(X){const be=pn[X];if(void 0!==be)return H3(be)}(B),ae=I.message;void 0===W&&(W=D.INTERNAL,ae="Unknown error status: "+B+" with message "+I.message),f=!0,p.wo(new T(W,ae)),d.close()}else x(pi,`RPC '${e}' stream ${r} received:`,v),p._o(v)}}),m(a,dwe.STAT_EVENT,g=>{g.stat===O4.PROXY?x(pi,`RPC '${e}' stream ${r} detected buffering proxy`):g.stat===O4.NOPROXY&&x(pi,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function gb(){return"undefined"!=typeof document?document:null}function Lp(n){return new DCe(n,!0)}class Zk{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=i,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-i);r>0&&x("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class QW{constructor(e,t,i,r,s,o,a,l){this.ii=e,this.$o=i,this.Oo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Zk(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return _(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return _(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var i=this;return _(function*(){i.Ho(),i.Jo(),i.qo.cancel(),i.Fo++,4!==e?i.qo.reset():t&&t.code===D.RESOURCE_EXHAUSTED?(nn(t.toString()),nn("Using maximum backoff delay to prevent overloading the backend."),i.qo.xo()):t&&t.code===D.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Yo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Fo===t&&this.Zo(i,r)},i=>{e(()=>{const r=new T(D.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(r)})})}Zo(e,t){const i=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(r=>{i(()=>this.tu(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Go(){var e=this;this.state=5,this.qo.No(_(function*(){e.state=0,e.start()}))}tu(e){return x("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(x("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gEe extends QW{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function TCe(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:z(),r=e.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(K(void 0===c||"string"==typeof c),Sn.fromBase64String(c||"")):(K(void 0===c||c instanceof Uint8Array),Sn.fromUint8Array(c||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=void 0===l.code?D.UNKNOWN:H3(l.code);return new T(c,l.message||"")}(o);t=new W3(i,r,s,a||null)}else if("documentChange"in e){const i=e.documentChange,r=ks(n,i.document.name),s=sn(i.document.updateTime),o=i.document.createTime?sn(i.document.createTime):Q.min(),a=new ei({mapValue:{fields:i.document.fields}}),l=St.newFoundDocument(r,s,o,a);t=new eb(i.targetIds||[],i.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const i=e.documentDelete,r=ks(n,i.document),s=i.readTime?sn(i.readTime):Q.min(),o=St.newNoDocument(r,s);t=new eb([],i.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const i=e.documentRemove,r=ks(n,i.document);t=new eb([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return z();{const i=e.filter,{count:r=0,unchangedNames:s}=i,o=new yCe(r,s);t=new G3(i.targetId,o)}}var l;return t}(this.serializer,e),i=function(r){if(!("targetChange"in r))return Q.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?Q.min():s.readTime?sn(s.readTime):Q.min()}(e);return this.listener.nu(t,i)}su(e){const t={};t.database=Tp(this.serializer),t.addTarget=function(r,s){let o;const a=s.target;if(o=Gv(a)?{documents:iW(r,a)}:{query:xk(r,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=X3(r,s.resumeToken);const l=Ik(r,s.expectedCount);null!==l&&(o.expectedCount=l)}else if(s.snapshotVersion.compareTo(Q.min())>0){o.readTime=Ju(r,s.snapshotVersion.toTimestamp());const l=Ik(r,s.expectedCount);null!==l&&(o.expectedCount=l)}return o}(this.serializer,e);const i=function xCe(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Wo(t)}iu(e){const t={};t.database=Tp(this.serializer),t.removeTarget=e,this.Wo(t)}}class _Ee extends QW{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(K(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function ACe(n,e){return n&&n.length>0?(K(void 0!==e),n.map(t=>function(i,r){let s=sn(i.updateTime?i.updateTime:r);return s.isEqual(Q.min())&&(s=sn(r)),new pCe(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=sn(e.commitTime);return this.listener.cu(i,t)}return K(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Tp(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>function Ap(n,e){let t;if(e instanceof Xu)t={update:tW(n,e.key,e.value)};else if(e instanceof Zu)t={delete:Sp(n,e.key)};else if(e instanceof To)t={update:tW(n,e.key,e.data),updateMask:PCe(e.fieldMask)};else{if(!(e instanceof vk))return z();t={verify:Sp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const o=s.transform;if(o instanceof Qu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof zl)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof ql)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Yu)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw z()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:ICe(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:z()),t;var r}(this.serializer,i))};this.Wo(t)}}class yEe extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new T(D.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.Io(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new T(D.UNKNOWN,r.toString())})}vo(e,t,i,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,t,i,s,o,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new T(D.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class bEe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(nn(t),this.mu=!1):x("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class wEe{constructor(e,t,i,r,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(a=>{i.enqueueAndForget(_(function*(){var l;Ia(o)&&(x("RemoteStore","Restarting streams for network reachability change."),yield(l=_(function*(c){const u=F(c);u.vu.add(4),yield sd(u),u.bu.set("Unknown"),u.vu.delete(4),yield Vp(u)}),function(c){return l.apply(this,arguments)})(o))}))}),this.bu=new bEe(i,r)}}function Vp(n){return eR.apply(this,arguments)}function eR(){return eR=_(function*(n){if(Ia(n))for(const e of n.Ru)yield e(!0)}),eR.apply(this,arguments)}function sd(n){return tR.apply(this,arguments)}function tR(){return tR=_(function*(n){for(const e of n.Ru)yield e(!1)}),tR.apply(this,arguments)}function _b(n,e){const t=F(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),rR(t)?iR(t):ad(t).Ko()&&nR(t,e))}function Bp(n,e){const t=F(n),i=ad(t);t.Au.delete(e),i.Ko()&&YW(t,e),0===t.Au.size&&(i.Ko()?i.jo():Ia(t)&&t.bu.set("Unknown"))}function nR(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ad(n).su(e)}function YW(n,e){n.Vu.qt(e),ad(n).iu(e)}function iR(n){n.Vu=new bCe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),ad(n).start(),n.bu.gu()}function rR(n){return Ia(n)&&!ad(n).Uo()&&n.Au.size>0}function Ia(n){return 0===F(n).vu.size}function XW(n){n.Vu=void 0}function CEe(n){return sR.apply(this,arguments)}function sR(){return sR=_(function*(n){n.Au.forEach((e,t)=>{nR(n,e)})}),sR.apply(this,arguments)}function EEe(n,e){return oR.apply(this,arguments)}function oR(){return oR=_(function*(n,e){XW(n),rR(n)?(n.bu.Iu(e),iR(n)):n.bu.set("Unknown")}),oR.apply(this,arguments)}function DEe(n,e,t){return aR.apply(this,arguments)}function aR(){return aR=_(function*(n,e,t){if(n.bu.set("Online"),e instanceof W3&&2===e.state&&e.cause)try{yield(i=_(function*(r,s){const o=s.cause;for(const a of s.targetIds)r.Au.has(a)&&(yield r.remoteSyncer.rejectListen(a,o),r.Au.delete(a),r.Vu.removeTarget(a))}),function(r,s){return i.apply(this,arguments)})(n,e)}catch(i){x("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield yb(n,i)}else if(e instanceof eb?n.Vu.Ht(e):e instanceof G3?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Q.min()))try{const i=yield BW(n.localStore);t.compareTo(i)>=0&&(yield function(r,s){const o=r.Vu.ce(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=r.Au.get(l);c&&r.Au.set(l,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach((a,l)=>{const c=r.Au.get(a);if(!c)return;r.Au.set(a,c.withResumeToken(Sn.EMPTY_BYTE_STRING,c.snapshotVersion)),YW(r,a);const u=new Ao(c.target,a,l,c.sequenceNumber);nR(r,u)}),r.remoteSyncer.applyRemoteEvent(o)}(n,t))}catch(i){x("RemoteStore","Failed to raise snapshot:",i),yield yb(n,i)}var i}),aR.apply(this,arguments)}function yb(n,e,t){return lR.apply(this,arguments)}function lR(){return lR=_(function*(n,e,t){if(!pa(e))throw e;n.vu.add(1),yield sd(n),n.bu.set("Offline"),t||(t=()=>BW(n.localStore)),n.asyncQueue.enqueueRetryable(_(function*(){x("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield Vp(n)}))}),lR.apply(this,arguments)}function ZW(n,e){return e().catch(t=>yb(n,t,e))}function od(n){return cR.apply(this,arguments)}function cR(){return cR=_(function*(n){const e=F(n),t=Sa(e);let i=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;IEe(e);)try{const r=yield cEe(e.localStore,i);if(null===r){0===e.Eu.length&&t.jo();break}i=r.batchId,SEe(e,r)}catch(r){yield yb(e,r)}JW(e)&&e6(e)}),cR.apply(this,arguments)}function IEe(n){return Ia(n)&&n.Eu.length<10}function SEe(n,e){n.Eu.push(e);const t=Sa(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function JW(n){return Ia(n)&&!Sa(n).Uo()&&n.Eu.length>0}function e6(n){Sa(n).start()}function TEe(n){return uR.apply(this,arguments)}function uR(){return uR=_(function*(n){Sa(n).hu()}),uR.apply(this,arguments)}function AEe(n){return dR.apply(this,arguments)}function dR(){return dR=_(function*(n){const e=Sa(n);for(const t of n.Eu)e.uu(t.mutations)}),dR.apply(this,arguments)}function xEe(n,e,t){return hR.apply(this,arguments)}function hR(){return hR=_(function*(n,e,t){const i=n.Eu.shift(),r=wk.from(i,e,t);yield ZW(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield od(n)}),hR.apply(this,arguments)}function MEe(n,e){return fR.apply(this,arguments)}function fR(){return fR=_(function*(n,e){var t;e&&Sa(n).ou&&(yield(t=_(function*(i,r){if(j3(s=r.code)&&s!==D.ABORTED){const o=i.Eu.shift();Sa(i).Qo(),yield ZW(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield od(i)}var s}),function(i,r){return t.apply(this,arguments)})(n,e)),JW(n)&&e6(n)}),fR.apply(this,arguments)}function t6(n,e){return pR.apply(this,arguments)}function pR(){return pR=_(function*(n,e){const t=F(n);t.asyncQueue.verifyOperationInProgress(),x("RemoteStore","RemoteStore received new credentials");const i=Ia(t);t.vu.add(3),yield sd(t),i&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Vp(t)}),pR.apply(this,arguments)}function gR(){return gR=_(function*(n,e){const t=F(n);e?(t.vu.delete(2),yield Vp(t)):e||(t.vu.add(2),yield sd(t),t.bu.set("Unknown"))}),gR.apply(this,arguments)}function ad(n){return n.Su||(n.Su=function(e,t,i){const r=F(e);return r.fu(),new gEe(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:CEe.bind(null,n),ao:EEe.bind(null,n),nu:DEe.bind(null,n)}),n.Ru.push(function(){var e=_(function*(t){t?(n.Su.Qo(),rR(n)?iR(n):n.bu.set("Unknown")):(yield n.Su.stop(),XW(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Sa(n){return n.Du||(n.Du=function(e,t,i){const r=F(e);return r.fu(),new _Ee(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:TEe.bind(null,n),ao:MEe.bind(null,n),au:AEe.bind(null,n),cu:xEe.bind(null,n)}),n.Ru.push(function(){var e=_(function*(t){t?(n.Du.Qo(),yield od(n)):(yield n.Du.stop(),n.Eu.length>0&&(x("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class _R{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new In,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,i,r,s){const o=Date.now()+i,a=new _R(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new T(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ld(n,e){if(nn("AsyncQueue",`${e}: ${n}`),pa(n))return new T(D.UNAVAILABLE,`${e}: ${n}`);throw n}class cd{constructor(e){this.comparator=e?(t,i)=>e(t,i)||N.comparator(t.key,i.key):(t,i)=>N.comparator(t.key,i.key),this.keyedMap=vp(),this.sortedSet=new yt(this.comparator)}static emptySet(e){return new cd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof cd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new cd;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class n6{constructor(){this.Cu=new yt(N.comparator)}track(e){const t=e.doc.key,i=this.Cu.get(t);i?0!==e.type&&3===i.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==i.type?this.Cu=this.Cu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Cu=this.Cu.remove(t):1===e.type&&2===i.type?this.Cu=this.Cu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):z():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,i)=>{e.push(i)}),e}}class ud{constructor(e,t,i,r,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,i,r,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new ud(e,t,cd.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_p(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class kEe{constructor(){this.Nu=void 0,this.listeners=[]}}class REe{constructor(){this.queries=new So(e=>C3(e),_p),this.onlineState="Unknown",this.ku=new Set}}function yR(n,e){return vR.apply(this,arguments)}function vR(){return vR=_(function*(n,e){const t=F(n),i=e.query;let r=!1,s=t.queries.get(i);if(s||(r=!0,s=new kEe),r)try{s.Nu=yield t.onListen(i)}catch(o){const a=ld(o,`Initialization of query '${_k(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.listeners.push(e),e.Mu(t.onlineState),s.Nu&&e.$u(s.Nu)&&CR(t)}),vR.apply(this,arguments)}function bR(n,e){return wR.apply(this,arguments)}function wR(){return wR=_(function*(n,e){const t=F(n),i=e.query;let r=!1;const s=t.queries.get(i);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),r=0===s.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),wR.apply(this,arguments)}function PEe(n,e){const t=F(n);let i=!1;for(const r of e){const o=t.queries.get(r.query);if(o){for(const a of o.listeners)a.$u(r)&&(i=!0);o.Nu=r}}i&&CR(t)}function OEe(n,e,t){const i=F(n),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);i.queries.delete(e)}function CR(n){n.ku.forEach(e=>{e.next()})}class ER{constructor(e,t,i){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new ud(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=ud.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class s6{constructor(e){this.key=e}}class o6{constructor(e){this.key=e}}class a6{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ve(),this.mutatedKeys=ve(),this.tc=D3(e),this.ec=new cd(this.tc)}get nc(){return this.Yu}sc(e,t){const i=t?t.ic:new n6,r=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,d)=>{const h=r.get(u),f=yp(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let g=!1;h&&f?h.data.isEqual(f.data)?p!==m&&(i.track({type:3,doc:f}),g=!0):this.rc(h,f)||(i.track({type:2,doc:f}),g=!0,(l&&this.tc(f,l)>0||c&&this.tc(f,c)<0)&&(a=!0)):!h&&f?(i.track({type:0,doc:f}),g=!0):h&&!f&&(i.track({type:1,doc:h}),g=!0,(l||c)&&(a=!0)),g&&(f?(o=o.add(f),s=m?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const u="F"===this.query.limitType?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{ec:o,ic:i,zi:a,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((c,u)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return f(d)-f(h)}(c.type,u.type)||this.tc(c.doc,u.doc)),this.oc(i);const o=t?this.uc():[],a=0===this.Zu.size&&this.current?1:0,l=a!==this.Xu;return this.Xu=a,0!==s.length||l?{snapshot:new ud(this.query,e.ec,r,s,e.mutatedKeys,0===a,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new n6,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ve(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const t=[];return e.forEach(i=>{this.Zu.has(i)||t.push(new o6(i))}),this.Zu.forEach(i=>{e.has(i)||t.push(new s6(i))}),t}hc(e){this.Yu=e.ir,this.Zu=ve();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return ud.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class LEe{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class VEe{constructor(e){this.key=e,this.fc=!1}}class BEe{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new So(a=>C3(a),_p),this._c=new Map,this.mc=new Set,this.gc=new yt(N.comparator),this.yc=new Map,this.Ic=new Lk,this.Tc={},this.Ec=new Map,this.Ac=Xl.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function UEe(n,e){return DR.apply(this,arguments)}function DR(){return DR=_(function*(n,e){const t=WR(n);let i,r;const s=t.wc.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.lc();else{const o=yield id(t.localStore,Ti(e)),a=t.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=yield IR(t,e,i,"current"===a,o.resumeToken),t.isPrimaryClient&&_b(t.remoteStore,o)}return r}),DR.apply(this,arguments)}function IR(n,e,t,i,r){return SR.apply(this,arguments)}function SR(){return SR=_(function*(n,e,t,i,r){n.Rc=(d,h,f)=>{return(p=_(function*(m,g,b,v){let E=g.view.sc(b);E.zi&&(E=yield hb(m.localStore,g.query,!1).then(({documents:W})=>g.view.sc(W,E)));const I=v&&v.targetChanges.get(g.targetId),B=g.view.applyChanges(E,m.isPrimaryClient,I);return FR(m,g.targetId,B.cc),B.snapshot}),function(m,g,b,v){return p.apply(this,arguments)})(n,d,h,f);var p};const s=yield hb(n.localStore,e,!0),o=new a6(e,s.ir),a=o.sc(s.documents),l=Ip.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,r),c=o.applyChanges(a,n.isPrimaryClient,l);FR(n,t,c.cc);const u=new LEe(e,t,o);return n.wc.set(e,u),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),c.snapshot}),SR.apply(this,arguments)}function jEe(n,e){return TR.apply(this,arguments)}function TR(){return TR=_(function*(n,e){const t=F(n),i=t.wc.get(e),r=t._c.get(i.targetId);if(r.length>1)return t._c.set(i.targetId,r.filter(s=>!_p(s,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield rd(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Bp(t.remoteStore,i.targetId),dd(t,i.targetId)}).catch(fa))):(dd(t,i.targetId),yield rd(t.localStore,i.targetId,!0))}),TR.apply(this,arguments)}function AR(){return AR=_(function*(n,e,t){const i=KR(n);try{const r=yield function(s,o){const a=F(s),l=Nt.now(),c=o.reduce((h,f)=>h.add(f.key),ve());let u,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=Ui(),p=ve();return a.Zi.getEntries(h,c).next(m=>{f=m,f.forEach((g,b)=>{b.isValidDocument()||(p=p.add(g))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(m=>{u=m;const g=[];for(const b of o){const v=gCe(b,u.get(b.key).overlayedDocument);null!=v&&g.push(new To(b.key,v,l3(v.value.mapValue),Mt.exists(!0)))}return a.mutationQueue.addMutationBatch(h,l,g,o)}).next(m=>{d=m;const g=m.applyToLocalDocumentSet(u,p);return a.documentOverlayCache.saveOverlays(h,m.batchId,g)})}).then(()=>({batchId:d.batchId,changes:S3(u)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,o,a){let l=s.Tc[s.currentUser.toKey()];l||(l=new yt(ue)),l=l.insert(o,a),s.Tc[s.currentUser.toKey()]=l}(i,r.batchId,t),yield xo(i,r.changes),yield od(i.remoteStore)}catch(r){const s=ld(r,"Failed to persist write");t.reject(s)}}),AR.apply(this,arguments)}function l6(n,e){return xR.apply(this,arguments)}function xR(){return xR=_(function*(n,e){const t=F(n);try{const i=yield lEe(t.localStore,e);e.targetChanges.forEach((r,s)=>{const o=t.yc.get(s);o&&(K(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.fc=!0:r.modifiedDocuments.size>0?K(o.fc):r.removedDocuments.size>0&&(K(o.fc),o.fc=!1))}),yield xo(t,i,e)}catch(i){yield fa(i)}}),xR.apply(this,arguments)}function c6(n,e,t){const i=F(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.wc.forEach((s,o)=>{const a=o.view.Mu(e);a.snapshot&&r.push(a.snapshot)}),function(s,o){const a=F(s);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(const d of u.listeners)d.Mu(o)&&(l=!0)}),l&&CR(a)}(i.eventManager,e),r.length&&i.dc.nu(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function $Ee(n,e,t){return MR.apply(this,arguments)}function MR(){return MR=_(function*(n,e,t){const i=F(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.yc.get(e),s=r&&r.key;if(s){let o=new yt(N.comparator);o=o.insert(s,St.newNoDocument(s,Q.min()));const a=ve().add(s),l=new Dp(Q.min(),new Map,new yt(ue),o,a);yield l6(i,l),i.gc=i.gc.remove(s),i.yc.delete(e),LR(i)}else yield rd(i.localStore,e,!1).then(()=>dd(i,e,t)).catch(fa)}),MR.apply(this,arguments)}function zEe(n,e){return kR.apply(this,arguments)}function kR(){return kR=_(function*(n,e){const t=F(n),i=e.batch.batchId;try{const r=yield aEe(t.localStore,e);NR(t,i,null),OR(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield xo(t,r)}catch(r){yield fa(r)}}),kR.apply(this,arguments)}function qEe(n,e,t){return RR.apply(this,arguments)}function RR(){return RR=_(function*(n,e,t){const i=F(n);try{const r=yield function(s,o){const a=F(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.mutationQueue.lookupMutationBatch(l,o).next(u=>(K(null!==u),c=u.keys(),a.mutationQueue.removeMutationBatch(l,u))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>a.localDocuments.getDocuments(l,c))})}(i.localStore,e);NR(i,e,t),OR(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield xo(i,r)}catch(r){yield fa(r)}}),RR.apply(this,arguments)}function OR(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function NR(n,e,t){const i=F(n);let r=i.Tc[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Tc[i.currentUser.toKey()]=r}}function dd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n._c.get(e))n.wc.delete(i),t&&n.dc.Pc(i,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(i=>{n.Ic.containsKey(i)||u6(n,i)})}function u6(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Bp(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),LR(n))}function FR(n,e,t){for(const i of t)i instanceof s6?(n.Ic.addReference(i.key,e),WEe(n,i)):i instanceof o6?(x("SyncEngine","Document no longer in limbo: "+i.key),n.Ic.removeReference(i.key,e),n.Ic.containsKey(i.key)||u6(n,i.key)):z()}function WEe(n,e){const t=e.key,i=t.path.canonicalString();n.gc.get(t)||n.mc.has(i)||(x("SyncEngine","New document in limbo: "+t),n.mc.add(i),LR(n))}function LR(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new N(He.fromString(e)),i=n.Ac.next();n.yc.set(i,new VEe(t)),n.gc=n.gc.insert(t,i),_b(n.remoteStore,new Ao(Ti(Ku(t.path)),i,"TargetPurposeLimboResolution",ir.ct))}}function xo(n,e,t){return VR.apply(this,arguments)}function VR(){return VR=_(function*(n,e,t){const i=F(n),r=[],s=[],o=[];var a;i.wc.isEmpty()||(i.wc.forEach((a,l)=>{o.push(i.Rc(l,e,t).then(c=>{if((c||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,(null==c?void 0:c.fromCache)?"not-current":"current"),c){r.push(c);const u=Hk.Li(l.targetId,c);s.push(u)}}))}),yield Promise.all(o),i.dc.nu(r),yield(a=_(function*(l,c){const u=F(l);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>C.forEach(c,h=>C.forEach(h.Fi,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>C.forEach(h.Bi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!pa(d))throw d;x("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const f=u.Ji.get(h),m=f.withLastLimboFreeSnapshotVersion(f.snapshotVersion);u.Ji=u.Ji.insert(h,m)}}}),function(l,c){return a.apply(this,arguments)})(i.localStore,s))}),VR.apply(this,arguments)}function KEe(n,e){return BR.apply(this,arguments)}function BR(){return BR=_(function*(n,e){const t=F(n);if(!t.currentUser.isEqual(e)){x("SyncEngine","User change. New user:",e.toKey());const i=yield VW(t.localStore,e);t.currentUser=e,(r=t).Ec.forEach(o=>{o.forEach(a=>{a.reject(new T(D.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.Ec.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield xo(t,i.er)}var r}),BR.apply(this,arguments)}function QEe(n,e){const t=F(n),i=t.yc.get(e);if(i&&i.fc)return ve().add(i.key);{let r=ve();const s=t._c.get(e);if(!s)return r;for(const o of s){const a=t.wc.get(o);r=r.unionWith(a.view.nc)}return r}}function WR(n){const e=F(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=l6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QEe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$Ee.bind(null,e),e.dc.nu=PEe.bind(null,e.eventManager),e.dc.Pc=OEe.bind(null,e.eventManager),e}function KR(n){const e=F(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zEe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qEe.bind(null,e),e}class vb{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return _(function*(){t.serializer=Lp(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function LW(n,e,t,i){return new oEe(n,e,t,i)}(this.persistence,new FW,e.initialUser,this.serializer)}createPersistence(e){return new Vk(cb.zs,this.serializer)}createSharedClientState(e){return new GW}terminate(){var e=this;return _(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class hd{initialize(e,t){var i=this;return _(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>c6(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=KEe.bind(null,i.syncEngine),yield function mR(n,e){return gR.apply(this,arguments)}(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new REe}createDatastore(e){const t=Lp(e.databaseInfo.databaseId),i=new mEe(e.databaseInfo);return new yEe(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,s=a=>c6(this.syncEngine,a,0),o=WW.D()?new WW:new hEe,new wEe(t,i,r,s,o);var t,i,r,s,o}createSyncEngine(e,t){return function(i,r,s,o,a,l,c){const u=new BEe(i,r,s,o,a,l);return c&&(u.vc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=_(function*(t){const i=F(t);x("RemoteStore","RemoteStore shutting down."),i.vu.add(5),yield sd(i),i.Pu.shutdown(),i.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}class bb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):nn("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class l0e{constructor(e,t,i,r){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Vn.UNAUTHENTICATED,this.clientId=V4.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var o=_(function*(a){x("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(i,o=>(x("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return _(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new T(D.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new In;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(_(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=ld(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function wb(n,e){return QR.apply(this,arguments)}function QR(){return QR=_(function*(n,e){n.asyncQueue.verifyOperationInProgress(),x("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=_(function*(s){i.isEqual(s)||(yield VW(e.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),QR.apply(this,arguments)}function YR(n,e){return XR.apply(this,arguments)}function XR(){return XR=_(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield ZR(n);x("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>t6(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>t6(e.remoteStore,s)),n._onlineComponents=e}),XR.apply(this,arguments)}function g6(n){return"FirebaseError"===n.name?n.code===D.FAILED_PRECONDITION||n.code===D.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function ZR(n){return JR.apply(this,arguments)}function JR(){return JR=_(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){x("FirestoreClient","Using user provided OfflineComponentProvider");try{yield wb(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!g6(t))throw t;Qr("Error using user provided cache. Falling back to memory cache: "+t),yield wb(n,new vb)}}else x("FirestoreClient","Using default OfflineComponentProvider"),yield wb(n,new vb);return n._offlineComponents}),JR.apply(this,arguments)}function Cb(n){return eP.apply(this,arguments)}function eP(){return eP=_(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(x("FirestoreClient","Using user provided OnlineComponentProvider"),yield YR(n,n._uninitializedComponentsProvider._online)):(x("FirestoreClient","Using default OnlineComponentProvider"),yield YR(n,new hd))),n._onlineComponents}),eP.apply(this,arguments)}function fd(n){return nP.apply(this,arguments)}function nP(){return nP=_(function*(n){const e=yield Cb(n),t=e.eventManager;return t.onListen=UEe.bind(null,e.syncEngine),t.onUnlisten=jEe.bind(null,e.syncEngine),t}),nP.apply(this,arguments)}function C6(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const E6=new Map;function iP(n,e,t){if(!t)throw new T(D.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function D6(n){if(!N.isDocumentKey(n))throw new T(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function I6(n){if(N.isDocumentKey(n))throw new T(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Db(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":z()}function Ve(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new T(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Db(n);throw new T(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class T6{constructor(e){var t,i;if(void 0===e.host){if(void 0!==e.ssl)throw new T(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new T(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function _0e(n,e,t,i){if(!0===e&&!0===i)throw new T(D.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=C6(null!==(i=e.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(r){if(void 0!==r.timeoutSeconds){if(isNaN(r.timeoutSeconds))throw new T(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new T(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new T(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Up{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new T6({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new T(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new T(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new T6(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new mwe;switch(t.type){case"firstParty":return new vwe(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new T(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=E6.get(e);t&&(x("ComponentProvider","Removing Datastore"),E6.delete(e),t.terminate())}(this),Promise.resolve()}}class on{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new on(this.firestore,e,this._key)}}class ti{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ti(this.firestore,e,this._query)}}class Rs extends ti{constructor(e,t,i){super(e,t,Ku(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new on(this.firestore,null,new N(e))}withConverter(e){return new Rs(this.firestore,e,this._path)}}function v0e(n,e,...t){if(n=Re(n),iP("collection","path",e),n instanceof Up){const i=He.fromString(e,...t);return I6(i),new Rs(n,null,i)}{if(!(n instanceof on||n instanceof Rs))throw new T(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(He.fromString(e,...t));return I6(i),new Rs(n.firestore,null,i)}}function A6(n,e,...t){if(n=Re(n),1===arguments.length&&(e=V4.A()),iP("doc","path",e),n instanceof Up){const i=He.fromString(e,...t);return D6(i),new on(n,null,new N(i))}{if(!(n instanceof on||n instanceof Rs))throw new T(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(He.fromString(e,...t));return D6(i),new on(n.firestore,n instanceof Rs?n.converter:null,new N(i))}}class b0e{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Zk(this,"async_queue_retry"),this.Xc=()=>{const t=gb();t&&x("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=gb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=gb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new In;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return _(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!pa(t))throw t;x("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(i=>{throw this.Wc=i,this.Hc=!1,nn("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(i)),i}).then(i=>(this.Hc=!1,i))));return this.Gc=t,t}enqueueAfterDelay(e,t,i){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=_R.createAndSchedule(this,e,t,i,s=>this.na(s));return this.zc.push(r),r}Zc(){this.Wc&&z()}verifyOperationInProgress(){}sa(){var e=this;return _(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function rP(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class Tt extends Up{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new b0e,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||M6(this),this._firestoreClient.terminate()}}function C0e(n,e){const i="string"==typeof n?n:e||"(default)",r=ia("object"==typeof n?n:_f(),"firestore").getImmediate({identifier:i});if(!r._initialized){const s=EI("firestore");s&&function y0e(n,e,t,i={}){var r;const s=(n=Ve(n,Up))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&Qr("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let o,a;if("string"==typeof i.mockUserToken)o=i.mockUserToken,a=Vn.MOCK_USER;else{o=DI(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new T(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Vn(l)}n._authCredentials=new gwe(new F4(o,a))}}(r,...s)}return r}function mn(n){return n._firestoreClient||M6(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function M6(n){var e,t,i;const r=n._freezeSettings(),s=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Qwe(n._databaseId,a,n._persistenceKey,(c=r).host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,C6(c.experimentalLongPollingOptions),c.useFetchStreams));var a,c;n._firestoreClient=new l0e(n._authCredentials,n._appCheckCredentials,n._queue,s),(null===(t=r.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(i=r.cache)||void 0===i?void 0:i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}class Jl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jl(Sn.fromBase64String(e))}catch(t){throw new T(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jl(Sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class pd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new T(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sP{constructor(e){this._methodName=e}}class oP{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new T(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new T(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}}const D0e=/^__.*__$/;class I0e{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new To(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xu(e,this.data,t,this.fieldTransforms)}}class P6{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new To(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function O6(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}class Ib{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Ib(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:i,la:!1});return r.fa(e),r}da(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:i,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Tb(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(O6(this.ca)&&D0e.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class S0e{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Lp(e)}ya(e,t,i,r=!1){return new Ib({ca:e,methodName:t,ga:i,path:rn.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function md(n){const e=n._freezeSettings(),t=Lp(n._databaseId);return new S0e(n._databaseId,!!e.ignoreUndefinedProperties,t)}function aP(n,e,t,i,r,s={}){const o=n.ya(s.merge||s.mergeFields?2:0,e,t,r);cP("Data must be an object, but it was:",o,i);const a=B6(i,o);let l,c;if(s.merge)l=new Bi(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const h=$p(e,d,t);if(!o.contains(h))throw new T(D.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);j6(u,h)||u.push(h)}l=new Bi(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new I0e(new ei(a),l,c)}class Hp extends sP{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hp}}function F6(n,e,t,i){const r=n.ya(1,e,t);cP("Data must be an object, but it was:",r,i);const s=[],o=ei.empty();ma(i,(l,c)=>{const u=Sb(e,l,t);c=Re(c);const d=r.da(u);if(c instanceof Hp)s.push(u);else{const h=ec(c,d);null!=h&&(s.push(u),o.set(u,h))}});const a=new Bi(s);return new P6(o,a,r.fieldTransforms)}function L6(n,e,t,i,r,s){const o=n.ya(1,e,t),a=[$p(e,i,t)],l=[r];if(s.length%2!=0)throw new T(D.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push($p(e,s[h])),l.push(s[h+1]);const c=[],u=ei.empty();for(let h=a.length-1;h>=0;--h)if(!j6(c,a[h])){const f=a[h];let p=l[h];p=Re(p);const m=o.da(f);if(p instanceof Hp)c.push(f);else{const g=ec(p,m);null!=g&&(c.push(f),u.set(f,g))}}const d=new Bi(c);return new P6(u,d,o.fieldTransforms)}function V6(n,e,t,i=!1){return ec(t,n.ya(i?4:3,e))}function ec(n,e){if(U6(n=Re(n)))return cP("Unsupported field value:",e,n),B6(n,e);if(n instanceof sP)return function(t,i){if(!O6(i.ca))throw i._a(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,i){const r=[];let s=0;for(const o of t){let a=ec(o,i.wa(s));null==a&&(a={nullValue:"NULL_VALUE"}),r.push(a),s++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=Re(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return M3(i.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=Nt.fromDate(t);return{timestampValue:Ju(i.serializer,r)}}if(t instanceof Nt){const r=new Nt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ju(i.serializer,r)}}if(t instanceof oP)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Jl)return{bytesValue:X3(i.serializer,t._byteString)};if(t instanceof on){const r=i.databaseId,s=t.firestore._databaseId;if(!s.isEqual(r))throw i._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Sk(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i._a(`Unsupported field value: ${Db(t)}`)}(n,e)}function B6(n,e){const t={};return Z4(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ma(n,(i,r)=>{const s=ec(r,e.ha(i));null!=s&&(t[i]=s)}),{mapValue:{fields:t}}}function U6(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Nt||n instanceof oP||n instanceof Jl||n instanceof on||n instanceof sP)}function cP(n,e,t){if(!U6(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=Db(t);throw e._a("an object"===i?n+" a custom object":n+" "+i)}var i}function $p(n,e,t){if((e=Re(e))instanceof pd)return e._internalPath;if("string"==typeof e)return Sb(n,e);throw Tb("Field path arguments must be of type string or ",n,!1,void 0,t)}const M0e=new RegExp("[~\\*/\\[\\]]");function Sb(n,e,t){if(e.search(M0e)>=0)throw Tb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new pd(...e.split("."))._internalPath}catch(i){throw Tb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Tb(n,e,t,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new T(D.INVALID_ARGUMENT,a+n+l)}function j6(n,e){return n.some(t=>t.isEqual(e))}class uP{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new on(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new k0e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ab("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class k0e extends uP{data(){return super.data()}}function Ab(n,e){return"string"==typeof e?Sb(n,e):e instanceof pd?e._internalPath:e._delegate._internalPath}function H6(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new T(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dP{}class zp extends dP{}function R0e(n,e,...t){let i=[];e instanceof dP&&i.push(e),i=i.concat(t),function(r){const s=r.filter(a=>a instanceof gd).length,o=r.filter(a=>a instanceof qp).length;if(s>1||s>0&&o>0)throw new T(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class qp extends zp{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new qp(e,t,i)}_apply(e){const t=this._parse(e);return G6(e._query,t),new ti(e.firestore,e.converter,gk(e._query,t))}_parse(e){const t=md(e.firestore);return function(r,s,o,a,l,c,u){let d;if(l.isKeyField()){if("array-contains"===c||"array-contains-any"===c)throw new T(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if("in"===c||"not-in"===c){q6(u,c);const h=[];for(const f of u)h.push(z6(a,r,f));d={arrayValue:{values:h}}}else d=z6(a,r,u)}else"in"!==c&&"not-in"!==c&&"array-contains-any"!==c||q6(u,c),d=V6(o,"where",u,"in"===c||"not-in"===c);return Fe.create(l,c,d)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function P0e(n,e,t){const i=e,r=Ab("where",n);return qp._create(r,i,t)}class gd extends dP{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new gd(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:ot.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,r){let s=i;const o=r.getFlattenedFilters();for(const a of o)G6(s,a),s=gk(s,a)}(e._query,t),new ti(e.firestore,e.converter,gk(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function xb(...n){return n.forEach(e=>K6("or",e)),gd._create("or",n)}function Mo(...n){return n.forEach(e=>K6("and",e)),gd._create("and",n)}class hP extends zp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new hP(e,t)}_apply(e){const t=function(i,r,s){if(null!==i.startAt)throw new T(D.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new T(D.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Gu(r,s);return function(a,l){if(null===pk(a)){const c=Kv(a);null!==c&&W6(0,c,l.field)}}(i,o),o}(e._query,this._field,this._direction);return new ti(e.firestore,e.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new Io(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function O0e(n,e="asc"){const t=e,i=Ab("orderBy",n);return hP._create(i,t)}class Mb extends zp{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new Mb(e,t,i)}_apply(e){return new ti(e.firestore,e.converter,Qv(e._query,this._limit,this._limitType))}}function N0e(n){return function S6(n,e){if(e<=0)throw new T(D.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}("limit",n),Mb._create("limit",n,"F")}class kb extends zp{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new kb(e,t,i)}_apply(e){const t=$6(e,this.type,this._docOrFields,this._inclusive);return new ti(e.firestore,e.converter,(r=t,new Io((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}function F0e(...n){return kb._create("startAt",n,!0)}function L0e(...n){return kb._create("startAfter",n,!1)}class Rb extends zp{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new Rb(e,t,i)}_apply(e){const t=$6(e,this.type,this._docOrFields,this._inclusive);return new ti(e.firestore,e.converter,(r=t,new Io((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function V0e(...n){return Rb._create("endAt",n,!0)}function $6(n,e,t,i){if(t[0]=Re(t[0]),t[0]instanceof uP)return function(r,s,o,a,l){if(!a)throw new T(D.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const c=[];for(const u of $l(r))if(u.field.isKeyField())c.push(jl(s,a.key));else{const d=a.data.field(u.field);if(jv(d))throw new T(D.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===d){const h=u.field.canonicalString();throw new T(D.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${h}' (used as the orderBy) does not exist.`)}c.push(d)}return new ba(c,l)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=md(n.firestore);return function(s,o,a,l,c,u){const d=s.explicitOrderBy;if(c.length>d.length)throw new T(D.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const h=[];for(let f=0;f<c.length;f++){const p=c[f];if(d[f].field.isKeyField()){if("string"!=typeof p)throw new T(D.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof p}`);if(!mk(s)&&-1!==p.indexOf("/"))throw new T(D.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${p}' contains a slash.`);const m=s.path.child(He.fromString(p));if(!N.isDocumentKey(m))throw new T(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${m}' is not because it contains an odd number of segments.`);const g=new N(m);h.push(jl(o,g))}else{const m=V6(a,l,p);h.push(m)}}return new ba(h,u)}(n._query,n.firestore._databaseId,r,e,t,i)}}function z6(n,e,t){if("string"==typeof(t=Re(t))){if(""===t)throw new T(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mk(e)&&-1!==t.indexOf("/"))throw new T(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(He.fromString(t));if(!N.isDocumentKey(i))throw new T(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return jl(n,new N(i))}if(t instanceof on)return jl(n,t._key);throw new T(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Db(t)}.`)}function q6(n,e){if(!Array.isArray(n)||0===n.length)throw new T(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function G6(n,e){if(e.isInequality()){const i=Kv(n),r=e.field;if(null!==i&&!i.isEqual(r))throw new T(D.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const s=pk(n);null!==s&&W6(0,r,s)}const t=function(i,r){for(const s of i)for(const o of s.getFlattenedFilters())if(r.indexOf(o.op)>=0)return o.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new T(D.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function W6(n,e,t){if(!t.isEqual(e))throw new T(D.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}function K6(n,e){if(!(e instanceof qp||e instanceof gd))throw new T(D.INVALID_ARGUMENT,`Function ${n}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}function fP(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class tc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _d extends uP{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Ab("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Pb extends _d{data(e={}){return super.data(e)}}class yd{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new tc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Pb(this._firestore,this._userDataWriter,i.key,i,new tc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new T(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>({type:"added",doc:new Pb(i._firestore,i._userDataWriter,o.doc.key,o.doc,new tc(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>r||3!==o.type).map(o=>{const a=new Pb(i._firestore,i._userDataWriter,o.doc.key,o.doc,new tc(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return 0!==o.type&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:j0e(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function j0e(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function H0e(n){n=Ve(n,on);const e=Ve(n.firestore,Tt);return function b6(n,e,t={}){const i=new In;return n.asyncQueue.enqueueAndForget(_(function*(){return function(r,s,o,a,l){const c=new bb({next:d=>{s.enqueueAndForget(()=>bR(r,u));const h=d.docs.has(o);!h&&d.fromCache?l.reject(new T(D.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&a&&"server"===a.source?l.reject(new T(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new ER(Ku(o.path),c,{includeMetadataChanges:!0,Ku:!0});return yR(r,u)}(yield fd(n),n.asyncQueue,e,t,i)})),i.promise}(mn(e),n._key).then(t=>pP(e,n,t))}class Ta extends class B0e{convertValue(e,t="none"){switch(ya(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Do(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ma(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new oP(Kt(e.latitude),Kt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Hv(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(hp(e));default:return null}}convertTimestamp(e){const t=ga(e);return new Nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=He.fromString(e);K(aW(i));const r=new Ul(i.get(1),i.get(3)),s=new N(i.popFirst(5));return r.isEqual(t)||nn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new on(this.firestore,null,t)}}function $0e(n){n=Ve(n,ti);const e=Ve(n.firestore,Tt),t=mn(e),i=new Ta(e);return H6(n._query),function w6(n,e,t={}){const i=new In;return n.asyncQueue.enqueueAndForget(_(function*(){return function(r,s,o,a,l){const c=new bb({next:d=>{s.enqueueAndForget(()=>bR(r,u)),d.fromCache&&"server"===a.source?l.reject(new T(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new ER(o,c,{includeMetadataChanges:!0,Ku:!0});return yR(r,u)}(yield fd(n),n.asyncQueue,e,t,i)})),i.promise}(t,n._query).then(r=>new yd(e,i,n,r))}function z0e(n,e,t){n=Ve(n,on);const i=Ve(n.firestore,Tt),r=fP(n.converter,e,t);return Gp(i,[aP(md(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,Mt.none())])}function q0e(n,e,t,...i){n=Ve(n,on);const r=Ve(n.firestore,Tt),s=md(r);let o;return o="string"==typeof(e=Re(e))||e instanceof pd?L6(s,"updateDoc",n._key,e,t,i):F6(s,"updateDoc",n._key,e),Gp(r,[o.toMutation(n._key,Mt.exists(!0))])}function G0e(n){return Gp(Ve(n.firestore,Tt),[new Zu(n._key,Mt.none())])}function W0e(n,e){const t=Ve(n.firestore,Tt),i=A6(n),r=fP(n.converter,e);return Gp(t,[aP(md(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Mt.exists(!1))]).then(()=>i)}function K0e(n,...e){var t,i,r;n=Re(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||rP(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(rP(e[o])){const d=e[o];e[o]=null===(t=d.next)||void 0===t?void 0:t.bind(d),e[o+1]=null===(i=d.error)||void 0===i?void 0:i.bind(d),e[o+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}let l,c,u;if(n instanceof on)c=Ve(n.firestore,Tt),u=Ku(n._key.path),l={next:d=>{e[o]&&e[o](pP(c,n,d))},error:e[o+1],complete:e[o+2]};else{const d=Ve(n,ti);c=Ve(d.firestore,Tt),u=d._query;const h=new Ta(c);l={next:f=>{e[o]&&e[o](new yd(c,h,d,f))},error:e[o+1],complete:e[o+2]},H6(n._query)}return function(d,h,f,p){const m=new bb(p),g=new ER(h,m,f);return d.asyncQueue.enqueueAndForget(_(function*(){return yR(yield fd(d),g)})),()=>{m.Dc(),d.asyncQueue.enqueueAndForget(_(function*(){return bR(yield fd(d),g)}))}}(mn(c),u,a,l)}function Gp(n,e){return function(t,i){const r=new In;return t.asyncQueue.enqueueAndForget(_(function*(){return function HEe(n,e,t){return AR.apply(this,arguments)}(yield function tP(n){return Cb(n).then(e=>e.syncEngine)}(t),i,r)})),r.promise}(mn(n),e)}function pP(n,e,t){const i=t.docs.get(e._key),r=new Ta(n);return new _d(n,r,e._key,i,new tc(t.hasPendingWrites,t.fromCache),e.converter)}class rDe{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=md(e)}set(e,t,i){this._verifyNotCommitted();const r=Ob(e,this._firestore),s=fP(r.converter,t,i),o=aP(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(o.toMutation(r._key,Mt.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const s=Ob(e,this._firestore);let o;return o="string"==typeof(t=Re(t))||t instanceof pd?L6(this._dataReader,"WriteBatch.update",s._key,t,i,r):F6(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Mt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ob(e,this._firestore);return this._mutations=this._mutations.concat(new Zu(t._key,Mt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new T(D.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ob(n,e){if((n=Re(n)).firestore!==e)throw new T(D.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function oDe(n){return mn(n=Ve(n,Tt)),new rDe(n,e=>Gp(n,e))}!function(n,e=!0){Hu="9.22.0",Kn(new Pn("firestore",(t,{instanceIdentifier:i,options:r})=>{const s=t.getProvider("app").getImmediate(),o=new Tt(new _we(t.getProvider("auth-internal")),new bwe(t.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new T(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ul(a.options.projectId,l)}(s,i),s);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),ut(N4,"3.12.0",n),ut(N4,"3.12.0","esm2017")}();class ko{constructor(e){return e}}const Y6="firestore",mP=new k("angularfire2.firestore-instances");function cDe(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new ko(i)}}const uDe={provide:class aDe{constructor(){return Ef(Y6)}},deps:[[new Ze,mP]]},dDe={provide:ko,useFactory:function lDe(n,e){const t=Cf(Y6,n,e);return t&&new ko(t)},deps:[[new Ze,mP],sa]};let hDe=(()=>{class n{constructor(){ut("angularfire",Au.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({providers:[dDe,uDe]}),n})();function fDe(n,...e){return{ngModule:hDe,providers:[{provide:mP,useFactory:cDe(n),multi:!0,deps:[oe,Je,Df,If,[new Ze,sv],[new Ze,Af],...e]}]}}const Nb=Ie(W0e,!0),tt=Ie(v0e,!0),pDe=Ie(G0e,!0),ni=Ie(A6,!0),mDe=Ie(V0e,!0),gDe=Ie(H0e,!0),gn=Ie($0e,!0),_De=Ie(C0e,!0),Wp=Ie(N0e,!0),Fb=Ie(K0e,!0),Kp=Ie(O0e,!0),Ft=Ie(R0e,!0),X6=Ie(z0e,!0),Z6=Ie(L0e,!0),yDe=Ie(F0e,!0),J6=Ie(q0e,!0),Xe=Ie(P0e,!0),e5=Ie(oDe,!0),t5="@firebase/database";let gP="";class bDe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Dn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ff(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class wDe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return bs(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const r5=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new bDe(e)}}catch(e){}return new wDe},nc=r5("localStorage"),_P=r5("sessionStorage"),vd=new Cl("@firebase/database"),s5=function(){let n=1;return function(){return n++}}(),o5=function(n){const e=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);if(r>=55296&&r<=56319){const s=r-55296;i++,R(i<n.length,"Surrogate pair missing trail surrogate."),r=65536+(s<<10)+(n.charCodeAt(i)-56320)}r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=63&r|128):r<65536?(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=63&r|128):(e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=63&r|128)}return e}(n),t=new jde;t.update(e);const i=t.digest();return _y.encodeByteArray(i)},Qp=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=Qp.apply(null,i):e+="object"==typeof i?Dn(i):i,e+=" "}return e};let ic=null,a5=!0;const jn=function(...n){if(!0===a5&&(a5=!1,null===ic&&!0===_P.get("logging_enabled")&&function(n,e){R(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(vd.logLevel=Ne.VERBOSE,ic=vd.log.bind(vd),e&&_P.set("logging_enabled",!0)):"function"==typeof n?ic=n:(ic=null,_P.remove("logging_enabled"))}(!0)),ic){const e=Qp.apply(null,n);ic(e)}},Yp=function(n){return function(...e){jn(n,...e)}},yP=function(...n){const e="FIREBASE INTERNAL ERROR: "+Qp(...n);vd.error(e)},Ps=function(...n){const e=`FIREBASE FATAL ERROR: ${Qp(...n)}`;throw vd.error(e),new Error(e)},mi=function(...n){const e="FIREBASE WARNING: "+Qp(...n);vd.warn(e)},Lb=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Aa="[MIN_NAME]",Ro="[MAX_NAME]",rc=function(n,e){if(n===e)return 0;if(n===Aa||e===Ro)return-1;if(e===Aa||n===Ro)return 1;{const t=d5(n),i=d5(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},DDe=function(n,e){return n===e?0:n<e?-1:1},Xp=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Dn(e))},vP=function(n){if("object"!=typeof n||null===n)return Dn(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=Dn(e[i]),t+=":",t+=vP(n[e[i]]);return t+="}",t},c5=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function Hn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const u5=function(n){R(!Lb(n),"Invalid JSON number");const i=1023;let r,s,o,a,l;0===n?(s=0,o=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=a+i,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(r?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);1===h.length&&(h="0"+h),d+=h}return d.toLowerCase()},ADe=new RegExp("^-?(0*)\\d{1,10}$"),d5=function(n){if(ADe.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},bd=function(n){try{n()}catch(e){setTimeout(()=>{throw mi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Zp=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class RDe{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){mi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class PDe{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(jn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',mi(e)}}let Jp=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const g5=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,v5="websocket",b5="long_polling";class wP{constructor(e,t,i,r,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=nc.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&nc.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function w5(n,e,t){let i;if(R("string"==typeof e,"typeof type must == string"),R("object"==typeof t,"typeof params must == object"),e===v5)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==b5)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function ODe(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return Hn(t,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}class NDe{constructor(){this.counters_={}}incrementCounter(e,t=1){bs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return xde(this.counters_)}}const CP={},EP={};function DP(n){const e=n.toString();return CP[e]||(CP[e]=new NDe),CP[e]}class LDe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&bd(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class xa{constructor(e,t,i,r,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Yp(e),this.stats_=DP(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),w5(t,b5,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new LDe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new IP((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&g5.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){xa.forceAllow_=!0}static forceDisallow(){xa.forceDisallow_=!0}static isAvailable(){return!(!xa.forceAllow_&&(xa.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Dn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=p$(t),r=c5(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Dn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class IP{constructor(e,t,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=s5(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=IP.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){jn("frame writing exception"),a.stack&&jn(a.stack),jn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||jn("No IE domain setting required")}catch(t){const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const o=this.pendingSegs.shift();i=i+"&seg"+r+"="+o.seg+"&ts"+r+"="+o.ts+"&d"+r+"="+o.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{jn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(i){}},Math.floor(1))}}let Bb=null;"undefined"!=typeof MozWebSocket?Bb=MozWebSocket:"undefined"!=typeof WebSocket&&(Bb=WebSocket);let wd=(()=>{class n{constructor(t,i,r,s,o,a,l){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Yp(this.connId),this.stats_=DP(i),this.connURL=n.connectionURL_(i,a,l,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,o){const a={v:"5"};return"undefined"!=typeof location&&location.hostname&&g5.test(location.hostname)&&(a.r="f"),i&&(a.s=i),r&&(a.ls=r),s&&(a.ac=s),o&&(a.p=o),w5(t,v5,a)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,nc.set("previous_websocket_failure",!0);try{let r;0,this.mySock=new Bb(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==Bb&&!n.forceDisallow_}static previouslyFailed(){return nc.isInMemoryStorage||!0===nc.get("previous_websocket_failure")}markConnectionHealthy(){nc.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=ff(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(R(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=Dn(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=c5(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),A5=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[xa,wd]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=wd&&wd.isAvailable();let r=i&&!wd.previouslyFailed();if(t.webSocketOnly&&(i||mi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[wd];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class N5{constructor(e,t,i,r,s,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Yp("c:"+this.id+":"),this.transportManager_=new A5(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Zp(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Xp("t",e),i=Xp("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Xp("t",e),i=Xp("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Xp("t",e);if("d"in e){const i=e.d;if("h"===t){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?yP("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):yP("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&mi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Zp(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Zp(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(nc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class F5{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class L5{constructor(e){this.allowedEvents_=e,this.listeners_={},R(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(e){R(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Ub extends L5{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!II()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ub}getInitialEvent(e){return R("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class nt{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Ke(){return new nt("")}function Se(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ma(n){return n.pieces_.length-n.pieceNum_}function ft(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new nt(n.pieces_,e)}function TP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function em(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function U5(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new nt(e,0)}function kt(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof nt)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new nt(t,0)}function Te(n){return n.pieceNum_>=n.pieces_.length}function Ai(n,e){const t=Se(n),i=Se(e);if(null===t)return e;if(t===i)return Ai(ft(n),ft(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function sIe(n,e){const t=em(n,0),i=em(e,0);for(let r=0;r<t.length&&r<i.length;r++){const s=rc(t[r],i[r]);if(0!==s)return s}return t.length===i.length?0:t.length<i.length?-1:1}function AP(n,e){if(Ma(n)!==Ma(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Sr(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Ma(n)>Ma(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class oIe{constructor(e,t){this.errorPrefix_=t,this.parts_=em(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Iy(this.parts_[i]);j5(this)}}function j5(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+sc(n))}function sc(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class xP extends L5{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new xP}getInitialEvent(e){return R("visible"===e,"Unknown event type: "+e),[this.visible_]}}const tm=1e3;let Hb,oc=(()=>{class n extends F5{constructor(t,i,r,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=Yp("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=tm,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");xP.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Ub.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const s=++this.requestNumber_,o={r:s,a:t,b:i};this.log_(Dn(o)),R(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const i=new Er,r={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:r,onComplete:a=>{const l=a.d;"ok"===a.s?i.resolve(l):i.reject(l)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),R(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),R(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r};t.tag&&(o.q=i._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,u=l.s;n.warnOnListenWarnings_(c,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(r,s),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&bs(t,"w")){const r=Du(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();mi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=wy(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=function(n){const t=wy(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),R(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);const o={p:t};s&&(o.q=r,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){const o={p:i,d:r};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,o){this.initConnection_();const a={p:i,d:r};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Dn(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):yP("Unrecognized action received from server: "+Dn(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){R(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=tm,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=tm,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=tm),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return _(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const u=function(){c?c.close():(l=!0,s())};t.realtime_={close:u,sendRequest:function(f){R(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)}};const h=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[f,p]=yield Promise.all([t.authTokenProvider_.getToken(h),t.appCheckTokenProvider_.getToken(h)]);l?jn("getToken() completed but was canceled"):(jn("getToken() completed. Creating connection."),t.authToken_=f&&f.accessToken,t.appCheckToken_=p&&p.token,c=new N5(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,s,m=>{mi(m+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(f){t.log_("Failed to get token: "+f),l||(t.repoInfo_.nodeAdmin&&mi(f),u())}}})()}interrupt(t){jn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){jn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Cy(this.interruptReasons_)&&(this.reconnectDelay_=tm,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(o=>vP(o)).join("$"):"default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){const r=new nt(t).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(i),o.delete(i),0===o.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){jn("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){jn("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";t["sdk."+i+"."+gP.replace(/\./g,"-")]=1,II()?t["framework.cordova"]=1:b$()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Ub.getInstance().currentlyOnline();return Cy(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Me{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Me(e,t)}}class jb{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Me(Aa,e),r=new Me(Aa,t);return 0!==this.compare(i,r)}minPost(){return Me.MIN}}class z5 extends jb{static get __EMPTY_NODE(){return Hb}static set __EMPTY_NODE(e){Hb=e}compare(e,t){return rc(e.name,t.name)}isDefinedOn(e){throw Eu("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Me.MIN}maxPost(){return new Me(Ro,Hb)}makePost(e,t){return R("string"==typeof e,"KeyIndex indexValue must always be a string."),new Me(e,Hb)}toString(){return".key"}}const Os=new z5;class $b{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?i(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let kP,Xr=(()=>{class n{constructor(t,i,r,s,o){this.key=t,this.value=i,this.color=null!=r?r:n.RED,this.left=null!=s?s:ji.EMPTY_NODE,this.right=null!=o?o:ji.EMPTY_NODE}copy(t,i,r,s,o){return new n(null!=t?t:this.key,null!=i?i:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=o?o:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const o=r(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,i,r),null):0===o?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ji.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return ji.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ji{constructor(e,t=ji.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ji(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Xr.BLACK,null,null))}remove(e){return new ji(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Xr.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new $b(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new $b(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new $b(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new $b(this.root_,null,this.comparator_,!0,e)}}function pIe(n,e){return rc(n.name,e.name)}function MP(n,e){return rc(n,e)}ji.EMPTY_NODE=new class fIe{copy(e,t,i,r,s){return this}insert(e,t,i){return new Xr(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const q5=function(n){return"number"==typeof n?"number:"+u5(n):"string:"+n},G5=function(n){if(n.isLeafNode()){const e=n.val();R("string"==typeof e||"number"==typeof e||"object"==typeof e&&bs(e,".sv"),"Priority must be a string or number.")}else R(n===kP||n.isEmpty(),"priority of unexpected type.");R(n===kP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let W5,K5,Q5,Cd=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,R(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),G5(this.priorityNode_)}static set __childrenNodeConstructor(t){W5=t}static get __childrenNodeConstructor(){return W5}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Te(t)?this:".priority"===Se(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=Se(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:(R(".priority"!==r||1===Ma(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ft(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+q5(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?u5(this.value_):this.value_,this.lazyHash_=o5(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(R(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),o=n.VALUE_TYPE_ORDER.indexOf(r);return R(s>=0,"Unknown leaf type: "+i),R(o>=0,"Unknown leaf type: "+r),s===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const vt=new class yIe extends jb{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return 0===s?rc(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Me.MIN}maxPost(){return new Me(Ro,new Cd("[PRIORITY-POST]",Q5))}makePost(e,t){const i=K5(e);return new Me(t,new Cd("[PRIORITY-POST]",i))}toString(){return".priority"}},vIe=Math.log(2);class bIe{constructor(e){this.count=parseInt(Math.log(e+1)/vIe,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const zb=function(n,e,t,i){n.sort(e);const r=function(l,c){const u=c-l;let d,h;if(0===u)return null;if(1===u)return d=n[l],h=t?t(d):d,new Xr(h,d.node,Xr.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=r(l,f),m=r(f+1,c);return d=n[f],h=t?t(d):d,new Xr(h,d.node,Xr.BLACK,p,m)}},a=function(l){let c=null,u=null,d=n.length;const h=function(p,m){const g=d-p,b=d;d-=p;const v=r(g+1,b),E=n[g],I=t?t(E):E;f(new Xr(I,E.node,m,null,v))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const m=l.nextBitIsOne(),g=Math.pow(2,l.count-(p+1));m?h(g,Xr.BLACK):(h(g,Xr.BLACK),h(g,Xr.RED))}return u}(new bIe(n.length));return new ji(i||e,a)};let RP;const Ed={};class Po{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return R(Ed&&vt,"ChildrenNode.ts has not been loaded"),RP=RP||new Po({".priority":Ed},{".priority":vt}),RP}get(e){const t=Du(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ji?t:null}hasIndex(e){return bs(this.indexSet_,e.toString())}addIndex(e,t){R(e!==Os,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(Me.Wrap);let a,o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();a=r?zb(i,e.getCompare()):Ed;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new Po(u,c)}addToIndexes(e,t){const i=Ey(this.indexes_,(r,s)=>{const o=Du(this.indexSet_,s);if(R(o,"Missing index implementation for "+s),r===Ed){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(Me.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),zb(a,o.getCompare())}return Ed}{const a=t.get(e.name);let l=r;return a&&(l=l.remove(new Me(e.name,a))),l.insert(e,e.node)}});return new Po(i,this.indexSet_)}removeFromIndexes(e,t){const i=Ey(this.indexes_,r=>{if(r===Ed)return r;{const s=t.get(e.name);return s?r.remove(new Me(e.name,s)):r}});return new Po(i,this.indexSet_)}}let nm,_e=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&G5(this.priorityNode_),this.children_.isEmpty()&&R(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return nm||(nm=new n(new ji(MP),null,Po.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||nm}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?nm:i}}getChild(t){const i=Se(t);return null===i?this:this.getImmediateChild(i).getChild(ft(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if(R(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new Me(t,i);let s,o;i.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),o=this.indexMap_.addToIndexes(r,this.children_));const a=s.isEmpty()?nm:this.priorityNode_;return new n(s,a,o)}}updateChild(t,i){const r=Se(t);if(null===r)return i;{R(".priority"!==Se(t)||1===Ma(t),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(ft(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,s=0,o=!0;if(this.forEachChild(vt,(a,l)=>{i[a]=l.val(t),r++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*r){const a=[];for(const l in i)a[l]=i[l];return a}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+q5(this.getPriority().val())+":"),this.forEachChild(vt,(i,r)=>{const s=r.hash();""!==s&&(t+=":"+i+":"+s)}),this.lazyHash_=""===t?"":o5(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new Me(t,i));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new Me(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new Me(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Me.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Me.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===im?-1:0}withIndex(t){if(t===Os||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Os||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(vt),s=i.getIterator(vt);let o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===Os?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const im=new class wIe extends _e{constructor(){super(new ji(MP),_e.EMPTY_NODE,Po.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return _e.EMPTY_NODE}isEmpty(){return!1}};function Lt(n,e=null){if(null===n)return _e.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),R(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Cd(n,Lt(e));if(n instanceof Array){let t=_e.EMPTY_NODE;return Hn(n,(i,r)=>{if(bs(n,i)&&"."!==i.substring(0,1)){const s=Lt(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(Lt(e))}{const t=[];let i=!1;if(Hn(n,(o,a)=>{if("."!==o.substring(0,1)){const l=Lt(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),t.push(new Me(o,l)))}}),0===t.length)return _e.EMPTY_NODE;const s=zb(t,pIe,o=>o.name,MP);if(i){const o=zb(t,vt.getCompare());return new _e(s,Lt(e),new Po({".priority":o},{".priority":vt}))}return new _e(s,Lt(e),Po.Default)}}Object.defineProperties(Me,{MIN:{value:new Me(Aa,_e.EMPTY_NODE)},MAX:{value:new Me(Ro,im)}}),z5.__EMPTY_NODE=_e.EMPTY_NODE,Cd.__childrenNodeConstructor=_e,function mIe(n){kP=n}(im),function _Ie(n){Q5=n}(im),function gIe(n){K5=n}(Lt);class PP extends jb{constructor(e){super(),this.indexPath_=e,R(!Te(e)&&".priority"!==Se(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return 0===s?rc(e.name,t.name):s}makePost(e,t){const i=Lt(e),r=_e.EMPTY_NODE.updateChild(this.indexPath_,i);return new Me(t,r)}maxPost(){const e=_e.EMPTY_NODE.updateChild(this.indexPath_,im);return new Me(Ro,e)}toString(){return em(this.indexPath_,0).join("/")}}const OP=new class EIe extends jb{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?rc(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Me.MIN}maxPost(){return Me.MAX}makePost(e,t){const i=Lt(e);return new Me(t,i)}toString(){return".value"}};function Y5(n){return{type:"value",snapshotNode:n}}function Dd(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function rm(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function sm(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class NP{constructor(e){this.index_=e}updateChild(e,t,i,r,s,o){R(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(null!=o&&(i.isEmpty()?e.hasChild(t)?o.trackChildChange(rm(t,a)):R(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Dd(t,i)):o.trackChildChange(sm(t,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(vt,(r,s)=>{t.hasChild(r)||i.trackChildChange(rm(r,s))}),t.isLeafNode()||t.forEachChild(vt,(r,s)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(s)||i.trackChildChange(sm(r,s,o))}else i.trackChildChange(Dd(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?_e.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class om{constructor(e){this.indexedFilter_=new NP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=om.getStartPost_(e),this.endPost_=om.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,r,s,o){return this.matches(new Me(t,i))||(i=_e.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,o)}updateFullNode(e,t,i){t.isLeafNode()&&(t=_e.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(_e.EMPTY_NODE);const s=this;return t.forEachChild(vt,(o,a)=>{s.matches(new Me(o,a))||(r=r.updateImmediateChild(o,_e.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class IIe{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new om(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,r,s,o){return this.rangedFilter_.matches(new Me(t,i))||(i=_e.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,o):this.fullLimitUpdateChild_(e,t,i,s,o)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=_e.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;r=_e.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;r=r.updateImmediateChild(a.name,a.node),o++}}}else{let s;r=t.withIndex(this.index_),r=r.updatePriority(_e.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,_e.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;R(a.numChildren()===this.limit_,"");const l=new Me(t,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){const d=a.getImmediateChild(t);let h=r.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=h&&(h.name===t||a.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);const f=null==h?1:o(h,l);if(u&&!i.isEmpty()&&f>=0)return null!=s&&s.trackChildChange(sm(t,i,d)),a.updateImmediateChild(t,i);{null!=s&&s.trackChildChange(rm(t,d));const m=a.updateImmediateChild(t,_e.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=s&&s.trackChildChange(Dd(h.name,h.node)),m.updateImmediateChild(h.name,h.node)):m}}return i.isEmpty()?e:u&&o(c,l)>=0?(null!=s&&(s.trackChildChange(rm(c.name,c.node)),s.trackChildChange(Dd(t,i))),a.updateImmediateChild(t,i).updateImmediateChild(c.name,_e.EMPTY_NODE)):e}}class FP{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=vt}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return R(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return R(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Aa}hasEnd(){return this.endSet_}getIndexEndValue(){return R(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return R(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ro}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return R(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===vt}copy(){const e=new FP;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function X5(n){const e={};if(n.isDefault())return e;let t;if(n.index_===vt?t="$priority":n.index_===OP?t="$value":n.index_===Os?t="$key":(R(n.index_ instanceof PP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Dn(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=Dn(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+Dn(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=Dn(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+Dn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Z5(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==vt&&(e.i=n.index_.toString()),e}class Gb extends F5{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Yp("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(R(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Gb.getListenId_(e,i),a={};this.listens_[o]=a;const l=X5(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(404===c&&(d=null,c=null),null===c&&this.onDataUpdate_(s,d,!1,i),Du(this.listens_,o)===a){let h;h=c?401===c?"permission_denied":"rest_error:"+c:"ok",r(h,null)}})}unlisten(e,t){const i=Gb.getListenId_(e,t);delete this.listens_[i]}get(e){const t=X5(e._queryParams),i=e._path.toString(),r=new Er;return this.restRequest_(i+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+pf(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=ff(a.responseText)}catch(c){mi("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else 401!==a.status&&404!==a.status&&mi("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}class kIe{constructor(){this.rootNode_=_e.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Wb(){return{value:null,children:new Map}}function Id(n,e,t){if(Te(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=Se(e);n.children.has(i)||n.children.set(i,Wb()),Id(n.children.get(i),e=ft(e),t)}}function BP(n,e){if(Te(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(vt,(i,r)=>{Id(n,new nt(i),r)}),BP(n,e)}}if(n.children.size>0){const t=Se(e);return e=ft(e),n.children.has(t)&&BP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function UP(n,e,t){null!==n.value?t(e,n.value):function RIe(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{UP(r,new nt(e.toString()+"/"+i),t)})}class PIe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Hn(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class FIe{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new PIe(e);const i=1e4+2e4*Math.random();Zp(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Hn(e,(r,s)=>{s>0&&bs(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),Zp(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Tr=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Tr||(Tr={})),Tr))();function $P(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Kb{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Tr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Te(this.path)){if(null!=this.affectedTree.value)return R(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new nt(e));return new Kb(Ke(),t,this.revert)}}return R(Se(this.path)===e,"operationForChild called for unrelated child."),new Kb(ft(this.path),this.affectedTree,this.revert)}}class am{constructor(e,t){this.source=e,this.path=t,this.type=Tr.LISTEN_COMPLETE}operationForChild(e){return Te(this.path)?new am(this.source,Ke()):new am(this.source,ft(this.path))}}class ac{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Tr.OVERWRITE}operationForChild(e){return Te(this.path)?new ac(this.source,Ke(),this.snap.getImmediateChild(e)):new ac(this.source,ft(this.path),this.snap)}}class Sd{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Tr.MERGE}operationForChild(e){if(Te(this.path)){const t=this.children.subtree(new nt(e));return t.isEmpty()?null:t.value?new ac(this.source,Ke(),t.value):new Sd(this.source,Ke(),t)}return R(Se(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Sd(this.source,ft(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ka{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Te(e))return this.isFullyInitialized()&&!this.filtered_;const t=Se(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class LIe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function lm(n,e,t,i,r,s){const o=i.filter(a=>a.type===t);o.sort((a,l)=>function UIe(n,e,t){if(null==e.childName||null==t.childName)throw Eu("Should only compare child_ events.");const i=new Me(e.childName,e.snapshotNode),r=new Me(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,a,l)),o.forEach(a=>{const l=function BIe(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function Qb(n,e){return{eventCache:n,serverCache:e}}function cm(n,e,t,i){return Qb(new ka(e,t,i),n.serverCache)}function e8(n,e,t,i){return Qb(n.eventCache,new ka(e,t,i))}function Yb(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function lc(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let zP;class bt{constructor(e,t=(()=>(zP||(zP=new ji(DDe)),zP))()){this.value=e,this.children=t}static fromObject(e){let t=new bt(null);return Hn(e,(i,r)=>{t=t.set(new nt(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Ke(),value:this.value};if(Te(e))return null;{const i=Se(e),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(ft(e),t);return null!=s?{path:kt(new nt(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Te(e))return this;{const t=Se(e),i=this.children.get(t);return null!==i?i.subtree(ft(e)):new bt(null)}}set(e,t){if(Te(e))return new bt(t,this.children);{const i=Se(e),s=(this.children.get(i)||new bt(null)).set(ft(e),t),o=this.children.insert(i,s);return new bt(this.value,o)}}remove(e){if(Te(e))return this.children.isEmpty()?new bt(null):new bt(null,this.children);{const t=Se(e),i=this.children.get(t);if(i){const r=i.remove(ft(e));let s;return s=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&s.isEmpty()?new bt(null):new bt(this.value,s)}return this}}get(e){if(Te(e))return this.value;{const t=Se(e),i=this.children.get(t);return i?i.get(ft(e)):null}}setTree(e,t){if(Te(e))return t;{const i=Se(e),s=(this.children.get(i)||new bt(null)).setTree(ft(e),t);let o;return o=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new bt(this.value,o)}}fold(e){return this.fold_(Ke(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(kt(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Ke(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(Te(e))return null;{const s=Se(e),o=this.children.get(s);return o?o.findOnPath_(ft(e),kt(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ke(),t)}foreachOnPath_(e,t,i){if(Te(e))return this;{this.value&&i(t,this.value);const r=Se(e),s=this.children.get(r);return s?s.foreachOnPath_(ft(e),kt(t,r),i):new bt(null)}}foreach(e){this.foreach_(Ke(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(kt(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class Zr{constructor(e){this.writeTree_=e}static empty(){return new Zr(new bt(null))}}function um(n,e,t){if(Te(e))return new Zr(new bt(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const o=Ai(r,e);return s=s.updateChild(o,t),new Zr(n.writeTree_.set(r,s))}{const r=new bt(t),s=n.writeTree_.setTree(e,r);return new Zr(s)}}}function qP(n,e,t){let i=n;return Hn(t,(r,s)=>{i=um(i,kt(e,r),s)}),i}function t8(n,e){if(Te(e))return Zr.empty();{const t=n.writeTree_.setTree(e,new bt(null));return new Zr(t)}}function GP(n,e){return null!=cc(n,e)}function cc(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ai(t.path,e)):null}function n8(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(vt,(i,r)=>{e.push(new Me(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new Me(i,r.value))}),e}function Ra(n,e){if(Te(e))return n;{const t=cc(n,e);return new Zr(null!=t?new bt(t):n.writeTree_.subtree(e))}}function WP(n){return n.writeTree_.isEmpty()}function Td(n,e){return i8(Ke(),n.writeTree_,e)}function i8(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{".priority"===r?(R(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):t=i8(kt(n,r),s,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(kt(n,".priority"),i)),t}}function Xb(n,e){return l8(e,n)}function GIe(n,e){if(n.snap)return Sr(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Sr(kt(n.path,t),e))return!0;return!1}function KIe(n){return n.visible}function r8(n,e,t){let i=Zr.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const o=s.path;let a;if(s.snap)Sr(t,o)?(a=Ai(t,o),i=um(i,a,s.snap)):Sr(o,t)&&(a=Ai(o,t),i=um(i,Ke(),s.snap.getChild(a)));else{if(!s.children)throw Eu("WriteRecord should have .snap or .children");if(Sr(t,o))a=Ai(t,o),i=qP(i,a,s.children);else if(Sr(o,t))if(a=Ai(o,t),Te(a))i=qP(i,Ke(),s.children);else{const l=Du(s.children,Se(a));if(l){const c=l.getChild(ft(a));i=um(i,Ke(),c)}}}}}return i}function s8(n,e,t,i,r){if(i||r){const s=Ra(n.visibleWrites,e);return!r&&WP(s)?t:r||null!=t||GP(s,Ke())?Td(r8(n.allWrites,function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(Sr(c.path,e)||Sr(e,c.path))},e),t||_e.EMPTY_NODE):null}{const s=cc(n.visibleWrites,e);if(null!=s)return s;{const o=Ra(n.visibleWrites,e);return WP(o)?t:null!=t||GP(o,Ke())?Td(o,t||_e.EMPTY_NODE):null}}}function Zb(n,e,t,i){return s8(n.writeTree,n.treePath,e,t,i)}function KP(n,e){return function QIe(n,e,t){let i=_e.EMPTY_NODE;const r=cc(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(vt,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(t){const s=Ra(n.visibleWrites,e);return t.forEachChild(vt,(o,a)=>{const l=Td(Ra(s,new nt(o)),a);i=i.updateImmediateChild(o,l)}),n8(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}return n8(Ra(n.visibleWrites,e)).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}(n.writeTree,n.treePath,e)}function o8(n,e,t,i){return function YIe(n,e,t,i,r){R(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=kt(e,t);if(GP(n.visibleWrites,s))return null;{const o=Ra(n.visibleWrites,s);return WP(o)?r.getChild(t):Td(o,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function Jb(n,e){return function ZIe(n,e){return cc(n.visibleWrites,e)}(n.writeTree,kt(n.treePath,e))}function QP(n,e,t){return function XIe(n,e,t,i){const r=kt(e,t),s=cc(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(t)?Td(Ra(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function a8(n,e){return l8(kt(n.treePath,e),n.writeTree)}function l8(n,e){return{treePath:n,writeTree:e}}class nSe{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;R("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),R(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(i,sm(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(i,rm(i,r.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(i,Dd(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw Eu("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,sm(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const c8=new class iSe{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class YP{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new ka(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return QP(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:lc(this.viewCache_),s=function tSe(n,e,t,i,r,s){return function JIe(n,e,t,i,r,s,o){let a;const l=Ra(n.visibleWrites,e),c=cc(l,Ke());if(null!=c)a=c;else{if(null==t)return[];a=Td(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let f=h.getNext();for(;f&&u.length<r;)0!==d(f,i)&&u.push(f),f=h.getNext();return u}}(n.writeTree,n.treePath,e,t,i,r,s)}(this.writes_,r,t,1,i,e);return 0===s.length?null:s[0]}}function u8(n,e,t,i,r,s){const o=e.eventCache;if(null!=Jb(i,t))return e;{let a,l;if(Te(t))if(R(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=lc(e),d=KP(i,c instanceof _e?c:_e.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=Zb(i,lc(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Se(t);if(".priority"===c){R(1===Ma(t),"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const d=o8(i,t,u,l);a=null!=d?n.filter.updatePriority(u,d):o.getNode()}else{const u=ft(t);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const h=o8(i,t,o.getNode(),l);d=null!=h?o.getNode().getImmediateChild(c).updateChild(u,h):o.getNode().getImmediateChild(c)}else d=QP(i,c,e.serverCache);a=null!=d?n.filter.updateChild(o.getNode(),c,d,u,r,s):o.getNode()}}return cm(e,a,o.isFullyInitialized()||Te(t),n.filter.filtersNodes())}}function ew(n,e,t,i,r,s,o,a){const l=e.serverCache;let c;const u=o?n.filter:n.filter.getIndexedFilter();if(Te(t))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(t,i);c=u.updateFullNode(l.getNode(),f,null)}else{const f=Se(t);if(!l.isCompleteForPath(t)&&Ma(t)>1)return e;const p=ft(t),g=l.getNode().getImmediateChild(f).updateChild(p,i);c=".priority"===f?u.updatePriority(l.getNode(),g):u.updateChild(l.getNode(),f,g,p,c8,null)}const d=e8(e,c,l.isFullyInitialized()||Te(t),u.filtersNodes());return u8(n,d,t,r,new YP(r,d,s),a)}function XP(n,e,t,i,r,s,o){const a=e.eventCache;let l,c;const u=new YP(r,e,s);if(Te(t))c=n.filter.updateFullNode(e.eventCache.getNode(),i,o),l=cm(e,c,!0,n.filter.filtersNodes());else{const d=Se(t);if(".priority"===d)c=n.filter.updatePriority(e.eventCache.getNode(),i),l=cm(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=ft(t),f=a.getNode().getImmediateChild(d);let p;if(Te(h))p=i;else{const m=u.getCompleteChild(d);p=null!=m?".priority"===TP(h)&&m.getChild(U5(h)).isEmpty()?m:m.updateChild(h,i):_e.EMPTY_NODE}l=f.equals(p)?e:cm(e,n.filter.updateChild(a.getNode(),d,p,h,u,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function d8(n,e){return n.eventCache.isCompleteForChild(e)}function h8(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function ZP(n,e,t,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=Te(t)?i:new bt(null).setTree(t,i);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const p=h8(0,e.serverCache.getNode().getImmediateChild(d),h);l=ew(n,l,new nt(d),p,r,s,o,a)}}),c.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&null===h.value;if(!u.hasChild(d)&&!f){const m=h8(0,e.serverCache.getNode().getImmediateChild(d),h);l=ew(n,l,new nt(d),m,r,s,o,a)}}),l}class hSe{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new NP(i.getIndex()),s=function SIe(n){return n.loadsAllData()?new NP(n.getIndex()):n.hasLimit()?new IIe(n):new om(n)}(i);this.processor_=function rSe(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(_e.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(_e.EMPTY_NODE,a.getNode(),null),u=new ka(l,o.isFullyInitialized(),r.filtersNodes()),d=new ka(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Qb(d,u),this.eventGenerator_=new LIe(this.query_)}get query(){return this.query_}}function mSe(n,e){const t=lc(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Te(e)&&!t.getImmediateChild(Se(e)).isEmpty())?t.getChild(e):null}function f8(n){return 0===n.eventRegistrations_.length}function p8(n,e,t){const i=[];if(t){R(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,r);o&&i.push(o)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(o)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function m8(n,e,t,i){e.type===Tr.MERGE&&null!==e.source.queryId&&(R(lc(n.viewCache_),"We should always have a full cache before handling merges"),R(Yb(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function oSe(n,e,t,i,r){const s=new nSe;let o,a;if(t.type===Tr.OVERWRITE){const c=t;c.source.fromUser?o=XP(n,e,c.path,c.snap,i,r,s):(R(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Te(c.path),o=ew(n,e,c.path,c.snap,i,r,a,s))}else if(t.type===Tr.MERGE){const c=t;c.source.fromUser?o=function lSe(n,e,t,i,r,s,o){let a=e;return i.foreach((l,c)=>{const u=kt(t,l);d8(e,Se(u))&&(a=XP(n,a,u,c,r,s,o))}),i.foreach((l,c)=>{const u=kt(t,l);d8(e,Se(u))||(a=XP(n,a,u,c,r,s,o))}),a}(n,e,c.path,c.children,i,r,s):(R(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=ZP(n,e,c.path,c.children,i,r,a,s))}else if(t.type===Tr.ACK_USER_WRITE){const c=t;o=c.revert?function dSe(n,e,t,i,r,s){let o;if(null!=Jb(i,t))return e;{const a=new YP(i,e,r),l=e.eventCache.getNode();let c;if(Te(t)||".priority"===Se(t)){let u;if(e.serverCache.isFullyInitialized())u=Zb(i,lc(e));else{const d=e.serverCache.getNode();R(d instanceof _e,"serverChildren would be complete if leaf node"),u=KP(i,d)}u=u,c=n.filter.updateFullNode(l,u,s)}else{const u=Se(t);let d=QP(i,u,e.serverCache);null==d&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),c=null!=d?n.filter.updateChild(l,u,d,ft(t),a,s):e.eventCache.getNode().hasChild(u)?n.filter.updateChild(l,u,_e.EMPTY_NODE,ft(t),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Zb(i,lc(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=Jb(i,Ke()),cm(e,c,o,n.filter.filtersNodes())}}(n,e,c.path,i,r,s):function cSe(n,e,t,i,r,s,o){if(null!=Jb(r,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=i.value){if(Te(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return ew(n,e,t,l.getNode().getChild(t),r,s,a,o);if(Te(t)){let c=new bt(null);return l.getNode().forEachChild(Os,(u,d)=>{c=c.set(new nt(u),d)}),ZP(n,e,t,c,r,s,a,o)}return e}{let c=new bt(null);return i.foreach((u,d)=>{const h=kt(t,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),ZP(n,e,t,c,r,s,a,o)}}(n,e,c.path,c.affectedTree,i,r,s)}else{if(t.type!==Tr.LISTEN_COMPLETE)throw Eu("Unknown operation type: "+t.type);o=function uSe(n,e,t,i,r){const s=e.serverCache;return u8(n,e8(e,s.getNode(),s.isFullyInitialized()||Te(t),s.isFiltered()),t,i,c8,r)}(n,e,t.path,i,s)}const l=s.getChanges();return function aSe(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Yb(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(Y5(Yb(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,r,e,t,i);return function sSe(n,e){R(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),R(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),R(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,g8(n,s.changes,s.viewCache.eventCache.getNode(),null)}function g8(n,e,t,i){return function VIe(n,e,t,i){const r=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function DIe(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),lm(n,r,"child_removed",e,i,t),lm(n,r,"child_added",e,i,t),lm(n,r,"child_moved",s,i,t),lm(n,r,"child_changed",e,i,t),lm(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let tw,iw;class _8{constructor(){this.views=new Map}}function JP(n,e,t,i){const r=e.source.queryId;if(null!==r){const s=n.views.get(r);return R(null!=s,"SyncTree gave us an op for an invalid query."),m8(s,e,t,i)}{let s=[];for(const o of n.views.values())s=s.concat(m8(o,e,t,i));return s}}function y8(n,e,t,i,r){const o=n.views.get(e._queryIdentifier);if(!o){let a=Zb(t,r?i:null),l=!1;a?l=!0:i instanceof _e?(a=KP(t,i),l=!1):(a=_e.EMPTY_NODE,l=!1);const c=Qb(new ka(a,l,!1),new ka(i,r,!1));return new hSe(e,c)}return o}function v8(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Pa(n,e){let t=null;for(const i of n.views.values())t=t||mSe(i,e);return t}function b8(n,e){return e._queryParams.loadsAllData()?nw(n):n.views.get(e._queryIdentifier)}function w8(n,e){return null!=b8(n,e)}function Oa(n){return null!=nw(n)}function nw(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let ISe=1;class C8{constructor(e){this.listenProvider_=e,this.syncPointTree_=new bt(null),this.pendingWriteTree_=function eSe(){return{visibleWrites:Zr.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function eO(n,e,t,i,r){return function HIe(n,e,t,i,r){R(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=um(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?Ad(n,new ac({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Na(n,e,t=!1){const i=function zIe(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function qIe(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);R(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,o=n.allWrites.length-1;for(;r&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&GIe(a,i.path)?r=!1:Sr(i.path,a.path)&&(s=!0)),o--}return!!r&&(s?(function WIe(n){n.visibleWrites=r8(n.allWrites,KIe,Ke()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=t8(n.visibleWrites,i.path):Hn(i.children,l=>{n.visibleWrites=t8(n.visibleWrites,kt(i.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new bt(null);return null!=i.snap?s=s.set(Ke(),!0):Hn(i.children,o=>{s=s.set(new nt(o),!0)}),Ad(n,new Kb(i.path,s,t))}return[]}function dm(n,e,t){return Ad(n,new ac({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function rw(n,e,t,i,r=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||w8(o,e))){const l=function CSe(n,e,t,i){const r=e._queryIdentifier,s=[];let o=[];const a=Oa(n);if("default"===r)for(const[l,c]of n.views.entries())o=o.concat(p8(c,t,i)),f8(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=n.views.get(r);l&&(o=o.concat(p8(l,t,i)),f8(l)&&(n.views.delete(r),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Oa(n)&&s.push(new(function vSe(){return R(tw,"Reference.ts has not been loaded"),tw}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,i);(function bSe(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!r){const u=-1!==c.findIndex(h=>h._queryParams.loadsAllData()),d=n.syncPointTree_.findOnPath(s,(h,f)=>Oa(f));if(u&&!d){const h=n.syncPointTree_.subtree(s);if(!h.isEmpty()){const f=function RSe(n){return n.fold((e,t,i)=>{if(t&&Oa(t))return[nw(t)];{let r=[];return t&&(r=v8(t)),Hn(i,(s,o)=>{r=r.concat(o)}),r}})}(h);for(let p=0;p<f.length;++p){const m=f[p],g=m.query,b=S8(n,m);n.listenProvider_.startListening(fm(g),hm(n,g),b.hashFn,b.onComplete)}}}!d&&c.length>0&&!i&&(u?n.listenProvider_.stopListening(fm(e),null):c.forEach(h=>{const f=n.queryToTagMap.get(ow(h));n.listenProvider_.stopListening(fm(h),f)}))}!function PSe(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=ow(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,c)}return a}function E8(n,e,t,i){const r=nO(n,i);if(null!=r){const s=iO(r),o=s.path,a=s.queryId,l=Ai(o,e);return rO(n,o,new ac($P(a),l,t))}return[]}function tO(n,e,t,i=!1){const r=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(r,(h,f)=>{const p=Ai(h,r);s=s||Pa(f,p),o=o||Oa(f)});let l,a=n.syncPointTree_.get(r);a?(o=o||Oa(a),s=s||Pa(a,Ke())):(a=new _8,n.syncPointTree_=n.syncPointTree_.set(r,a)),null!=s?l=!0:(l=!1,s=_e.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((f,p)=>{const m=Pa(p,Ke());m&&(s=s.updateImmediateChild(f,m))}));const c=w8(a,e);if(!c&&!e._queryParams.loadsAllData()){const h=ow(e);R(!n.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=function OSe(){return ISe++}();n.queryToTagMap.set(h,f),n.tagToQueryMap.set(f,h)}let d=function wSe(n,e,t,i,r,s){const o=y8(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function gSe(n,e){n.eventRegistrations_.push(e)}(o,t),function _Se(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(vt,(s,o)=>{i.push(Dd(s,o))}),t.isFullyInitialized()&&i.push(Y5(t.getNode())),g8(n,i,t.getNode(),e)}(o,t)}(a,e,t,Xb(n.pendingWriteTree_,r),s,l);if(!c&&!o&&!i){const h=b8(a,e);d=d.concat(function NSe(n,e,t){const i=e._path,r=hm(n,e),s=S8(n,t),o=n.listenProvider_.startListening(fm(e),r,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(i);if(r)R(!Oa(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,d)=>{if(!Te(c)&&u&&Oa(u))return[nw(u).query];{let h=[];return u&&(h=h.concat(v8(u).map(f=>f.query))),Hn(d,(f,p)=>{h=h.concat(p)}),h}});for(let c=0;c<l.length;++c){const u=l[c];n.listenProvider_.stopListening(fm(u),hm(n,u))}}return o}(n,e,h))}return d}function sw(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=Pa(a,Ai(o,e));if(c)return c});return s8(r,e,s,t,!0)}function Ad(n,e){return D8(e,n.syncPointTree_,null,Xb(n.pendingWriteTree_,Ke()))}function D8(n,e,t,i){if(Te(n.path))return I8(n,e,t,i);{const r=e.get(Ke());null==t&&null!=r&&(t=Pa(r,Ke()));let s=[];const o=Se(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,u=a8(i,o);s=s.concat(D8(a,l,c,u))}return r&&(s=s.concat(JP(r,n,i,t))),s}}function I8(n,e,t,i){const r=e.get(Ke());null==t&&null!=r&&(t=Pa(r,Ke()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=a8(i,o),u=n.operationForChild(o);u&&(s=s.concat(I8(u,a,l,c)))}),r&&(s=s.concat(JP(r,n,i,t))),s}function S8(n,e){const t=e.query,i=hm(n,t);return{hashFn:()=>(function fSe(n){return n.viewCache_.serverCache.getNode()}(e)||_e.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function xSe(n,e,t){const i=nO(n,t);if(i){const r=iO(i),s=r.path,o=r.queryId,a=Ai(s,e);return rO(n,s,new am($P(o),a))}return[]}(n,t._path,i):function ASe(n,e){return Ad(n,new am({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function TDe(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return rw(n,t,null,s)}}}}function hm(n,e){const t=ow(e);return n.queryToTagMap.get(t)}function ow(n){return n._path.toString()+"$"+n._queryIdentifier}function nO(n,e){return n.tagToQueryMap.get(e)}function iO(n){const e=n.indexOf("$");return R(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new nt(n.substr(0,e))}}function rO(n,e,t){const i=n.syncPointTree_.get(e);return R(i,"Missing sync point for query tag that we're tracking"),JP(i,t,Xb(n.pendingWriteTree_,e),null)}function fm(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function DSe(){return R(iw,"Reference.ts has not been loaded"),iw}())(n._repo,n._path):n}class sO{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new sO(t)}node(){return this.node_}}class oO{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=kt(this.path_,e);return new oO(this.syncTree_,t)}node(){return sw(this.syncTree_,this.path_)}}const T8=function(n,e,t){return n&&"object"==typeof n?(R(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?LSe(n[".sv"],e,t):"object"==typeof n[".sv"]?VSe(n[".sv"],e):void R(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},LSe=function(n,e,t){if("timestamp"===n)return t.timestamp;R(!1,"Unexpected server value: "+n)},VSe=function(n,e,t){n.hasOwnProperty("increment")||R(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&R(!1,"Unexpected increment value: "+i);const r=e.node();if(R(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return"number"!=typeof o?i:o+i},aO=function(n,e,t){return lO(n,new sO(e),t)};function lO(n,e,t){const i=n.getPriority().val(),r=T8(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=T8(o.getValue(),e,t);return a!==o.getValue()||r!==o.getPriority().val()?new Cd(a,Lt(r)):n}{const o=n;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new Cd(r))),o.forEachChild(vt,(a,l)=>{const c=lO(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class cO{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function aw(n,e){let t=e instanceof nt?e:new nt(e),i=n,r=Se(t);for(;null!==r;){const s=Du(i.node.children,r)||{children:{},childCount:0};i=new cO(r,i,s),t=ft(t),r=Se(t)}return i}function uc(n){return n.node.value}function uO(n,e){n.node.value=e,dO(n)}function x8(n){return n.node.childCount>0}function lw(n,e){Hn(n.node.children,(t,i)=>{e(new cO(t,n,i))})}function M8(n,e,t,i){t&&!i&&e(n),lw(n,r=>{M8(r,e,!0,i)}),t&&i&&e(n)}function pm(n){return new nt(null===n.parent?n.name:pm(n.parent)+"/"+n.name)}function dO(n){null!==n.parent&&function jSe(n,e,t){const i=function BSe(n){return void 0===uc(n)&&!x8(n)}(t),r=bs(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,dO(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,dO(n))}(n.parent,n.name,n)}const HSe=/[\[\].#$\/\u0000-\u001F\u007F]/,$Se=/[\[\].#$\u0000-\u001F\u007F]/,hO=10485760,cw=function(n){return"string"==typeof n&&0!==n.length&&!HSe.test(n)},k8=function(n){return"string"==typeof n&&0!==n.length&&!$Se.test(n)},mm=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Lb(n)||n&&"object"==typeof n&&bs(n,".sv")},Ns=function(n,e,t,i){i&&void 0===e||gm(ws(n,"value"),e,t)},gm=function(n,e,t){const i=t instanceof nt?new oIe(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+sc(i));if("function"==typeof e)throw new Error(n+"contains a function "+sc(i)+" with contents = "+e.toString());if(Lb(e))throw new Error(n+"contains "+e.toString()+" "+sc(i));if("string"==typeof e&&e.length>hO/3&&Iy(e)>hO)throw new Error(n+"contains a string greater than "+hO+" utf8 bytes "+sc(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,s=!1;if(Hn(e,(o,a)=>{if(".value"===o)r=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!cw(o)))throw new Error(n+" contains an invalid key ("+o+") "+sc(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function aIe(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Iy(e),j5(n)})(i,o),gm(n,a,i),function lIe(n){const e=n.parts_.pop();n.byteLength_-=Iy(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+sc(i)+" in addition to actual children.")}},pO=function(n,e,t,i){if(!(i&&void 0===t||k8(t)))throw new Error(ws(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Fs=function(n,e){if(".info"===Se(e))throw new Error(n+" failed = Can't modify data under /.info/")};class WSe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function uw(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null!==t&&!AP(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function O8(n,e,t){uw(n,t),N8(n,i=>AP(i,e))}function rr(n,e,t){uw(n,t),N8(n,i=>Sr(i,e)||Sr(e,i))}function N8(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(KSe(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function KSe(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();ic&&jn("event: "+t.toString()),bd(i)}}}class YSe{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new WSe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Wb(),this.transactionQueueTree_=new cO,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function L8(n){const t=n.infoData_.getNode(new nt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function ym(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:L8(n)})}function V8(n,e,t,i,r){n.dataUpdateCount++;const s=new nt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(r)if(i){const l=Ey(t,c=>Lt(c));o=function MSe(n,e,t,i){const r=nO(n,i);if(r){const s=iO(r),o=s.path,a=s.queryId,l=Ai(o,e),c=bt.fromObject(t);return rO(n,o,new Sd($P(a),l,c))}return[]}(n.serverSyncTree_,s,l,r)}else{const l=Lt(t);o=E8(n.serverSyncTree_,s,l,r)}else if(i){const l=Ey(t,c=>Lt(c));o=function TSe(n,e,t){const i=bt.fromObject(t);return Ad(n,new Sd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,s,l)}else{const l=Lt(t);o=dm(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Md(n,s)),rr(n.eventQueue_,a,o)}function B8(n,e){mO(n,"connected",e),!1===e&&function tTe(n){xd(n,"onDisconnectEvents");const e=ym(n),t=Wb();UP(n.onDisconnect_,Ke(),(r,s)=>{const o=function(n,e,t,i){return lO(e,new oO(t,n),i)}(r,s,n.serverSyncTree_,e);Id(t,r,o)});let i=[];UP(t,Ke(),(r,s)=>{i=i.concat(dm(n.serverSyncTree_,r,s));const o=vO(n,r);Md(n,o)}),n.onDisconnect_=Wb(),rr(n.eventQueue_,Ke(),i)}(n)}function mO(n,e,t){const i=new nt("/.info/"+e),r=Lt(t);n.infoData_.updateSnapshot(i,r);const s=dm(n.infoSyncTree_,i,r);rr(n.eventQueue_,i,s)}function dw(n){return n.nextWriteId_++}function nTe(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{"ok"===i&&BP(n.onDisconnect_,e),Fa(0,t,i,r)})}function U8(n,e,t,i){const r=Lt(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(s,o)=>{"ok"===s&&Id(n.onDisconnect_,e,r),Fa(0,i,s,o)})}function _O(n,e,t){let i;i=".info"===Se(e._path)?rw(n.infoSyncTree_,e,t):rw(n.serverSyncTree_,e,t),O8(n.eventQueue_,e._path,i)}function xd(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),jn(t,...e)}function Fa(n,e,t,i){e&&bd(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let s=r;i&&(s+=": "+i);const o=new Error(s);o.code=r,e(o)}})}function yO(n,e,t){return sw(n.serverSyncTree_,e,t)||_e.EMPTY_NODE}function hw(n,e=n.transactionQueueTree_){if(e||fw(n,e),uc(e)){const t=$8(n,e);R(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function lTe(n,e,t){const i=t.map(c=>c.currentWriteId),r=yO(n,e,i);let s=r;const o=r.hash();for(let c=0;c<t.length;c++){const u=t[c];R(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Ai(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{xd(n,"transaction put response",{path:l.toString(),status:c});let u=[];if("ok"===c){const d=[];for(let h=0;h<t.length;h++)t[h].status=2,u=u.concat(Na(n.serverSyncTree_,t[h].currentWriteId)),t[h].onComplete&&d.push(()=>t[h].onComplete(null,!0,t[h].currentOutputSnapshotResolved)),t[h].unwatcher();fw(n,aw(n.transactionQueueTree_,e)),hw(n,n.transactionQueueTree_),rr(n.eventQueue_,e,u);for(let h=0;h<d.length;h++)bd(d[h])}else{if("datastale"===c)for(let d=0;d<t.length;d++)t[d].status=3===t[d].status?4:0;else{mi("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=c}Md(n,e)}},o)}(n,pm(e),t)}else x8(e)&&lw(e,t=>{hw(n,t)})}function Md(n,e){const t=H8(n,e),i=pm(t);return function cTe(n,e,t){if(0===e.length)return;const i=[];let r=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Ai(t,l.path);let d,u=!1;if(R(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,d=l.abortReason,r=r.concat(Na(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)u=!0,d="maxretry",r=r.concat(Na(n.serverSyncTree_,l.currentWriteId,!0));else{const h=yO(n,l.path,o);l.currentInputSnapshot=h;const f=e[a].update(h.val());if(void 0!==f){gm("transaction failed: Data returned ",f,l.path);let p=Lt(f);"object"==typeof f&&null!=f&&bs(f,".priority")||(p=p.updatePriority(h.getPriority()));const g=l.currentWriteId,b=ym(n),v=aO(p,h,b);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=v,l.currentWriteId=dw(n),o.splice(o.indexOf(g),1),r=r.concat(eO(n.serverSyncTree_,l.path,v,l.currentWriteId,l.applyLocally)),r=r.concat(Na(n.serverSyncTree_,g,!0))}else u=!0,d="nodata",r=r.concat(Na(n.serverSyncTree_,l.currentWriteId,!0))}rr(n.eventQueue_,t,r),r=[],u&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&i.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}fw(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)bd(i[a]);hw(n,n.transactionQueueTree_)}(n,$8(n,t),i),i}function H8(n,e){let t,i=n.transactionQueueTree_;for(t=Se(e);null!==t&&void 0===uc(i);)i=aw(i,t),t=Se(e=ft(e));return i}function $8(n,e){const t=[];return z8(n,e,t),t.sort((i,r)=>i.order-r.order),t}function z8(n,e,t){const i=uc(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);lw(e,r=>{z8(n,r,t)})}function fw(n,e){const t=uc(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,uO(e,t.length>0?t:void 0)}lw(e,i=>{fw(n,i)})}function vO(n,e){const t=pm(H8(n,e)),i=aw(n.transactionQueueTree_,e);return function USe(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{bO(n,r)}),bO(n,i),M8(i,r=>{bO(n,r)}),t}function bO(n,e){const t=uc(e);if(t){const i=[];let r=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?(R(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(R(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(Na(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&i.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?uO(e,void 0):t.length=s+1,rr(n.eventQueue_,pm(e),r);for(let o=0;o<i.length;o++)bd(i[o])}}const wO=function(n,e){const t=hTe(n),i=t.namespace;return"firebase.com"===t.domain&&Ps(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&Ps("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&mi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new wP(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new nt(t.pathString)}},hTe=function(n){let e="",t="",i="",r="",s="",o=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");-1===u&&(u=n.length);let d=n.indexOf("?");-1===d&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(r=function uTe(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(s){}e+="/"+r}return e}(n.substring(u,d)));const h=function dTe(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):mi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,d)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if("localhost"===f.toLowerCase())t="localhost";else if(f.split(".").length<=2)t=f;else{const p=e.indexOf(".");i=e.substring(0,p).toLowerCase(),t=e.substring(p+1),s=i}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:t,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};class G8{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Dn(this.snapshot.exportVal())}}class W8{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class CO{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return R(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class pTe{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new Er;return nTe(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Fs("OnDisconnect.remove",this._path);const e=new Er;return U8(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Fs("OnDisconnect.set",this._path),Ns("OnDisconnect.set",e,this._path,!1);const t=new Er;return U8(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Fs("OnDisconnect.setWithPriority",this._path),Ns("OnDisconnect.setWithPriority",e,this._path,!1),function(n,e,t){if(!t||void 0!==e){if(Lb(e))throw new Error(ws(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!mm(e))throw new Error(ws(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}("OnDisconnect.setWithPriority",t,!1);const i=new Er;return function iTe(n,e,t,i,r){const s=Lt(t,i);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{"ok"===o&&Id(n.onDisconnect_,e,s),Fa(0,r,o,a)})}(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){Fs("OnDisconnect.update",this._path),function(n,e,t,i){if(i&&void 0===e)return;const r=ws(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const s=[];Hn(e,(o,a)=>{const l=new nt(o);if(gm(r,a,kt(t,l)),".priority"===TP(l)&&!mm(a))throw new Error(r+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const s=em(i);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!cw(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(sIe);let r=null;for(t=0;t<e.length;t++){if(i=e[t],null!==r&&Sr(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)}("OnDisconnect.update",e,this._path,!1);const t=new Er;return function rTe(n,e,t,i){if(Cy(t))return jn("onDisconnect().update() called with empty data.  Don't do anything."),void Fa(0,i,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(r,s)=>{"ok"===r&&Hn(t,(o,a)=>{const l=Lt(a);Id(n.onDisconnect_,kt(e,o),l)}),Fa(0,i,r,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class sr{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return Te(this._path)?null:TP(this._path)}get ref(){return new Jr(this._repo,this._path)}get _queryIdentifier(){const e=Z5(this._queryParams),t=vP(e);return"{}"===t?"default":t}get _queryObject(){return Z5(this._queryParams)}isEqual(e){if(!((e=Re(e))instanceof sr))return!1;const t=this._repo===e._repo,i=AP(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function rIe(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function La(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Os){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Aa)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Ro)throw new Error(i);if("string"!=typeof t)throw new Error(r)}}else if(n.getIndex()===vt){if(null!=e&&!mm(e)||null!=t&&!mm(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(R(n.getIndex()instanceof PP||n.getIndex()===OP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function mw(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Jr extends sr{constructor(e,t){super(e,t,new FP,!1)}get parent(){const e=U5(this._path);return null===e?null:new Jr(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class dc{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new nt(e),i=kd(this.ref,e);return new dc(this._node.getChild(t),i,vt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new dc(r,kd(this.ref,i),vt)))}hasChild(e){const t=new nt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function K8(n,e){return(n=Re(n))._checkNotDeleted("ref"),void 0!==e?kd(n._root,e):n._root}function kd(n,e){return null===Se((n=Re(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),pO("child","path",t,!1)):pO("child","path",e,!1),new Jr(n._repo,kt(n._path,e));var t}function mTe(n){return n=Re(n),new pTe(n._repo,n._path)}function EO(n,e){n=Re(n),Fs("set",n._path),Ns("set",e,n._path,!1);const t=new Er;return function gO(n,e,t,i,r){xd(n,"set",{path:e.toString(),value:t,priority:i});const s=ym(n),o=Lt(t,i),a=sw(n.serverSyncTree_,e),l=aO(o,a,s),c=dw(n),u=eO(n.serverSyncTree_,e,l,c,!0);uw(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(h,f)=>{const p="ok"===h;p||mi("set at "+e+" failed: "+h);const m=Na(n.serverSyncTree_,c,!p);rr(n.eventQueue_,e,m),Fa(0,r,h,f)});const d=vO(n,e);Md(n,d),rr(n.eventQueue_,d,[])}(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function gTe(n){n=Re(n);const e=new CO(()=>{}),t=new vm(e);return function JSe(n,e,t){const i=function kSe(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(c,u)=>{const d=Ai(c,t);i=i||Pa(u,d)});let r=n.syncPointTree_.get(t);r?i=i||Pa(r,Ke()):(r=new _8,n.syncPointTree_=n.syncPointTree_.set(t,r));const s=null!=i,o=s?new ka(i,!0,!1):null;return function pSe(n){return Yb(n.viewCache_)}(y8(r,e,Xb(n.pendingWriteTree_,e._path),s?o.getNode():_e.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=i?Promise.resolve(i):n.server_.get(e).then(r=>{const s=Lt(r).withIndex(e._queryParams.getIndex());let o;if(tO(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=dm(n.serverSyncTree_,e._path,s);else{const a=hm(n.serverSyncTree_,e);o=E8(n.serverSyncTree_,e._path,s,a)}return rr(n.eventQueue_,e._path,o),rw(n.serverSyncTree_,e,t,null,!0),s},r=>(xd(n,"get for query "+Dn(e)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,t).then(i=>new dc(i,new Jr(n._repo,n._path),n._queryParams.getIndex()))}class vm{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new G8("value",this,new dc(e.snapshotNode,new Jr(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new W8(this,e,t):null}matches(e){return e instanceof vm&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class gw{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new W8(this,e,t):null}createEvent(e,t){R(null!=e.childName,"Child events should have a childName.");const i=kd(new Jr(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new G8(e.type,this,new dc(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof gw&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function bm(n,e,t,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const l=t,c=(u,d)=>{_O(n._repo,n,a),l(u,d)};c.userCallback=t.userCallback,c.context=t.context,t=c}const o=new CO(t,s||void 0),a="value"===e?new vm(o):new gw(e,o);return function sTe(n,e,t){let i;i=".info"===Se(e._path)?tO(n.infoSyncTree_,e,t):tO(n.serverSyncTree_,e,t),O8(n.eventQueue_,e._path,i)}(n._repo,n,a),()=>_O(n._repo,n,a)}function Q8(n,e,t,i){return bm(n,"value",e,t,i)}function _Te(n,e,t,i){return bm(n,"child_changed",e,t,i)}class wm{}class Y8 extends wm{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ns("endAt",this._value,e._path,!0);const t=function VP(n,e,t){const i=n.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}(e._queryParams,this._value,this._key);if(mw(t),La(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new sr(e._repo,e._path,t,e._orderByCalled)}}class X8 extends wm{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ns("startAt",this._value,e._path,!0);const t=function LP(n,e,t){const i=n.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}(e._queryParams,this._value,this._key);if(mw(t),La(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new sr(e._repo,e._path,t,e._orderByCalled)}}class bTe extends wm{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new sr(e._repo,e._path,function TIe(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}function wTe(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new bTe(n)}class ETe extends wm{constructor(e){super(),this._path=e}_apply(e){!function pw(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}(e,"orderByChild");const t=new nt(this._path);if(Te(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new PP(t),r=function qb(n,e){const t=n.copy();return t.index_=e,t}(e._queryParams,i);return La(r),new sr(e._repo,e._path,r,!0)}}function DTe(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return pO("orderByChild","path",n,!1),new ETe(n)}class ATe extends wm{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Ns("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Y8(this._value,this._key)._apply(new X8(this._value,this._key)._apply(e))}}function xTe(n,e){return function(n,e,t,i){if(!(i&&void 0===t||cw(t)))throw new Error(ws(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}("equalTo","key",e,!0),new ATe(n,e)}function MTe(n,...e){let t=Re(n);for(const i of e)t=i._apply(t);return t}(function ySe(n){R(!tw,"__referenceConstructor has already been defined"),tw=n})(Jr),function ESe(n){R(!iw,"__referenceConstructor has already been defined"),iw=n}(Jr);const DO={};function PTe(n,e,t,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||Ps("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),jn("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=wO(s,r),a=o.repoInfo;"undefined"!=typeof process&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=wO(s,r),a=o.repoInfo):l=!o.repoInfo.secure;const u=r&&l?new Jp(Jp.OWNER):new PDe(n.name,n.options,e);(function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!cw(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),k8(n)}(t))throw new Error(ws(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",o),Te(o.path)||Ps("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function NTe(n,e,t,i){let r=DO[e.name];r||(r={},DO[e.name]=r);let s=r[n.toURLString()];return s&&Ps("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new YSe(n,false,t,i),r[n.toURLString()]=s,s}(a,n,u,new RDe(n.name,t));return new LTe(d,n)}class LTe{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function XSe(n,e,t){if(n.stats_=DP(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Gb(n.repoInfo_,(i,r,s,o)=>{V8(n,i,r,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>B8(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Dn(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new oc(n.repoInfo_,e,(i,r,s,o)=>{V8(n,i,r,s,o)},i=>{B8(n,i)},i=>{!function ZSe(n,e){Hn(e,(t,i)=>{mO(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function FDe(n,e){const t=n.toString();return EP[t]||(EP[t]=e()),EP[t]}(n.repoInfo_,()=>new FIe(n.stats_,n.server_)),n.infoData_=new kIe,n.infoSyncTree_=new C8({startListening:(i,r,s,o)=>{let a=[];const l=n.infoData_.getNode(i._path);return l.isEmpty()||(a=dm(n.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),mO(n,"connected",!1),n.serverSyncTree_=new C8({startListening:(i,r,s,o)=>(n.server_.listen(i,s,r,(a,l)=>{const c=o(a,l);rr(n.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Jr(this._repo,Ke())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function OTe(n,e){const t=DO[e];(!t||t[n.key]!==n)&&Ps(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function j8(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ps("Cannot call "+e+" on a deleted database.")}}function VTe(n=_f(),e){const t=ia(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=EI("database");i&&function BTe(n,e,t,i={}){(n=Re(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ps("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Ps('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Jp(Jp.OWNER);else if(i.mockUserToken){const o="string"==typeof i.mockUserToken?i.mockUserToken:DI(i.mockUserToken,n.app.options.projectId);s=new Jp(o)}!function RTe(n,e,t,i){n.repoInfo_=new wP(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(r,e,t,s)}(t,...i)}return t}oc.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},oc.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function UTe(n){(function vDe(n){gP=n})(ho),Kn(new Pn("database",(e,{instanceIdentifier:t})=>PTe(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),ut(t5,"0.14.4",n),ut(t5,"0.14.4","esm2017")}();class Cm{constructor(e){return e}}const e9="database",IO=new k("angularfire2.database-instances");function qTe(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new Cm(i)}}const GTe={provide:class $Te{constructor(){return Ef(e9)}},deps:[[new Ze,IO]]},WTe={provide:Cm,useFactory:function zTe(n,e){const t=Cf(e9,n,e);return t&&new Cm(t)},deps:[[new Ze,IO],sa]};let KTe=(()=>{class n{constructor(){ut("angularfire",Au.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({providers:[WTe,GTe]}),n})();function QTe(n,...e){return{ngModule:KTe,providers:[{provide:IO,useFactory:qTe(n),multi:!0,deps:[oe,Je,Df,If,[new Ze,sv],[new Ze,Af],...e]}]}}const t9=Ie(xTe,!0),YTe=Ie(gTe,!0),XTe=Ie(VTe,!0),n9=Ie(wTe,!0),ZTe=Ie(_Te,!0),JTe=Ie(mTe,!0),eAe=Ie(Q8,!0),i9=Ie(DTe,!0),r9=Ie(MTe,!0),Em=Ie(K8,!0),tAe=Ie(EO,!0),Ls={toFirestore:n=>Object.assign({},n),fromFirestore:n=>n.data()},_w={toFirestore:n=>Object.assign({},n),fromFirestore:n=>n.data()},yw={toFirestore:n=>Object.assign({},n),fromFirestore:n=>n.data()},SO={toFirestore:n=>Object.assign({},n),fromFirestore:n=>n.data()};let Oo=(()=>{class n{constructor(t){this.router=t,this.auth=wn(bo),this.database=wn(Cm),this.onDisconnectObj=null,this.onRealtimeStatusUnsubscribe=null,this.authUserSubject=new tn(this.auth.currentUser),this.hasAuthSignedInSubject=new tn(null),this.authUsersObservable=this.authUserSubject.asObservable(),this.hasAuthSignedInObservable=this.hasAuthSignedInSubject.asObservable(),this.firestore=wn(ko),this.unsubscribeOnAuthStateChanged=null,this.unsubscribeOnAuthStateChanged=Ou(this.auth,i=>{i?(this.authUserSubject.next(i),this.hasAuthSignedInSubject.next(!0),this._connectionSnapshot()):(this.authUserSubject.next(null),this.hasAuthSignedInSubject.next(!1))})}ngOnDestroy(){null!=this.unsubscribeOnAuthStateChanged&&(this.unsubscribeOnAuthStateChanged(),this.unsubscribeOnAuthStateChanged=null),null!=this.onRealtimeStatusUnsubscribe&&(this.onRealtimeStatusUnsubscribe(),this.onRealtimeStatusUnsubscribe=null),this.logout()}authUserLoggedIn(){return!(null==this.auth.currentUser||null==this.auth.currentUser)}signUp(t){var i=this;return new Promise(function(){var r=_(function*(s,o){i.authUserLoggedIn()&&(yield i.logout().catch(a=>o(a))),abe(i.auth,t.email,t.password).then(a=>{const l=i.auth.updateCurrentUser(a.user),c=mG(a.user,{displayName:t.displayName,photoURL:"https://www.pngall.com/wp-content/uploads/5/Profile-Male-PNG-Free-Download.png"}),u=i._setUserData(t.email,t.displayName,"https://www.pngall.com/wp-content/uploads/5/Profile-Male-PNG-Free-Download.png");Promise.all([l,c,u]).then(()=>{s()}).catch(d=>{console.error(d),o(d)})}).catch(a=>{o("error code: "+a.code+" with msg: "+a.message)})});return function(s,o){return r.apply(this,arguments)}}())}login(t){var i=this;return new Promise(function(){var r=_(function*(s,o){i.authUserLoggedIn()&&(yield i.logout().catch(a=>{console.error(a),o(a)})),cbe(i.auth,t.email,t.password).then(a=>{i.auth.updateCurrentUser(a.user).then(()=>{s()}).catch(c=>{console.error(c),o("error updating current auth user with message: \n"+c.message)})}).catch(a=>{console.error(a),o(a)})});return function(s,o){return r.apply(this,arguments)}}())}logout(){return new Promise((t,i)=>{this.setRealtimeStatus("offline").then(()=>{this.cancelOnDisconnect().then(()=>{null==this.onRealtimeStatusUnsubscribe?(console.error("onRealtimeStatus snapshot was never created"),i("onRealtimeStatus snapshot was never created")):(this.onRealtimeStatusUnsubscribe(),this.onRealtimeStatusUnsubscribe=null,ube(this.auth),t())}).catch(r=>{console.error(r),i(r)})}).catch(r=>{console.error(r),i(r)})}).catch(t=>{console.error(t)})}_setUserData(t,i,r){return new Promise((s,o)=>{var a;const l=null===(a=this.auth.currentUser)||void 0===a?void 0:a.uid,c=ni(this.firestore,`users/${l}`).withConverter(Ls),u={email:t,displayName:i,lowercaseName:i.toLowerCase(),photoURL:r,uid:l};X6(c,u).then(()=>{s()}).catch(d=>{console.error(d),o(d)})})}setRealtimeStatus(t){return new Promise((i,r)=>{var s,o;let a=!1;"online"===t?a=!0:"offline"===t?a=!1:r("Invalid realtime status; Status should be either 'online' or 'offline'");const l={email:null===(s=this.auth.currentUser)||void 0===s?void 0:s.email,online:a},c=`status/${null===(o=this.auth.currentUser)||void 0===o?void 0:o.uid}`,u=Em(this.database,c);tAe(u,l).then(()=>{i(c)}).catch(d=>{console.error(d),r(d)})})}_connectionSnapshot(){null==this.onRealtimeStatusUnsubscribe&&(this.onRealtimeStatusUnsubscribe=eAe(Em(this.database,".info/connected"),t=>{var i,r;if("false"===t.val())return;const s=Em(this.database,`status/${null===(i=this.auth.currentUser)||void 0===i?void 0:i.uid}`);this.onDisconnectObj=JTe(s),this.onDisconnectObj.set({email:null===(r=this.auth.currentUser)||void 0===r?void 0:r.email,online:!1}).then(()=>{this.setRealtimeStatus("online")}).catch(o=>console.error(o))},t=>{console.error(t)}))}cancelOnDisconnect(){return new Promise((t,i)=>{null!=this.onDisconnectObj?this.onDisconnectObj.cancel().then(()=>{this.onDisconnectObj=null,t()}).catch(r=>{console.error(r),i(r)}):t()})}}return n.\u0275fac=function(t){return new(t||n)(w(Wn))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function an(n){return null!=n&&"false"!=`${n}`}function Rd(n,e=0){return function nAe(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function vw(n){return Array.isArray(n)?n:[n]}function _n(n){return null==n?"":"string"==typeof n?n:`${n}px`}function ln(n){return n instanceof je?n.nativeElement:n}const iAe=["addListener","removeListener"],rAe=["addEventListener","removeEventListener"],sAe=["on","off"];function Dm(n,e,t,i){if(me(t)&&(i=t,t=void 0),i)return Dm(n,e,t).pipe(kD(i));const[r,s]=function lAe(n){return me(n.addEventListener)&&me(n.removeEventListener)}(n)?rAe.map(o=>a=>n[o](e,a,t)):function oAe(n){return me(n.addListener)&&me(n.removeListener)}(n)?iAe.map(s9(n,e)):function aAe(n){return me(n.on)&&me(n.off)}(n)?sAe.map(s9(n,e)):[];if(!r&&aC(n))return yn(o=>Dm(o,e,t))(Ri(n));if(!r)throw new TypeError("Invalid event target");return new it(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function s9(n,e){return t=>i=>n[t](e,i)}const Im={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=Im;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new Et(()=>null==t?void 0:t(r))},requestAnimationFrame(...n){const{delegate:e}=Im;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Im;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0},o9=new class uAe extends Ny{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class cAe extends Oy{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Im.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(Im.cancelAnimationFrame(t),e._scheduled=void 0)}});let TO,dAe=1;const bw={};function a9(n){return n in bw&&(delete bw[n],!0)}const hAe={setImmediate(n){const e=dAe++;return bw[e]=!0,TO||(TO=Promise.resolve()),TO.then(()=>a9(e)&&n()),e},clearImmediate(n){a9(n)}},{setImmediate:fAe,clearImmediate:pAe}=hAe,ww={setImmediate(...n){const{delegate:e}=ww;return((null==e?void 0:e.setImmediate)||fAe)(...n)},clearImmediate(n){const{delegate:e}=ww;return((null==e?void 0:e.clearImmediate)||pAe)(n)},delegate:void 0};new class gAe extends Ny{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class mAe extends Oy{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=ww.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(ww.clearImmediate(t),e._scheduled=void 0)}});function l9(n=0,e,t=age){let i=-1;return null!=e&&(q1(e)?t=e:i=e),new it(r=>{let s=function vAe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function AO(n,e=wf){return function yAe(n){return Yt((e,t)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(null==s||s.unsubscribe(),s=null,i){i=!1;const c=r;r=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(Rt(t,c=>{i=!0,r=c,s||Ri(n(c)).subscribe(s=Rt(t,a,l))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>l9(n,e))}let xO;try{xO="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){xO=!1}let Pd,Tn=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Ise(n){return n===WB}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!xO)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(w(cu))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const c9=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function u9(){if(Pd)return Pd;if("object"!=typeof document||!document)return Pd=new Set(c9),Pd;let n=document.createElement("input");return Pd=new Set(c9.filter(e=>(n.setAttribute("type",e),n.type===e))),Pd}let Sm,hc,MO;function Va(n){return function bAe(){if(null==Sm&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Sm=!0}))}finally{Sm=Sm||!1}return Sm}()?n:!!n.capture}function wAe(){if(null==hc){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return hc=!1,hc;if("scrollBehavior"in document.documentElement.style)hc=!0;else{const n=Element.prototype.scrollTo;hc=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return hc}function kO(n){if(function CAe(){if(null==MO){const n="undefined"!=typeof document?document.head:null;MO=!(!n||!n.createShadowRoot&&!n.attachShadow)}return MO}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function RO(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function es(n){return n.composedPath?n.composedPath()[0]:n.target}function PO(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}const EAe=new k("cdk-dir-doc",{providedIn:"root",factory:function DAe(){return wn(pe)}}),IAe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Tm=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new Le,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function SAe(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?IAe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(w(EAe,8))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Am=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({}),n})(),d9=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new H,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new it(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(AO(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ne()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(hn(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=ln(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Dm(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(w(oe),w(Tn),w(pe,8))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),OO=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new H,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(AO(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(w(Tn),w(oe),w(pe,8))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ew=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({}),n})(),h9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({imports:[[Am,Ew],Am,Ew]}),n})();class NO{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Od extends NO{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class Dw extends NO{constructor(e,t,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class xAe extends NO{constructor(e){super(),this.element=e instanceof je?e.nativeElement:e}}class Iw{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof Od?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Dw?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof xAe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class MAe extends Iw{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||Je.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let xm=(()=>{class n extends Iw{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new Le,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(y(rl),y(Ni),y(pe))},n.\u0275dir=L({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[se]}),n})(),Sw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({}),n})();function Qt(n){return Yt((e,t)=>{Ri(n).subscribe(Rt(t,()=>t.complete(),Yw)),!t.closed&&e.subscribe(t)})}const f9=wAe();class kAe{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=_n(-this._previousScrollPosition.left),e.style.top=_n(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),f9&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),f9&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class RAe{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class p9{enable(){}disable(){}attach(){}}function FO(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function m9(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class PAe{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();FO(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let OAe=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new p9,this.close=o=>new RAe(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new kAe(this._viewportRuler,this._document),this.reposition=o=>new PAe(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(w(d9),w(OO),w(oe),w(pe))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class LO{constructor(e){if(this.scrollStrategy=new p9,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class NAe{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}class FAe{constructor(e,t,i,r,s,o,a,l,c){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._backdropElement=null,this._backdropClick=new H,this._attachments=new H,this._detachments=new H,this._locationChanges=Et.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._backdropTransitionendHandler=u=>{this._disposeBackdrop(u.target)},this._keydownEvents=new H,this._outsidePointerEvents=new H,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(li(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(e=this._host)||void 0===e||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=_n(this._config.width),e.height=_n(this._config.height),e.minWidth=_n(this._config.minWidth),e.minHeight=_n(this._config.minHeight),e.maxWidth=_n(this._config.maxWidth),e.maxHeight=_n(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,i){const r=vw(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Qt(Wd(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let VO=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||PO()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),PO()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(w(pe),w(Tn))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const g9="cdk-overlay-connected-position-bounding-box",LAe=/([A-Za-z%]+)$/;class VAe{constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new H,this._resizeSubscription=Et.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(g9),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,i)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&fc(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(g9),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=y9(t);let{x:o,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let h=0-a,f=a+s.height-i.height,p=this._subtractOverflows(s.width,0-o,o+s.width-i.width),m=this._subtractOverflows(s.height,h,f),g=p*m;return{visibleArea:g,isCompletelyWithinViewport:s.width*s.height===g,fitsInViewportVertically:m===s.height,fitsInViewportHorizontally:p==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=_9(this._overlayRef.getConfig().minHeight),a=_9(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=r)&&c}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=y9(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-i.top-e.y,0),c=Math.max(s.left-i.left-e.x,0);let u=0,d=0;return u=r.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,d=r.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new NAe(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,d,h;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const f=Math.min(i.bottom-e.y+i.top,e.y),p=this._lastBoundingBoxSize.height;s=2*f,o=e.y-f,s>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-p/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)h=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)d=e.x,u=i.right-e.x;else{const f=Math.min(i.right-e.x+i.left,e.x),p=this._lastBoundingBoxSize.width;u=2*f,d=e.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-p/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=_n(i.height),r.top=_n(i.top),r.bottom=_n(i.bottom),r.width=_n(i.width),r.left=_n(i.left),r.right=_n(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=_n(s)),o&&(r.maxWidth=_n(o))}this._lastBoundingBoxSize=i,fc(this._boundingBox.style,r)}_resetBoundingBoxStyles(){fc(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){fc(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();fc(i,this._getExactOverlayY(t,e,u)),fc(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=_n(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=_n(o.maxWidth):s&&(i.maxWidth="")),fc(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=_n(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=_n(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:m9(e,i),isOriginOutsideView:FO(e,i),isOverlayClipped:m9(t,i),isOverlayOutsideView:FO(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&vw(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof je)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function fc(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function _9(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(LAe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function y9(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const v9="cdk-global-overlay-wrapper";class BAe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(v9),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a);e.position=this._cssPosition,e.marginLeft=l?"0":this._leftOffset,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,l?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(v9),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let UAe=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new BAe}flexibleConnectedTo(t){return new VAe(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(w(OO),w(pe),w(Tn),w(VO))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),b9=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(w(pe))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jAe=(()=>{class n extends b9{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(w(pe),w(oe,8))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),HAe=(()=>{class n extends b9{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=es(s)},this._clickListener=s=>{const o=es(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const d=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(s)):d.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(w(pe),w(Tn),w(oe,8))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$Ae=0,Ba=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u,d,h){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=d,this._outsideClickDispatcher=h}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new LO(t);return o.direction=o.direction||this._directionality.value,new FAe(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+$Ae++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(i_)),new MAe(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(w(OAe),w(VO),w(rl),w(UAe),w(jAe),w(Je),w(oe),w(pe),w(Tm),w(Lh),w(HAe))},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})();const GAe={provide:new k("cdk-connected-overlay-scroll-strategy"),deps:[Ba],useFactory:function qAe(n){return()=>n.scrollStrategies.reposition()}};let BO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({providers:[Ba,GAe],imports:[[Am,Sw,h9],h9]}),n})();function Nd(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function UO(n,e=wf){return Yt((t,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,i.next(c)}};function l(){const c=o+n,u=e.now();if(u<c)return r=this.schedule(void 0,c-u),void i.add(r);a()}t.subscribe(Rt(i,c=>{s=c,o=e.now(),r||(r=e.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function jO(n){return hn((e,t)=>n<=t)}function A9(n,e=Lo){return n=null!=n?n:oxe,Yt((t,i)=>{let r,s=!0;t.subscribe(Rt(i,o=>{const a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function oxe(n,e){return n===e}let x9=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),axe=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=ln(t);return new it(r=>{const o=this._observeElement(i).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new H,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(w(x9))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lxe=(()=>{class n{constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new Le,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=an(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Rd(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(UO(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(y(axe),y(je),y(oe))},n.\u0275dir=L({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),M9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({providers:[x9]}),n})();function Tw(n,e){return(n.getAttribute(e)||"").match(/\S+/g)||[]}const R9="cdk-describedby-message",Aw="cdk-describedby-host";let P9=0,dxe=(()=>{class n{constructor(t,i){this._platform=i,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+P9++,this._document=t}describe(t,i,r){if(!this._canBeDescribed(t,i))return;const s=HO(i,r);"string"!=typeof i?(O9(i),this._messageRegistry.set(s,{messageElement:i,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(i,r),this._isElementDescribedByMessage(t,s)||this._addMessageReference(t,s)}removeDescription(t,i,r){var s;if(!i||!this._isElementNode(t))return;const o=HO(i,r);if(this._isElementDescribedByMessage(t,o)&&this._removeMessageReference(t,o),"string"==typeof i){const a=this._messageRegistry.get(o);a&&0===a.referenceCount&&this._deleteMessageElement(o)}0===(null===(s=this._messagesContainer)||void 0===s?void 0:s.childNodes.length)&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){var t;const i=this._document.querySelectorAll(`[${Aw}="${this._id}"]`);for(let r=0;r<i.length;r++)this._removeCdkDescribedByReferenceIds(i[r]),i[r].removeAttribute(Aw);null===(t=this._messagesContainer)||void 0===t||t.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(t,i){const r=this._document.createElement("div");O9(r),r.textContent=t,i&&r.setAttribute("role",i),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(HO(t,i),{messageElement:r,referenceCount:0})}_deleteMessageElement(t){var i,r;null===(r=null===(i=this._messageRegistry.get(t))||void 0===i?void 0:i.messageElement)||void 0===r||r.remove(),this._messageRegistry.delete(t)}_createMessagesContainer(){if(this._messagesContainer)return;const t="cdk-describedby-message-container",i=this._document.querySelectorAll(`.${t}[platform="server"]`);for(let s=0;s<i.length;s++)i[s].remove();const r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(t),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(t){const i=Tw(t,"aria-describedby").filter(r=>0!=r.indexOf(R9));t.setAttribute("aria-describedby",i.join(" "))}_addMessageReference(t,i){const r=this._messageRegistry.get(i);(function cxe(n,e,t){const i=Tw(n,e);i.some(r=>r.trim()==t.trim())||(i.push(t.trim()),n.setAttribute(e,i.join(" ")))})(t,"aria-describedby",r.messageElement.id),t.setAttribute(Aw,this._id),r.referenceCount++}_removeMessageReference(t,i){const r=this._messageRegistry.get(i);r.referenceCount--,function uxe(n,e,t){const r=Tw(n,e).filter(s=>s!=t.trim());r.length?n.setAttribute(e,r.join(" ")):n.removeAttribute(e)}(t,"aria-describedby",r.messageElement.id),t.removeAttribute(Aw)}_isElementDescribedByMessage(t,i){const r=Tw(t,"aria-describedby"),s=this._messageRegistry.get(i),o=s&&s.messageElement.id;return!!o&&-1!=r.indexOf(o)}_canBeDescribed(t,i){if(!this._isElementNode(t))return!1;if(i&&"object"==typeof i)return!0;const r=null==i?"":`${i}`.trim(),s=t.getAttribute("aria-label");return!(!r||s&&s.trim()===r)}_isElementNode(t){return t.nodeType===this._document.ELEMENT_NODE}}return n.\u0275fac=function(t){return new(t||n)(w(pe),w(Tn))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function HO(n,e){return"string"==typeof n?`${e||""}/${n}`:n}function O9(n){n.id||(n.id=`${R9}-${P9++}`)}class N9 extends class hxe{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new H,this._typeaheadSubscription=Et.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new H,this.change=new H,e instanceof au&&e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(kn(t=>this._pressedLetters.push(t)),UO(e),hn(()=>this._pressedLetters.length>0),we(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,o=i[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||Nd(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e),r=t[i];this._activeItem=null==r?null:r,this._activeItemIndex=i}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof au?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let F9=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function pxe(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function fxe(n){try{return n.frameElement}catch(e){return null}}(function Cxe(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===V9(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=V9(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function bxe(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function wxe(n){return!function gxe(n){return function yxe(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function mxe(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function _xe(n){return function vxe(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||L9(n))}(t)&&!this.isDisabled(t)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(w(Tn))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function L9(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function V9(n){if(!L9(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Exe{constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return null==i||i.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(li(1)).subscribe(e)}}let Dxe=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new Exe(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(w(F9),w(oe),w(pe))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $O(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function zO(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Ixe=new k("cdk-input-modality-detector-options"),Sxe={ignoreKeys:[18,17,224,91,16]},Fd=Va({passive:!0,capture:!0});let Txe=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new tn(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,l;(null===(l=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===l?void 0:l.some(c=>c===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=es(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next($O(o)?"keyboard":"mouse"),this._mostRecentTarget=es(o))},this._onTouchstart=o=>{zO(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=es(o))},this._options=Object.assign(Object.assign({},Sxe),s),this.modalityDetected=this._modality.pipe(jO(1)),this.modalityChanged=this.modalityDetected.pipe(A9()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Fd),r.addEventListener("mousedown",this._onMousedown,Fd),r.addEventListener("touchstart",this._onTouchstart,Fd)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Fd),document.removeEventListener("mousedown",this._onMousedown,Fd),document.removeEventListener("touchstart",this._onTouchstart,Fd))}}return n.\u0275fac=function(t){return new(t||n)(w(Tn),w(oe),w(pe),w(Ixe,8))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Axe=new k("liveAnnouncerElement",{providedIn:"root",factory:function xxe(){return null}}),Mxe=new k("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let U9=(()=>{class n{constructor(t,i,r,s){this._ngZone=i,this._defaultOptions=s,this._document=r,this._liveElement=t||this._createLiveElement()}announce(t,...i){const r=this._defaultOptions;let s,o;return 1===i.length&&"number"==typeof i[0]?o=i[0]:[s,o]=i,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==o&&r&&(o=r.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var t,i;clearTimeout(this._previousTimeout),null===(t=this._liveElement)||void 0===t||t.remove(),this._liveElement=null,null===(i=this._currentResolve)||void 0===i||i.call(this),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",i=this._document.getElementsByClassName(t),r=this._document.createElement("div");for(let s=0;s<i.length;s++)i[s].remove();return r.classList.add(t),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return n.\u0275fac=function(t){return new(t||n)(w(Axe,8),w(oe),w(pe),w(Mxe,8))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const kxe=new k("cdk-focus-monitor-default-options"),xw=Va({passive:!0,capture:!0});let Mm=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new H,this._rootNodeFocusAndBlurListener=a=>{const l=es(a),c="focus"===a.type?this._onFocus:this._onBlur;for(let u=l;u;u=u.parentElement)c.call(this,a,u)},this._document=s,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(t,i=!1){const r=ln(t);if(!this._platform.isBrowser||1!==r.nodeType)return ne(null);const s=kO(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new H,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=ln(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=ln(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=es(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(t,i){this._ngZone.run(()=>t.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,xw),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,xw)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Qt(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,xw),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,xw),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}}return n.\u0275fac=function(t){return new(t||n)(w(oe),w(Tn),w(Txe),w(pe,8),w(kxe,8))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const j9="cdk-high-contrast-black-on-white",H9="cdk-high-contrast-white-on-black",qO="cdk-high-contrast-active";let $9=(()=>{class n{constructor(t,i){this._platform=t,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(qO),t.remove(j9),t.remove(H9),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(t.add(qO),t.add(j9)):2===i&&(t.add(qO),t.add(H9))}}}return n.\u0275fac=function(t){return new(t||n)(w(Tn),w(pe))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Rxe=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(w($9))},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({imports:[[M9]]}),n})();const Oxe=new k("mat-sanity-checks",{providedIn:"root",factory:function Pxe(){return!0}});let pt=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!PO()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(w($9),w(Oxe,8),w(pe))},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({imports:[[Am],Am]}),n})();function q9(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=an(e)}}}function Mw(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function km(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=an(e)}}}function Nxe(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Rd(t):this.defaultTabIndex}}}function Fxe(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new H,this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}let G9=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Rm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=L({type:n,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),n})();function Pm(n,e,t){n.nativeElement.classList.toggle(e,t)}let K9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({imports:[[pt],pt]}),n})();class Vxe{constructor(e,t,i){this._renderer=e,this.element=t,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Q9={enterDuration:225,exitDuration:150},GO=Va({passive:!0}),Y9=["mousedown","touchstart"],X9=["mouseup","mouseleave","touchend","touchcancel"];class Uxe{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ln(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},Q9),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function Hxe(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u),function jxe(n){window.getComputedStyle(n).getPropertyValue("opacity")}(u),u.style.transform="scale(1)";const d=new Vxe(this,u,i);return d.state=0,this._activeRipples.add(d),i.persistent||(this._mostRecentTransientRipple=d),this._runTimeoutOutsideZone(()=>{const h=d===this._mostRecentTransientRipple;d.state=1,!i.persistent&&(!h||!this._isPointerDown)&&d.fadeOut()},c),d}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const i=e.element,r=Object.assign(Object.assign({},Q9),e.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,i.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=ln(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(Y9))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(X9),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=$O(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!zO(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,GO)})})}_removeTriggerEvents(){this._triggerElement&&(Y9.forEach(e=>{this._triggerElement.removeEventListener(e,this,GO)}),this._pointerUpEventsRegistered&&X9.forEach(e=>{this._triggerElement.removeEventListener(e,this,GO)}))}}const $xe=new k("mat-ripple-global-options");let kw=(()=>{class n{constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Uxe(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(y(je),y(oe),y(Tn),y($xe,8),y(wr,8))},n.\u0275dir=L({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&Ht("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),Z9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({imports:[[pt],pt]}),n})(),J9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({imports:[[pt]]}),n})();const qxe=["mat-button",""],Gxe=["*"],Kxe=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Qxe=Mw(q9(km(class{constructor(n){this._elementRef=n}})));let Ua=(()=>{class n extends Qxe{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of Kxe)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(y(je),y(Mm),y(wr,8))},n.\u0275cmp=Qe({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&jr(kw,5),2&t){let r;Ge(r=We())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(Zt("disabled",i.disabled||null),Ht("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[se],attrs:qxe,ngContentSelectors:Gxe,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(mr(),S(0,"span",0),ct(1),M(),et(2,"span",1)(3,"span",2)),2&t&&($(2),Ht("mat-button-ripple-round",i.isRoundButton||i.isIconButton),Y("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[kw],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),eK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({imports:[[Z9,pt],pt]}),n})();const tK=new Set;let Ld,Yxe=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Zxe}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Xxe(n){if(!tK.has(n))try{Ld||(Ld=document.createElement("style"),Ld.setAttribute("type","text/css"),document.head.appendChild(Ld)),Ld.sheet&&(Ld.sheet.insertRule(`@media ${n} {body{ }}`,0),tK.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(w(Tn))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Zxe(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let WO=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new H}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return nK(vw(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=H_(nK(vw(t)).map(o=>this._registerQuery(o).observable));return s=z_(s.pipe(li(1)),s.pipe(jO(1),UO(0))),s.pipe(we(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new it(o=>{const a=l=>this._zone.run(()=>o.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(gs(i),we(({matches:o})=>({query:t,matches:o})),Qt(this._destroySubject)),mql:i};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(w(Yxe),w(oe))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nK(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function Jxe(n,e){if(1&n){const t=pr();S(0,"div",2)(1,"button",3),J("click",function(){return Wi(t),gt().action()}),te(2),M()()}if(2&n){const t=gt();$(2),Qs(t.data.action)}}function eMe(n,e){}const rK=new k("MatSnackBarData");class Rw{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const tMe=Math.pow(2,31)-1;class KO{constructor(e,t){this._overlayRef=t,this._afterDismissed=new H,this._afterOpened=new H,this._onAction=new H,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,tMe))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let nMe=(()=>{class n{constructor(t,i){this.snackBarRef=t,this.data=i}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(t){return new(t||n)(y(KO),y(rK))},n.\u0275cmp=Qe({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,i){1&t&&(S(0,"span",0),te(1),M(),Ue(2,Jxe,3,1,"div",1)),2&t&&($(1),Qs(i.data.message),$(1),Y("ngIf",i.hasAction))},directives:[Ua,to],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}\n"],encapsulation:2,changeDetection:0}),n})();const iMe={snackBarState:hu("state",[qr("void, hidden",en({transform:"scale(0.8)",opacity:0})),qr("visible",en({transform:"scale(1)",opacity:1})),ro("* => visible",io("150ms cubic-bezier(0, 0, 0.2, 1)")),ro("* => void, * => hidden",io("75ms cubic-bezier(0.4, 0.0, 1, 1)",en({opacity:0})))])};let rMe=(()=>{class n extends Iw{constructor(t,i,r,s,o){super(),this._ngZone=t,this._elementRef=i,this._changeDetectorRef=r,this._platform=s,this.snackBarConfig=o,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new H,this._onExit=new H,this._onEnter=new H,this._animationState="void",this.attachDomPortal=a=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(a)),this._live="assertive"!==o.politeness||o.announcementMessage?"off"===o.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(t)}onAnimationEnd(t){const{fromState:i,toState:r}=t;if(("void"===r&&"void"!==i||"hidden"===r)&&this._completeExit(),"visible"===r){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(li(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_applySnackBarClasses(){const t=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(r=>t.classList.add(r)):t.classList.add(i)),"center"===this.snackBarConfig.horizontalPosition&&t.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&t.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),i=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&i){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(r=document.activeElement),t.removeAttribute("aria-hidden"),i.appendChild(t),null==r||r.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(t){return new(t||n)(y(oe),y(je),y(Ei),y(Tn),y(Rw))},n.\u0275cmp=Qe({type:n,selectors:[["snack-bar-container"]],viewQuery:function(t,i){if(1&t&&jr(xm,7),2&t){let r;Ge(r=We())&&(i._portalOutlet=r.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(t,i){1&t&&jg("@state.done",function(s){return i.onAnimationEnd(s)}),2&t&&qg("@state",i._animationState)},features:[se],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(t,i){1&t&&(S(0,"div",0),Ue(1,eMe,0,0,"ng-template",1),M(),et(2,"div")),2&t&&($(2),Zt("aria-live",i._live)("role",i._role))},directives:[xm],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[iMe.snackBarState]}}),n})(),sMe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({imports:[[BO,Sw,du,eK,pt],pt]}),n})();const sK=new k("mat-snack-bar-default-options",{providedIn:"root",factory:function oMe(){return new Rw}});let aMe=(()=>{class n{constructor(t,i,r,s,o,a){this._overlay=t,this._live=i,this._injector=r,this._breakpointObserver=s,this._parentSnackBar=o,this._defaultConfig=a,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,i){return this._attach(t,i)}openFromTemplate(t,i){return this._attach(t,i)}open(t,i="",r){const s=Object.assign(Object.assign({},this._defaultConfig),r);return s.data={message:t,action:i},s.announcementMessage===t&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,i){const s=Je.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:Rw,useValue:i}]}),o=new Od(this.snackBarContainerComponent,i.viewContainerRef,s),a=t.attach(o);return a.instance.snackBarConfig=i,a.instance}_attach(t,i){const r=Object.assign(Object.assign(Object.assign({},new Rw),this._defaultConfig),i),s=this._createOverlay(r),o=this._attachSnackBarContainer(s,r),a=new KO(o,s);if(t instanceof gr){const l=new Dw(t,null,{$implicit:r.data,snackBarRef:a});a.instance=o.attachTemplatePortal(l)}else{const l=this._createInjector(r,a),c=new Od(t,void 0,l),u=o.attachComponentPortal(c);a.instance=u.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Qt(s.detachments())).subscribe(l=>{s.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),r.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(a,r),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(t,i){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),i.duration&&i.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(i.duration))}_createOverlay(t){const i=new LO;i.direction=t.direction;let r=this._overlay.position().global();const s="rtl"===t.direction,o="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!s||"end"===t.horizontalPosition&&s,a=!o&&"center"!==t.horizontalPosition;return o?r.left("0"):a?r.right("0"):r.centerHorizontally(),"top"===t.verticalPosition?r.top("0"):r.bottom("0"),i.positionStrategy=r,this._overlay.create(i)}_createInjector(t,i){return Je.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:KO,useValue:i},{provide:rK,useValue:t.data}]})}}return n.\u0275fac=function(t){return new(t||n)(w(Ba),w(U9),w(Je),w(WO),w(n,12),w(sK))},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})(),Om=(()=>{class n extends aMe{constructor(t,i,r,s,o,a){super(t,i,r,s,o,a),this.simpleSnackBarComponent=nMe,this.snackBarContainerComponent=rMe,this.handsetCssClass="mat-snack-bar-handset"}}return n.\u0275fac=function(t){return new(t||n)(w(Ba),w(U9),w(Je),w(WO),w(n,12),w(sK))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:sMe}),n})();const lMe=["*",[["mat-card-footer"]]],cMe=["*","mat-card-footer"];let oK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=L({type:n,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),n})(),aK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=L({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),lK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=L({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),n})(),cK=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(y(wr,8))},n.\u0275cmp=Qe({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,i){2&t&&Ht("_mat-animation-noopable","NoopAnimations"===i._animationMode)},exportAs:["matCard"],ngContentSelectors:cMe,decls:2,vars:0,template:function(t,i){1&t&&(mr(lMe),ct(0),ct(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),n})(),uMe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({imports:[[pt],pt]}),n})();const dMe=["connectionContainer"],hMe=["inputContainer"],fMe=["label"];function pMe(n,e){1&n&&(Ch(0),S(1,"div",14),et(2,"div",15)(3,"div",16)(4,"div",17),M(),S(5,"div",18),et(6,"div",15)(7,"div",16)(8,"div",17),M(),Eh())}function mMe(n,e){if(1&n){const t=pr();S(0,"div",19),J("cdkObserveContent",function(){return Wi(t),gt().updateOutlineGap()}),ct(1,1),M()}2&n&&Y("cdkObserveContentDisabled","outline"!=gt().appearance)}function gMe(n,e){if(1&n&&(Ch(0),ct(1,2),S(2,"span"),te(3),M(),Eh()),2&n){const t=gt(2);$(3),Qs(t._control.placeholder)}}function _Me(n,e){1&n&&ct(0,3,["*ngSwitchCase","true"])}function yMe(n,e){1&n&&(S(0,"span",23),te(1," *"),M())}function vMe(n,e){if(1&n){const t=pr();S(0,"label",20,21),J("cdkObserveContent",function(){return Wi(t),gt().updateOutlineGap()}),Ue(2,gMe,4,1,"ng-container",12),Ue(3,_Me,1,0,"ng-content",12),Ue(4,yMe,2,0,"span",22),M()}if(2&n){const t=gt();Ht("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),Y("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),Zt("for",t._control.id)("aria-owns",t._control.id),$(2),Y("ngSwitchCase",!1),$(1),Y("ngSwitchCase",!0),$(1),Y("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function bMe(n,e){1&n&&(S(0,"div",24),ct(1,4),M())}function wMe(n,e){if(1&n&&(S(0,"div",25),et(1,"span",26),M()),2&n){const t=gt();$(1),Ht("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function CMe(n,e){1&n&&(S(0,"div"),ct(1,5),M()),2&n&&Y("@transitionMessages",gt()._subscriptAnimationState)}function EMe(n,e){if(1&n&&(S(0,"div",30),te(1),M()),2&n){const t=gt(2);Y("id",t._hintLabelId),$(1),Qs(t.hintLabel)}}function DMe(n,e){if(1&n&&(S(0,"div",27),Ue(1,EMe,2,2,"div",28),ct(2,6),et(3,"div",29),ct(4,7),M()),2&n){const t=gt();Y("@transitionMessages",t._subscriptAnimationState),$(1),Y("ngIf",t.hintLabel)}}const IMe=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],SMe=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"];let TMe=0;const uK=new k("MatError");let dK=(()=>{class n{constructor(t,i){this.id="mat-error-"+TMe++,t||i.nativeElement.setAttribute("aria-live","polite")}}return n.\u0275fac=function(t){return new(t||n)(Gs("aria-live"),y(je))},n.\u0275dir=L({type:n,selectors:[["mat-error"]],hostAttrs:["aria-atomic","true",1,"mat-error"],hostVars:1,hostBindings:function(t,i){2&t&&Zt("id",i.id)},inputs:{id:"id"},features:[ze([{provide:uK,useExisting:n}])]}),n})();const AMe={transitionMessages:hu("transitionMessages",[qr("enter",en({opacity:1,transform:"translateY(0%)"})),ro("void => enter",[en({opacity:0,transform:"translateY(-5px)"}),io("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let QO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=L({type:n}),n})();const xMe=new k("MatHint");let hK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=L({type:n,selectors:[["mat-label"]]}),n})(),MMe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=L({type:n,selectors:[["mat-placeholder"]]}),n})();const kMe=new k("MatPrefix"),RMe=new k("MatSuffix");let fK=0;const OMe=Mw(class{constructor(n){this._elementRef=n}},"primary"),NMe=new k("MAT_FORM_FIELD_DEFAULT_OPTIONS"),mK=new k("MatFormField");let Nm=(()=>{class n extends OMe{constructor(t,i,r,s,o,a,l){super(t),this._changeDetectorRef=i,this._dir=r,this._defaults=s,this._platform=o,this._ngZone=a,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new H,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+fK++,this._labelId="mat-form-field-label-"+fK++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==l,this.appearance=s&&s.appearance?s.appearance:"legacy",this._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&i!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=an(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(gs(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Qt(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Qt(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),Wd(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(gs(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(gs(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Qt(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Dm(this._label.nativeElement,"transitionend").pipe(li(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const u=i.querySelectorAll(`${r}, ${s}`);for(let d=0;d<u.length;d++)u[d].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let o=0,a=0;const l=i.querySelectorAll(r),c=i.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const u=i.getBoundingClientRect();if(0===u.width&&0===u.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const d=this._getStartEnd(u),h=t.children,f=this._getStartEnd(h[0].getBoundingClientRect());let p=0;for(let m=0;m<h.length;m++)p+=h[m].offsetWidth;o=Math.abs(f-d)-5,a=p>0?.75*p+10:0}for(let u=0;u<l.length;u++)l[u].style.width=`${o}px`;for(let u=0;u<c.length;u++)c[u].style.width=`${a}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(y(je),y(Ei),y(Tm,8),y(NMe,8),y(Tn),y(oe),y(wr,8))},n.\u0275cmp=Qe({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,i,r){if(1&t&&(zt(r,QO,5),zt(r,QO,7),zt(r,hK,5),zt(r,hK,7),zt(r,MMe,5),zt(r,uK,5),zt(r,xMe,5),zt(r,kMe,5),zt(r,RMe,5)),2&t){let s;Ge(s=We())&&(i._controlNonStatic=s.first),Ge(s=We())&&(i._controlStatic=s.first),Ge(s=We())&&(i._labelChildNonStatic=s.first),Ge(s=We())&&(i._labelChildStatic=s.first),Ge(s=We())&&(i._placeholderChild=s.first),Ge(s=We())&&(i._errorChildren=s),Ge(s=We())&&(i._hintChildren=s),Ge(s=We())&&(i._prefixChildren=s),Ge(s=We())&&(i._suffixChildren=s)}},viewQuery:function(t,i){if(1&t&&(jr(dMe,7),jr(hMe,5),jr(fMe,5)),2&t){let r;Ge(r=We())&&(i._connectionContainerRef=r.first),Ge(r=We())&&(i._inputContainerRef=r.first),Ge(r=We())&&(i._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,i){2&t&&Ht("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[ze([{provide:mK,useExisting:n}]),se],ngContentSelectors:SMe,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,i){1&t&&(mr(IMe),S(0,"div",0)(1,"div",1,2),J("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),Ue(3,pMe,9,0,"ng-container",3),Ue(4,mMe,2,1,"div",4),S(5,"div",5,6),ct(7),S(8,"span",7),Ue(9,vMe,5,16,"label",8),M()(),Ue(10,bMe,2,0,"div",9),M(),Ue(11,wMe,2,4,"div",10),S(12,"div",11),Ue(13,CMe,2,1,"div",12),Ue(14,DMe,5,2,"div",13),M()()),2&t&&($(3),Y("ngIf","outline"==i.appearance),$(1),Y("ngIf",i._prefixChildren.length),$(5),Y("ngIf",i._hasFloatingLabel()),$(1),Y("ngIf",i._suffixChildren.length),$(1),Y("ngIf","outline"!=i.appearance),$(1),Y("ngSwitch",i._getDisplayedMessages()),$(1),Y("ngSwitchCase","error"),$(1),Y("ngSwitchCase","hint"))},directives:[to,lxe,__,HB],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[AMe.transitionMessages]},changeDetection:0}),n})(),gK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({imports:[[du,pt,M9],pt]}),n})();const _K=Va({passive:!0});let FMe=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return xr;const i=ln(t),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new H,o="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||i.classList.contains(o)?"cdk-text-field-autofill-end"===l.animationName&&i.classList.contains(o)&&(i.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1}))):(i.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",a,_K),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",a,_K)}}),s}stopMonitoring(t){const i=ln(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(t){return new(t||n)(w(Tn),w(oe))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),LMe=(()=>{class n{constructor(t,i,r,s){this._elementRef=t,this._platform=i,this._ngZone=r,this._destroyed=new H,this._enabled=!0,this._previousMinRows=-1,this._isViewInited=!1,this._handleFocusEvent=o=>{this._hasFocus="focus"===o.type},this._document=s,this._textareaElement=this._elementRef.nativeElement}get minRows(){return this._minRows}set minRows(t){this._minRows=Rd(t),this._setMinHeight()}get maxRows(){return this._maxRows}set maxRows(t){this._maxRows=Rd(t),this._setMaxHeight()}get enabled(){return this._enabled}set enabled(t){t=an(t),this._enabled!==t&&((this._enabled=t)?this.resizeToFitContent(!0):this.reset())}get placeholder(){return this._textareaElement.placeholder}set placeholder(t){this._cachedPlaceholderHeight=void 0,t?this._textareaElement.setAttribute("placeholder",t):this._textareaElement.removeAttribute("placeholder"),this._cacheTextareaPlaceholderHeight()}_setMinHeight(){const t=this.minRows&&this._cachedLineHeight?this.minRows*this._cachedLineHeight+"px":null;t&&(this._textareaElement.style.minHeight=t)}_setMaxHeight(){const t=this.maxRows&&this._cachedLineHeight?this.maxRows*this._cachedLineHeight+"px":null;t&&(this._textareaElement.style.maxHeight=t)}ngAfterViewInit(){this._platform.isBrowser&&(this._initialHeight=this._textareaElement.style.height,this.resizeToFitContent(),this._ngZone.runOutsideAngular(()=>{Dm(this._getWindow(),"resize").pipe(AO(16),Qt(this._destroyed)).subscribe(()=>this.resizeToFitContent(!0)),this._textareaElement.addEventListener("focus",this._handleFocusEvent),this._textareaElement.addEventListener("blur",this._handleFocusEvent)}),this._isViewInited=!0,this.resizeToFitContent(!0))}ngOnDestroy(){this._textareaElement.removeEventListener("focus",this._handleFocusEvent),this._textareaElement.removeEventListener("blur",this._handleFocusEvent),this._destroyed.next(),this._destroyed.complete()}_cacheTextareaLineHeight(){if(this._cachedLineHeight)return;let t=this._textareaElement.cloneNode(!1);t.rows=1,t.style.position="absolute",t.style.visibility="hidden",t.style.border="none",t.style.padding="0",t.style.height="",t.style.minHeight="",t.style.maxHeight="",t.style.overflow="hidden",this._textareaElement.parentNode.appendChild(t),this._cachedLineHeight=t.clientHeight,t.remove(),this._setMinHeight(),this._setMaxHeight()}_measureScrollHeight(){const t=this._textareaElement,i=t.style.marginBottom||"",r=this._platform.FIREFOX,s=r&&this._hasFocus,o=r?"cdk-textarea-autosize-measuring-firefox":"cdk-textarea-autosize-measuring";s&&(t.style.marginBottom=`${t.clientHeight}px`),t.classList.add(o);const a=t.scrollHeight-4;return t.classList.remove(o),s&&(t.style.marginBottom=i),a}_cacheTextareaPlaceholderHeight(){if(!this._isViewInited||null!=this._cachedPlaceholderHeight)return;if(!this.placeholder)return void(this._cachedPlaceholderHeight=0);const t=this._textareaElement.value;this._textareaElement.value=this._textareaElement.placeholder,this._cachedPlaceholderHeight=this._measureScrollHeight(),this._textareaElement.value=t}ngDoCheck(){this._platform.isBrowser&&this.resizeToFitContent()}resizeToFitContent(t=!1){if(!this._enabled||(this._cacheTextareaLineHeight(),this._cacheTextareaPlaceholderHeight(),!this._cachedLineHeight))return;const i=this._elementRef.nativeElement,r=i.value;if(!t&&this._minRows===this._previousMinRows&&r===this._previousValue)return;const s=this._measureScrollHeight(),o=Math.max(s,this._cachedPlaceholderHeight||0);i.style.height=`${o}px`,this._ngZone.runOutsideAngular(()=>{"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(()=>this._scrollToCaretPosition(i)):setTimeout(()=>this._scrollToCaretPosition(i))}),this._previousValue=r,this._previousMinRows=this._minRows}reset(){void 0!==this._initialHeight&&(this._textareaElement.style.height=this._initialHeight)}_noopInputHandler(){}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_scrollToCaretPosition(t){const{selectionStart:i,selectionEnd:r}=t;!this._destroyed.isStopped&&this._hasFocus&&t.setSelectionRange(i,r)}}return n.\u0275fac=function(t){return new(t||n)(y(je),y(Tn),y(oe),y(pe,8))},n.\u0275dir=L({type:n,selectors:[["textarea","cdkTextareaAutosize",""]],hostAttrs:["rows","1",1,"cdk-textarea-autosize"],hostBindings:function(t,i){1&t&&J("input",function(){return i._noopInputHandler()})},inputs:{minRows:["cdkAutosizeMinRows","minRows"],maxRows:["cdkAutosizeMaxRows","maxRows"],enabled:["cdkTextareaAutosize","enabled"],placeholder:"placeholder"},exportAs:["cdkTextareaAutosize"]}),n})(),yK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({}),n})();const VMe=new k("MAT_INPUT_VALUE_ACCESSOR"),BMe=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let UMe=0;const jMe=Fxe(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i}});let Fm=(()=>{class n extends jMe{constructor(t,i,r,s,o,a,l,c,u,d){super(a,s,o,r),this._elementRef=t,this._platform=i,this._autofillMonitor=c,this._formField=d,this._uid="mat-input-"+UMe++,this.focused=!1,this.stateChanges=new H,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(p=>u9().has(p)),this._iOSKeyupListener=p=>{const m=p.target;!m.value&&0===m.selectionStart&&0===m.selectionEnd&&(m.setSelectionRange(1,1),m.setSelectionRange(0,0))};const h=this._elementRef.nativeElement,f=h.nodeName.toLowerCase();this._inputValueAccessor=l||h,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&u.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===f,this._isTextarea="textarea"===f,this._isInFormField=!!d,this._isNativeSelect&&(this.controlType=h.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=an(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){var t,i,r,s;return null!==(s=null!==(t=this._required)&&void 0!==t?t:null===(r=null===(i=this.ngControl)||void 0===i?void 0:i.control)||void 0===r?void 0:r.hasValidator(yl.required))&&void 0!==s&&s}set required(t){this._required=an(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&u9().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=an(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var t,i;const r=(null===(i=null===(t=this._formField)||void 0===t?void 0:t._hideControlPlaceholder)||void 0===i?void 0:i.call(t))?null:this.placeholder;if(r!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=r,r?s.setAttribute("placeholder",r):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){BMe.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(y(je),y(Tn),y(lo,10),y(py,8),y(gy,8),y(G9),y(VMe,10),y(FMe),y(oe),y(mK,8))},n.\u0275dir=L({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,i){1&t&&J("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&t&&(zg("disabled",i.disabled)("required",i.required),Zt("id",i.id)("data-placeholder",i.placeholder)("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),Ht("mat-input-server",i._isServer)("mat-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[ze([{provide:QO,useExisting:n}]),se,qn]}),n})(),HMe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({providers:[G9],imports:[[yK,gK,pt],yK,gK]}),n})();function $Me(n,e){1&n&&(S(0,"mat-error"),te(1," Please enter a valid email address "),M())}function zMe(n,e){1&n&&(S(0,"mat-error"),te(1," Email is "),S(2,"strong"),te(3,"required"),M()())}function qMe(n,e){1&n&&(S(0,"mat-error"),te(1," Password is "),S(2,"strong"),te(3,"required"),M()())}const GMe=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;let WMe=(()=>{class n{constructor(t,i,r){this.router=t,this.auth=i,this.snackBar=r,this.wrong_password=!1,this.user_not_found=!1,this.usercreds={email:"",password:"",displayName:""},this.emailFormControl=new Cu("",[yl.required,yl.pattern(GMe)]),this.passwordFormControl=new Cu("",[yl.required])}ngOnInit(){}handleKeyboardEvent(t){"Enter"===t.key&&this.loginButton()}signupButton(){this.router.navigate(["signup"])}loginButton(){this.auth.login(this.usercreds).then(()=>{this.router.navigate(["dashboard"])}).catch(t=>{switch(console.error("Error in loginButton with message: "),console.error(t),t.code){case"auth/wrong-password":this.wrong_password=!0,this.user_not_found=!1,this.snackBar.open("Invalid Email/Password","Close",{duration:3e3});break;case"auth/user-not-found":this.wrong_password=!1,this.user_not_found=!0,this.snackBar.open("User not found","Close",{duration:3e3});break;default:this.snackBar.open("Failed to login","Close",{duration:3e3})}})}}return n.\u0275fac=function(t){return new(t||n)(y(Wn),y(Oo),y(Om))},n.\u0275cmp=Qe({type:n,selectors:[["app-login-page"]],hostBindings:function(t,i){1&t&&J("keypress",function(s){return i.handleKeyboardEvent(s)},!1,sE)},decls:26,vars:7,consts:[[1,"login-container"],[1,"left-container"],[1,"content"],["src","assets/login_image.jpg"],[1,"right-container"],[1,"card-container"],[1,"input-width"],["matInput","","placeholder","Email",3,"formControl","ngModel","ngModelChange"],[4,"ngIf"],["matInput","","placeholder","Password","type","password",3,"formControl","ngModel","ngModelChange"],["mat-raised-button","","color","primary",2,"width","80%",3,"click"],[3,"click"]],template:function(t,i){1&t&&(S(0,"div",0)(1,"div",1)(2,"div",2),et(3,"img",3),M()(),S(4,"div",4)(5,"div",5)(6,"mat-card")(7,"mat-card-title"),te(8," Login "),M(),S(9,"mat-card-subtitle"),te(10," Logging to the application "),M(),S(11,"mat-card-content")(12,"mat-form-field",6)(13,"input",7),J("ngModelChange",function(s){return i.usercreds.email=s}),M(),Ue(14,$Me,2,0,"mat-error",8),Ue(15,zMe,4,0,"mat-error",8),M(),S(16,"mat-form-field",6)(17,"input",9),J("ngModelChange",function(s){return i.usercreds.password=s}),M(),Ue(18,qMe,4,0,"mat-error",8),M()(),S(19,"button",10),J("click",function(){return i.loginButton()}),te(20,"Login"),M(),S(21,"p"),te(22,"Not yet a member? "),S(23,"a",11),J("click",function(){return i.signupButton()}),te(24,"Click here"),M(),te(25," to register"),M()()()()()),2&t&&($(13),Y("formControl",i.emailFormControl)("ngModel",i.usercreds.email),$(1),Y("ngIf",i.emailFormControl.hasError("pattern")),$(1),Y("ngIf",i.emailFormControl.hasError("required")),$(2),Y("formControl",i.passwordFormControl)("ngModel",i.usercreds.password),$(1),Y("ngIf",i.passwordFormControl.hasError("required")))},directives:[cK,aK,lK,oK,Nm,Fm,_l,sf,my,to,dK,Ua],styles:[".login-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-gap:20px;gap:20px;background:#f7f8fb}.left-contiainer[_ngcontent-%COMP%], .right-container[_ngcontent-%COMP%]{height:100vh}.card-container[_ngcontent-%COMP%]{width:400px;position:relative;top:50%;left:50%;padding:15px;transform:translate(-50%,-50%);text-align:center}img[_ngcontent-%COMP%]{height:100vh;max-width:100%}a[_ngcontent-%COMP%]{cursor:pointer;color:#00f}.input-width[_ngcontent-%COMP%]{width:80%}.content[_ngcontent-%COMP%]{max-height:calc(100vh - 20px);overflow-y:hidden;overflow-x:hidden}"]}),n})();function KMe(n,e){1&n&&(S(0,"mat-error"),te(1," Please enter a valid email address "),M())}function QMe(n,e){1&n&&(S(0,"mat-error"),te(1," Email is "),S(2,"strong"),te(3,"required"),M()())}function YMe(n,e){1&n&&(S(0,"mat-error"),te(1," Password is "),S(2,"strong"),te(3,"required"),M()())}const XMe=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;let ZMe=(()=>{class n{constructor(t,i){this.authService=t,this.snackBar=i,this.user_exists=!1,this.usercreds={email:"",password:"",displayName:""},this.emailFormControl=new Cu("",[yl.required,yl.pattern(XMe)]),this.passwordFormControl=new Cu("",[yl.required])}ngOnInit(){}handleKeyboardEvent(t){"Enter"===t.key&&this.createAccountButton()}createAccountButton(){this.authService.signUp(this.usercreds).catch(t=>{const i=t.message;console.log("Error in createAccountButton with message: "+i),"auth/email-already-in-use"==i&&(this.user_exists=!0,this.snackBar.open("Email already in use","Close",{duration:3e3}))})}}return n.\u0275fac=function(t){return new(t||n)(y(Oo),y(Om))},n.\u0275cmp=Qe({type:n,selectors:[["app-signup-page"]],hostBindings:function(t,i){1&t&&J("keypress",function(s){return i.handleKeyboardEvent(s)},!1,sE)},decls:23,vars:8,consts:[[1,"login-container"],[1,"left-container"],[1,"content"],["src","assets/login_image.jpg"],[1,"right-container"],[1,"card-container"],[1,"input-width"],["matInput","","placeholder","Email",3,"formControl","ngModel","ngModelChange"],[4,"ngIf"],["matInput","","placeholder","Password","type","password",3,"formControl","ngModel","ngModelChange"],["matInput","","placeholder","Nickname",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",2,"width","80%",3,"click"]],template:function(t,i){1&t&&(S(0,"div",0)(1,"div",1)(2,"div",2),et(3,"img",3),M()(),S(4,"div",4)(5,"div",5)(6,"mat-card")(7,"mat-card-title"),te(8," Signup "),M(),S(9,"mat-card-subtitle"),te(10," All fields mandatory "),M(),S(11,"mat-card-content")(12,"mat-form-field",6)(13,"input",7),J("ngModelChange",function(s){return i.usercreds.email=s}),M(),Ue(14,KMe,2,0,"mat-error",8),Ue(15,QMe,4,0,"mat-error",8),M(),S(16,"mat-form-field",6)(17,"input",9),J("ngModelChange",function(s){return i.usercreds.password=s}),M(),Ue(18,YMe,4,0,"mat-error",8),M(),S(19,"mat-form-field",6)(20,"input",10),J("ngModelChange",function(s){return i.usercreds.displayName=s}),M()()(),S(21,"button",11),J("click",function(){return i.createAccountButton()}),te(22,"Signup"),M()()()()()),2&t&&($(13),Y("formControl",i.emailFormControl)("ngModel",i.usercreds.email),$(1),Y("ngIf",i.emailFormControl.hasError("pattern")),$(1),Y("ngIf",i.emailFormControl.hasError("required")),$(2),Y("formControl",i.passwordFormControl)("ngModel",i.usercreds.password),$(1),Y("ngIf",i.passwordFormControl.hasError("required")),$(2),Y("ngModel",i.usercreds.displayName))},directives:[cK,aK,lK,oK,Nm,Fm,_l,sf,my,to,dK,df,Ua],styles:[".login-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-gap:20px;gap:20px;background:#f7f8fb}.left-contiainer[_ngcontent-%COMP%], .right-container[_ngcontent-%COMP%]{height:100vh}.card-container[_ngcontent-%COMP%]{width:400px;position:relative;top:50%;left:50%;padding:15px;transform:translate(-50%,-50%);text-align:center}img[_ngcontent-%COMP%]{height:100vh;max-width:100%}a[_ngcontent-%COMP%]{cursor:pointer;color:#00f}.input-width[_ngcontent-%COMP%]{width:80%}.content[_ngcontent-%COMP%]{max-height:calc(100vh - 20px);overflow-y:hidden;overflow-x:hidden}"]}),n})(),pc=(()=>{class n{constructor(t){this.authService=t,this.auth=wn(bo),this.firestore=wn(ko),this.allFriendsSubject=new tn([]),this.allFriendsObservable=this.allFriendsSubject.asObservable(),this.currUserMyFriendsCollection=null,this.allFriendsOnsnapshotUnsubscribe=null,this.onAuthStateChangedUnsubscribe=null,this.onAuthStateChangedUnsubscribe=Ou(this.auth,i=>{i?this.initializeFriendsSubject():this.resetFields()})}ngOnDestroy(){this.clearSubscriptions(),this.resetFields()}resetFields(){this.allFriendsSubject.next([]),this.currUserMyFriendsCollection=null}clearSubscriptions(){null!=this.allFriendsOnsnapshotUnsubscribe&&(this.allFriendsOnsnapshotUnsubscribe(),this.allFriendsOnsnapshotUnsubscribe=null),null!=this.onAuthStateChangedUnsubscribe&&(this.onAuthStateChangedUnsubscribe(),this.onAuthStateChangedUnsubscribe=null)}initializeFriendsSubject(){var i,t=this;const r=Ft(tt(this.firestore,"friends"),Xe("email","==",null===(i=this.auth.currentUser)||void 0===i?void 0:i.email));gn(r).then(function(){var s=_(function*(o){var a,l;o.empty?yield Nb(tt(t.firestore,"friends"),{email:null===(a=t.auth.currentUser)||void 0===a?void 0:a.email}).then(u=>{t.currUserMyFriendsCollection=tt(t.firestore,`friends/${u.id}/myFriends`)}).catch(u=>{console.log(u)}):t.currUserMyFriendsCollection=tt(t.firestore,`friends/${o.docs[0].id}/myFriends`);const c=Ft(t.currUserMyFriendsCollection,Xe("email","!=",null===(l=t.auth.currentUser)||void 0===l?void 0:l.email));t.allFriendsOnsnapshotUnsubscribe=Fb(c,u=>{let d=[];for(let h=0;h<u.size;h++)d.push(u.docs[h].data().email);if(d.length>0){const h=Ft(tt(t.firestore,"users").withConverter(Ls),Xe("email","in",d));gn(h).then(f=>{let p=[];for(let m=0;m<f.size;m++)p.push(f.docs[m].data());t.allFriendsSubject.next(p)}).catch(f=>console.log(f))}},u=>{console.log("Error getting subcollection of friends with message: "+u.message)})});return function(o){return s.apply(this,arguments)}}()).catch(s=>console.log("Error initializing friends subject with message:\n"+s.message))}unsubscribeAll(){null!=this.allFriendsOnsnapshotUnsubscribe&&(this.allFriendsOnsnapshotUnsubscribe(),this.allFriendsOnsnapshotUnsubscribe=null)}}return n.\u0275fac=function(t){return new(t||n)(w(Oo))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Pw=(()=>{class n{constructor(t){this.friendsService=t,this.auth=wn(bo),this.firestore=wn(ko),this.subscribedFriends=[],this.pendingSubsriptions=[],this.messageConversations=[],this.showChatFeedSubject=new tn(!1),this.chatReceiverSubject=new tn(null),this.newChatSentSubject=new H,this.showChatFeedObservable=this.showChatFeedSubject.asObservable(),this.chatReceiverObservable=this.chatReceiverSubject.asObservable(),this.newChatSentObservable=this.newChatSentSubject.asObservable(),this.onAuthStateChangedUnsubcribe=null,this.allFriendsObservableSubscription=null,this.onAuthStateChangedUnsubcribe=Ou(this.auth,i=>{i?this.initializeAll():this.resetFields()})}ngOnDestroy(){this.clearSubscriptions(),this.resetFields()}initializeAll(){}resetFields(){this.showChatFeedSubject.next(!1),this.chatReceiverSubject.next(null),this.subscribedFriends=[]}clearSubscriptions(){null!=this.onAuthStateChangedUnsubcribe&&(this.onAuthStateChangedUnsubcribe(),this.onAuthStateChangedUnsubcribe=null),null!=this.allFriendsObservableSubscription&&(this.allFriendsObservableSubscription.unsubscribe(),this.allFriendsObservableSubscription=null),this.subscribedFriends.forEach(t=>{t.onSnapshotUnsubscribe()})}beginRetreivingMessages(){this.allFriendsObservableSubscription=this.friendsService.allFriendsObservable.pipe(we(t=>{let i=[];return t.forEach(r=>{!this.subscribedFriends.map(s=>s.friendEmail).includes(r.email)&&!this.pendingSubsriptions.includes(r.email)&&(this.pendingSubsriptions.push(r.email),i.push(r.email))}),i}),hn(t=>t.length>0)).subscribe(t=>{t.forEach(i=>{this.retriveChatsSnapshot(i).then(r=>{this.subscribedFriends.push({friendEmail:i,onSnapshotUnsubscribe:r});const o=this.pendingSubsriptions.findIndex(a=>a===i);this.pendingSubsriptions.splice(o,1)}).catch(r=>console.error(r))})})}retrieveChatsByReference(t){const i="string"==typeof t?t:t.email,r=this.messageConversations.findIndex(s=>s.chatName===i);if(-1===r){const o=this.messageConversations.length;return this.messageConversations.push({chatName:i,allMessages:[]}),this.messageConversations[o].allMessages}return this.messageConversations[r].allMessages}openchatFeed(t){this.showChatFeedSubject.next(!0),this.chatReceiverSubject.next(t)}sendChat(t,i){var r;const s=null===(r=this.auth.currentUser)||void 0===r?void 0:r.email,a={message:i,date:this.getDate(),senderEmail:s};return new Promise((l,c)=>{const u=Ft(tt(this.firestore,"conversations").withConverter(yw),xb(Mo(Xe("messenger1","==",t),Xe("messenger2","==",s)),Mo(Xe("messenger1","==",s),Xe("messenger2","==",t))));gn(u).then(d=>{let h=e5(this.firestore),f=0===d.size?ni(tt(this.firestore,"messages")).id:d.docs[0].data().conversationID;d.size>1&&c("Multiple conversation documents exists between both users"),0===d.size&&h.set(ni(tt(this.firestore,"conversations")).withConverter(yw),{conversationID:f,messenger1:s,messenger2:t}),h.set(ni(tt(this.firestore,`messages/${f}/allMessages`)).withConverter(SO),a),h.commit().then(()=>{this.newChatSentSubject.next(t),l()}).catch(p=>c(p))}).catch(d=>c(d))})}retriveChatsByDate(t,i){return new Promise((r,s)=>{var o;const a=null===(o=this.auth.currentUser)||void 0===o?void 0:o.email,l=Ft(tt(this.firestore,"conversations").withConverter(yw),xb(Mo(Xe("messenger1","==",a),Xe("messenger2","==",i)),Mo(Xe("messenger1","==",i),Xe("messenger2","==",a))));gn(l).then(c=>{c.size>1&&s(`There exists multiple conversation documents between the current user and ${i}`);let u=c.docs[0].data().conversationID;const d=Ft(tt(this.firestore,`messages/${u}/allMessages`).withConverter(SO),Kp("date","desc"),Z6(t),Wp(10));gn(d).then(h=>{let f=[];h.forEach(p=>{f.push(p.data())}),r(f)}).catch(h=>s(h))}).catch(c=>s(c))})}retriveChatsSnapshot(t){return new Promise((i,r)=>{var s;const o=null===(s=this.auth.currentUser)||void 0===s?void 0:s.email,a=Ft(tt(this.firestore,"conversations").withConverter(yw),xb(Mo(Xe("messenger1","==",o),Xe("messenger2","==",t)),Mo(Xe("messenger1","==",t),Xe("messenger2","==",o))));gn(a).then(l=>{let c;if(l.size>1&&r(`There exists multiple conversation documents between the current user and ${t}`),0===l.size){c=ni(tt(this.firestore,"messages")).id;const h={messenger1:o,messenger2:t,conversationID:c};X6(ni(this.firestore,`conversations/${c}`),h)}else c=l.docs[0].data().conversationID;const u=Ft(tt(this.firestore,`messages/${c}/allMessages`).withConverter(SO),Kp("date","desc"),Wp(10)),d=Fb(u,h=>{let f=[];for(let m=h.docChanges().length-1;m>=0;m--){const g=h.docChanges()[m];"added"===g.type&&f.push(g.doc.data())}const p=this.messageConversations.findIndex(m=>m.chatName===t);-1===p?this.messageConversations.push({chatName:t,allMessages:f}):this.messageConversations[p].allMessages.push(...f)},h=>{console.error(h)});i(d)}).catch(l=>r(l))})}getDate(){const t=new Date;let i=String(t.getDate()).padStart(2,"0"),r=String(t.getMonth()+1).padStart(2,"0");return`${t.getFullYear()}-${r}-${i} ${t.getHours()<10?"0"+t.getHours():t.getHours()}:${t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()}:${t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds()}`}}return n.\u0275fac=function(t){return new(t||n)(w(pc))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Lm=(()=>{class n{constructor(t,i){this.authService=t,this.friendsService=i,this.auth=wn(bo),this.firestore=wn(ko),this.requestCollectionRef=tt(this.firestore,"requests"),this.friendsCollectionRef=tt(this.firestore,"friends"),this.allReceivedRequests=[],this.allSentRequests=[],this.receivedRequestsSubject=new tn([]),this.sentRequestsSubject=new tn([]),this.receivedRequestsObservable=this.receivedRequestsSubject.asObservable(),this.sentRequestsObservable=this.sentRequestsSubject.asObservable(),this.receivedRequestsOnsnapshotUnsubscribe=null,this.onAuthStateChangedUnsubscribe=null,this.onAuthStateChangedUnsubscribe=Ou(this.auth,r=>{r&&(this.initializeRecievedRequests(),this.initializeSentRequests())})}ngOnDestroy(){null!=this.receivedRequestsOnsnapshotUnsubscribe&&(this.receivedRequestsOnsnapshotUnsubscribe(),this.receivedRequestsOnsnapshotUnsubscribe=null),null!=this.onAuthStateChangedUnsubscribe&&(this.onAuthStateChangedUnsubscribe(),this.onAuthStateChangedUnsubscribe=null)}initializeRecievedRequests(){var t;const i=Ft(tt(this.firestore,"requests").withConverter(_w),Xe("receiver","==",null===(t=this.auth.currentUser)||void 0===t?void 0:t.email));this.receivedRequestsOnsnapshotUnsubscribe=Fb(i,{next:r=>{let s=[];if(r.docChanges().forEach(o=>{"added"===o.type&&s.push(o.doc.data().sender)}),0!==s.length){const o=Ft(tt(this.firestore,"users").withConverter(Ls),Xe("email","in",s));gn(o).then(a=>{a.forEach(l=>{this.allReceivedRequests.push(l.data())}),this.receivedRequestsSubject.next(this.allReceivedRequests)}).catch(a=>{console.error(a)})}},error:r=>{console.error(r)}})}initializeSentRequests(){var t;const i=Ft(tt(this.firestore,"requests").withConverter(_w),Xe("sender","==",null===(t=this.auth.currentUser)||void 0===t?void 0:t.email));gn(i).then(r=>{let s=[];for(let o=0;o<r.size;o++)s.push(r.docs[o].data().receiver);if(0!==s.length){const o=Ft(tt(this.firestore,"users").withConverter(Ls),Xe("email","in",s));gn(o).then(a=>{a.forEach(l=>{this.allSentRequests.push(l.data())})}).catch(a=>{console.error(a)})}}).catch(r=>{console.error(r)})}addRequest(t){var i;let r={sender:null===(i=this.auth.currentUser)||void 0===i?void 0:i.email,receiver:t},s=Ft(tt(this.firestore,"users").withConverter(Ls),Xe("email","==",t));return gn(s).then(o=>{let a=o.docs[0].data();this.allSentRequests.push(a),this.sentRequestsSubject.next(this.allSentRequests)}).catch(o=>{console.error(o)}),Nb(this.requestCollectionRef.withConverter(_w),r)}acceptRequests(t){var i=this;let r;return null==this.friendsService.currUserMyFriendsCollection?new Promise((s,o)=>{o("No collection reference exists to the current user's myFriends subcollection")}):(r=this.friendsService.currUserMyFriendsCollection,new Promise((s,o)=>{_(function*(){var a,l;const c=null===(a=i.auth.currentUser)||void 0===a?void 0:a.email,u=t.email;let d=e5(i.firestore);const h=Ft(i.friendsCollectionRef,Xe("email","==",null===(l=i.auth.currentUser)||void 0===l?void 0:l.email)),f=Ft(i.friendsCollectionRef,Xe("email","==",t.email)),p=gn(h).then(function(){var X=_(function*(be){if(be.empty)yield Nb(i.friendsCollectionRef,{email:c}).then(Ct=>{d.set(ni(r),{email:u})});else if(be.size>1)o("Multiple friend docs exist for current user");else{const Ar=tt(i.firestore,`friends/${be.docs[0].id}/myFriends`),or=ni(Ar);d.set(or,{email:u})}});return function(be){return X.apply(this,arguments)}}()).catch(X=>{o(X)}),m=gn(f).then(function(){var X=_(function*(be){if(be.empty)yield Nb(i.friendsCollectionRef,{email:u}).then(Ct=>{const Ar=tt(i.firestore,`friends/${Ct.id}/myFriends`);d.set(ni(Ar),{email:c})});else if(be.size>1)o("Multiple friend docs exist for other user");else{const Ar=tt(i.firestore,`friends/${be.docs[0].id}/myFriends`),or=ni(Ar);d.set(or,{email:c})}});return function(be){return X.apply(this,arguments)}}()).catch(X=>{o(X)}),b=Mo(Xe("receiver","==",c),Xe("sender","==",u)),v=Ft(i.requestCollectionRef,b),E=gn(v).then(X=>{if(X.empty)o("Error: request never exists yet friends were added");else if(X.size>1)o("Error: multiple requests existed");else{const Ct=ni(i.firestore,`requests/${X.docs[0].id}`);d.delete(Ct)}}).catch(X=>{o(X)}),B=Mo(Xe("receiver","==",u),Xe("sender","==",c)),W=Ft(i.requestCollectionRef,B),ae=gn(W).then(X=>{if(X.empty)return;const Ct=ni(i.firestore,`requests/${X.docs[0].id}`);d.delete(Ct)}).catch(X=>{o(X)});yield Promise.all([p,m,E,ae]),d.commit().then(()=>{let X=i.allReceivedRequests.map(be=>be.email).findIndex(be=>be==u);-1!==X&&(i.allReceivedRequests.splice(X,1),i.receivedRequestsSubject.next(i.allReceivedRequests)),s("Successful writeBatch to Firestore")}).catch(X=>{o(X)})})()}))}deleteRequests(t){var i;const r=null===(i=this.auth.currentUser)||void 0===i?void 0:i.email,s=t.email,o=Mo(Xe("receiver","==",r),Xe("sender","==",s)),a=Ft(this.requestCollectionRef,o);gn(a).then(l=>{if(l.empty)throw"Error: request never exists yet friends were added";if(l.size>1)throw"Error: multiple requests existed";{const u=ni(this.firestore,`requests/${l.docs[0].id}`);pDe(u).then(()=>{let d=this.allReceivedRequests.map(h=>h.email).findIndex(h=>h==s);-1!==d&&(this.allReceivedRequests.splice(d,1),this.receivedRequestsSubject.next(this.allReceivedRequests))}).catch(d=>console.log("Error deleting request with message: "+d.message))}}).catch(l=>console.log("Error getting request to delete with message: "+l.message))}unsubcribeAll(){null!=this.receivedRequestsOnsnapshotUnsubscribe&&(this.receivedRequestsOnsnapshotUnsubscribe(),this.receivedRequestsOnsnapshotUnsubscribe=null)}}return n.\u0275fac=function(t){return new(t||n)(w(Oo),w(pc))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bK="firebasestorage.googleapis.com",wK="storageBucket";class Vt extends er{constructor(e,t,i=0){super(YO(e),`Firebase Storage: ${t} (${YO(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return YO(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var wt=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(wt||(wt={})),wt))();function YO(n){return"storage/"+n}function XO(){return new Vt(wt.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function CK(){return new Vt(wt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function EK(){return new Vt(wt.CANCELED,"User canceled the upload/download.")}function DK(){return new Vt(wt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ZO(n){return new Vt(wt.INVALID_ARGUMENT,n)}function IK(){return new Vt(wt.APP_DELETED,"The Firebase app was deleted.")}function Vm(n,e){return new Vt(wt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Bm(n){throw new Vt(wt.INTERNAL_ERROR,"Internal error: "+n)}class xi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=xi.makeFromUrl(e,t)}catch(r){return new xi(e,"")}if(""===i.path)return i;throw function lke(n){return new Vt(wt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+r+"(/(.*))?$","i");function c(I){I.path_=decodeURIComponent(I.path)}const d=t.replace(/[.]/g,"\\."),E=[{regex:a,indices:{bucket:1,path:3},postModify:function s(I){"/"===I.path.charAt(I.path.length-1)&&(I.path_=I.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${d}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:c},{regex:new RegExp(`^https?://${t===bK?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:c}];for(let I=0;I<E.length;I++){const B=E[I],W=B.regex.exec(e);if(W){let X=W[B.indices.path];X||(X=""),i=new xi(W[B.indices.bucket],X),B.postModify(i);break}}if(null==i)throw function ake(n){return new Vt(wt.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return i}}class pke{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Ow(n){return"string"==typeof n||n instanceof String}function SK(n){return JO()&&n instanceof Blob}function JO(){return"undefined"!=typeof Blob&&!function v$(){var n;const e=null===(n=by())||void 0===n?void 0:n.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}()}function e1(n,e,t,i){if(i<e)throw ZO(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw ZO(`Invalid value for '${n}'. Expected ${t} or less.`)}function No(n,e,t){let i=e;return null==t&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function TK(n){const e=encodeURIComponent;let t="?";for(const i in n)n.hasOwnProperty(i)&&(t=t+(e(i)+"=")+e(n[i])+"&");return t=t.slice(0,-1),t}var ja=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(ja||(ja={})),ja))();function AK(n,e){const t=n>=500&&n<600,r=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||r||s}class bke{constructor(e,t,i,r,s,o,a,l,c,u,d,h=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const t=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());!function _ke(n){return void 0!==n}(l)?s():s(l)}catch(l){o(l)}else if(null!==a){const l=XO();l.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,l):l)}else o(r.canceled?this.appDelete_?IK():EK():CK())};this.canceled_?t(0,new Nw(!1,null,!0)):this.backoffId_=function mke(n,e,t){let i=1,r=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(...g){c||(c=!0,e.apply(null,g))}function d(g){r=setTimeout(()=>{r=null,n(f,l())},g)}function h(){s&&clearTimeout(s)}function f(g,...b){if(c)return void h();if(g)return h(),void u.call(null,g,...b);if(l()||o)return h(),void u.call(null,g,...b);let E;i<64&&(i*=2),1===a?(a=2,E=0):E=1e3*(i+Math.random()),d(E)}let p=!1;function m(g){p||(p=!0,h(),!c&&(null!==r?(g||(a=2),clearTimeout(r),d(0)):g||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,m(!0)},t),m}((i,r)=>{if(r)return void i(!1,new Nw(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===ja.NO_ERROR,l=s.getStatus();if(!a||AK(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===ja.ABORT;return void i(!1,new Nw(!1,null,u))}const c=-1!==this.successCodes_.indexOf(l);i(!0,new Nw(c,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function gke(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Nw{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function Tke(...n){const e=function Ske(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}if(JO())return new Blob(n);throw new Vt(wt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}class t1{constructor(e,t){this.data=e,this.contentType=t||null}}function MK(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|63&i):55296==(64512&i)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++t),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):e.push(239,191,189):56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function kK(n,e){switch(n){case"base64":{const r=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(r||s)throw Vm(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case"base64url":{const r=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(r||s)throw Vm(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function xke(n){if("undefined"==typeof atob)throw function hke(n){return new Vt(wt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(r){throw r.message.includes("polyfill")?r:Vm(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class RK{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Vm("data_url","Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;null!=i&&(this.base64=function Pke(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}class Fo{constructor(e,t){let i=0,r="";SK(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(SK(this.data_)){const r=function Ake(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===r?null:new Fo(r)}{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Fo(i,!0)}}static getBlob(...e){if(JO()){const t=e.map(i=>i instanceof Fo?i.data_:i);return new Fo(Tke.apply(null,t))}{const t=e.map(o=>Ow(o)?function xK(n,e){switch(n){case"raw":return new t1(MK(e));case"base64":case"base64url":return new t1(kK(n,e));case"data_url":return new t1(function kke(n){const e=new RK(n);return e.base64?kK("base64",e.rest):function Mke(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Vm("data_url","Malformed data URL.")}return MK(e)}(e.rest)}(e),function Rke(n){return new RK(n).contentType}(e))}throw XO()}("raw",o).data:o.data_);let i=0;t.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new Fo(r,!0)}}uploadData(){return this.data_}}function n1(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function vke(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function PK(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Fke(n,e){return e}class Mi{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||Fke}}let Fw=null;function Um(){if(Fw)return Fw;const n=[];n.push(new Mi("bucket")),n.push(new Mi("generation")),n.push(new Mi("metageneration")),n.push(new Mi("name","fullPath",!0));const t=new Mi("name");t.xform=function e(s,o){return function Lke(n){return!Ow(n)||n.length<2?n:PK(n)}(o)},n.push(t);const r=new Mi("size");return r.xform=function i(s,o){return void 0!==o?Number(o):o},n.push(r),n.push(new Mi("timeCreated")),n.push(new Mi("updated")),n.push(new Mi("md5Hash",null,!0)),n.push(new Mi("cacheControl",null,!0)),n.push(new Mi("contentDisposition",null,!0)),n.push(new Mi("contentEncoding",null,!0)),n.push(new Mi("contentLanguage",null,!0)),n.push(new Mi("contentType",null,!0)),n.push(new Mi("metadata","customMetadata",!0)),Fw=n,Fw}function OK(n,e,t){const i=n1(e);return null===i?null:function Bke(n,e,t){const i={type:"file"},r=t.length;for(let s=0;s<r;s++){const o=t[s];i[o.local]=o.xform(i,e[o.server])}return function Vke(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new xi(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(i,n),i}(n,i,t)}function r1(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}class Vs{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Bs(n){if(!n)throw XO()}function Lw(n,e){return function t(i,r){const s=OK(n,r,e);return Bs(null!==s),s}}function Vd(n){return function e(t,i){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function ske(){return new Vt(wt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function rke(){return new Vt(wt.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function ike(n){return new Vt(wt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function oke(n){return new Vt(wt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):i,r.status=t.getStatus(),r.serverResponse=i.serverResponse,r}}function jm(n){const e=Vd(n);return function t(i,r){let s=e(i,r);return 404===i.getStatus()&&(s=function nke(n){return new Vt(wt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function BK(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=function Qke(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),i}class Vw{constructor(e,t,i,r){this.current=e,this.total=t,this.finalized=!!i,this.metadata=r||null}}function s1(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(r){Bs(!1)}return Bs(!!t&&-1!==(e||["active"]).indexOf(t)),t}function o1(n){switch(n){case"running":case"pausing":case"canceling":return"running";case"paused":return"paused";case"success":return"success";case"canceled":return"canceled";default:return"error"}}class Jke{constructor(e,t,i){if(function yke(n){return"function"==typeof n}(e)||null!=t||null!=i)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=i?i:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Bd(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class tRe extends class eRe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ja.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ja.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ja.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r){if(this.sent_)throw Bm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bm("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bm("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Bm("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bm("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function ns(){return new tRe}class oRe{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=Um(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(wt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(AK(r.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=CK()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(wt.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const i=function Yke(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),o=BK(e,i,r),a={name:o.fullPath},l=No(s,n.host,n._protocol),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=r1(o,t),p=new Vs(l,"POST",function f(m){let g;s1(m);try{g=m.getResponseHeader("X-Goog-Upload-URL")}catch(b){Bs(!1)}return Bs(Ow(g)),g},n.maxUploadRetryTime);return p.urlParams=a,p.headers=u,p.body=d,p.errorHandler=Vd(e),p}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,ns,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const r=function Xke(n,e,t,i){const l=new Vs(t,"POST",function s(c){const u=s1(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch(f){Bs(!1)}d||Bs(!1);const h=Number(d);return Bs(!isNaN(h)),new Vw(h,i.size(),"final"===u)},n.maxUploadRetryTime);return l.headers={"X-Goog-Upload-Command":"query"},l.errorHandler=Vd(e),l}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,ns,t,i);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Vw(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let o;try{o=function Zke(n,e,t,i,r,s,o,a){const l=new Vw(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw function uke(){return new Vt(wt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const c=l.total-l.current;let u=c;r>0&&(u=Math.min(u,r));const d=l.current;let f="";f=0===u?"finalize":c===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${l.current}`},m=i.slice(d,d+u);if(null===m)throw DK();const E=new Vs(t,"POST",function g(I,B){const W=s1(I,["active","final"]),ae=l.current+u,X=i.size();let be;return be="final"===W?Lw(e,s)(I,B):null,new Vw(ae,X,"final"===W,be)},e.maxUploadRetryTime);return E.headers=p,E.body=m.uploadData(),E.progressCallback=a||null,E.errorHandler=Vd(n),E}(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(l){return this._error=l,void this._transition("error")}const a=this._ref.storage._makeRequest(o,ns,r,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=function LK(n,e,t){const r=No(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new Vs(r,"GET",Lw(n,t),o);return a.errorHandler=jm(e),a}(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,ns,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=function UK(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},l=function a(){let E="";for(let I=0;I<2;I++)E+=Math.random().toString().slice(2);return E}();o["Content-Type"]="multipart/related; boundary="+l;const c=BK(e,i,r),u=r1(c,t),f=Fo.getBlob("--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+u+"\r\n--"+l+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",i,"\r\n--"+l+"--");if(null===f)throw DK();const p={name:c.fullPath},m=No(s,n.host,n._protocol),b=n.maxUploadRetryTime,v=new Vs(m,"POST",Lw(n,t),b);return v.urlParams=p,v.headers=o,v.body=f.uploadData(),v.errorHandler=Vd(e),v}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,ns,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=EK(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=o1(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,r){const s=new Jke(t||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(o1(this._state)){case"success":Bd(this._resolve.bind(null,this.snapshot))();break;case"canceled":case"error":Bd(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(o1(this._state)){case"running":case"paused":e.next&&Bd(e.next.bind(e,this.snapshot))();break;case"success":e.complete&&Bd(e.complete.bind(e))();break;default:e.error&&Bd(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class mc{constructor(e,t){this._service=e,this._location=t instanceof xi?t:xi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new mc(e,t)}get root(){const e=new xi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return PK(this._location.path)}get storage(){return this._service}get parent(){const e=function Oke(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new xi(this._location.bucket,e);return new mc(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function fke(n){return new Vt(wt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function pRe(n){n._throwIfRoot("getDownloadURL");const e=function Gke(n,e,t){const r=No(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new Vs(r,"GET",function zke(n,e){return function t(i,r){const s=OK(n,r,e);return Bs(null!==s),function Uke(n,e,t,i){const r=n1(e);if(null===r||!Ow(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const d=n.fullPath;return No("/b/"+o(n.bucket)+"/o/"+o(d),t,i)+TK({alt:"media",token:c})})[0]}(s,r,n.host,n._protocol)}}(n,t),o);return a.errorHandler=jm(e),a}(n.storage,n._location,Um());return n.storage.makeRequestWithTokens(e,ns).then(t=>{if(null===t)throw function dke(){return new Vt(wt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function WK(n,e){if(n instanceof l1){const t=n;if(null==t._bucket)throw function cke(){return new Vt(wt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+wK+"' property when initializing the app?")}();const i=new mc(t,t._bucket);return null!=e?WK(i,e):i}return void 0!==e?function GK(n,e){const t=function Nke(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),i=new xi(n._location.bucket,t);return new mc(n.storage,i)}(n,e):n}function KK(n,e){const t=null==e?void 0:e[wK];return null==t?null:xi.makeFromBucketSpec(t,n)}class l1{constructor(e,t,i,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=bK,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?xi.makeFromBucketSpec(r,this._host):KK(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?xi.makeFromBucketSpec(this._url,e):KK(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){e1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){e1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return _(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const i=yield t.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var e=this;return _(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new mc(this,e)}_makeRequest(e,t,i,r,s=!0){if(this._deleted)return new pke(IK());{const o=function Ike(n,e,t,i,r,s,o=!0){const a=TK(n.urlParams),l=n.url+a,c=Object.assign({},n.headers);return function Eke(n,e){e&&(n["X-Firebase-GMPID"]=e)}(c,e),function wke(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(c,t),function Cke(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(c,s),function Dke(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(c,i),new bke(l,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,o)}(e,this._appId,i,r,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var i=this;return _(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(e,t,r,s).getPromise()})()}}const QK="@firebase/storage",XK="storage";function bRe(n,e,t){return function cRe(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new oRe(n,new Fo(e),t)}(n=Re(n),e,t)}function wRe(n){return pRe(n=Re(n))}function CRe(n,e){return function yRe(n,e){if(e&&function gRe(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof l1)return function _Re(n,e){return new mc(n,e)}(n,e);throw ZO("To use ref(service, url), the first argument must be a Storage instance.")}return WK(n,e)}(n=Re(n),e)}function ERe(n=_f(),e){const i=ia(n=Re(n),XK).getImmediate({identifier:e}),r=EI("storage");return r&&function DRe(n,e,t,i={}){!function vRe(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:DI(r,n.app.options.projectId))}(n,e,t,i)}(i,...r),i}function IRe(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new l1(t,i,r,e,ho)}!function SRe(){Kn(new Pn(XK,IRe,"PUBLIC").setMultipleInstances(!0)),ut(QK,"0.11.2",""),ut(QK,"0.11.2","esm2017")}();class Bw{constructor(e){return e}}const ZK="storage",c1=new k("angularfire2.storage-instances");function xRe(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new Bw(i)}}const MRe={provide:class TRe{constructor(){return Ef(ZK)}},deps:[[new Ze,c1]]},kRe={provide:Bw,useFactory:function ARe(n,e){const t=Cf(ZK,n,e);return t&&new Bw(t)},deps:[[new Ze,c1],sa]};let RRe=(()=>{class n{constructor(){ut("angularfire",Au.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({providers:[kRe,MRe]}),n})();function PRe(n,...e){return{ngModule:RRe,providers:[{provide:c1,useFactory:xRe(n),multi:!0,deps:[oe,Je,Df,If,[new Ze,sv],[new Ze,Af],...e]}]}}const ORe=Ie(wRe,!0),NRe=Ie(ERe,!0),FRe=Ie(CRe,!0),LRe=Ie(bRe,!0);let Ud=(()=>{class n{constructor(t,i,r){this.authService=t,this.requestsService=i,this.friendsService=r,this.auth=wn(bo),this.database=wn(Cm),this.firestore=wn(ko),this.storage=wn(Bw),this.authState$=obe(this.auth),this.onAuthStateChangedUnsubscribe=null,this.allFriendsObservableSubscription=null,this.friendStatusesUnsubscribe=null,this.currentUser=new tn({displayName:"",lowercaseName:"",email:"",photoURL:"",uid:""}),this.onAuthStateChangedUnsubscribe=Ou(this.auth,s=>{s?this.initializeAll():this.resetFields()})}ngOnDestroy(){this.clearSubscriptions(),this.resetFields()}initializeAll(){var t;const i=null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid,r=ni(this.firestore,`users/${i}`).withConverter(Ls);this.unsub=Fb(r,{next:s=>{if(null!=s){const o=s.data();this.currentUser.next(o)}},error:s=>{console.log("Error in snapshot: "+s)}})}resetFields(){this.currentUser.next(void 0)}clearSubscriptions(){null!=this.unsub&&(this.unsub(),this.unsub=null),null!=this.onAuthStateChangedUnsubscribe&&(this.onAuthStateChangedUnsubscribe(),this.onAuthStateChangedUnsubscribe=null),null!=this.allFriendsObservableSubscription&&(this.allFriendsObservableSubscription.unsubscribe(),this.allFriendsObservableSubscription=null),null!=this.friendStatusesUnsubscribe&&(this.friendStatusesUnsubscribe(),this.friendStatusesUnsubscribe=null)}updateNickname(t){var i=this;return _(function*(){var r,s=null;const o=null===(r=i.auth.currentUser)||void 0===r?void 0:r.uid,a=ni(i.firestore,`users/${o}`);if(yield J6(a,{displayName:t}).catch(l=>{const c=l.code;console.log("error code: "+c+" with msg: "+l.message),s=c}),null!=s)throw Error(s)})()}updateProfilePic(t){var i;const r=null===(i=this.auth.currentUser)||void 0===i?void 0:i.uid,s=FRe(this.storage,"profilepics/"+r),o=LRe(s,t);if(null!=this.auth.currentUser){const a=this.auth.currentUser;o.on("state_changed",l=>{},l=>{},()=>{ORe(o.snapshot.ref).then(l=>{const c=ni(this.firestore,`users/${r}`);J6(c,{photoURL:l}).then(()=>{mG(a,{photoURL:l}).catch(u=>{console.log("Error in uploading doc\nerror code: "+u.code+" with msg: "+u.message)})}).catch(u=>{console.log("Error in uploading doc\nerror code: "+u.code+" with msg: "+u.message)})})})}}getCurrentUser(){var t;const i=null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid,r=ni(this.firestore,`users/${i}`).withConverter(Ls);return gDe(r)}getCurrUserEmail(){var t;return null===(t=this.auth.currentUser)||void 0===t?void 0:t.email}getSnapshotFriendStatuses(t,i,r){let s=[];if(0==t.length)return[];const o=t.map(c=>c.email),l=Em(this.database,"status");return o.forEach(c=>{const u=r9(l,i9("email"),n9(1),t9(c));s.push(ZTe(u,d=>{const h=d.val().email,f=d.val().online?"online":"offline";i(h,f,r)},d=>{console.error(d)}))}),s}getInitialFriendStatuses(t,i,r){if(0==t.length)return;const s=t.map(l=>l.email),a=Em(this.database,"status");s.forEach(l=>{const c=r9(a,i9("email"),n9(1),t9(l));YTe(c).then(u=>{u.forEach(d=>{const h=d.val().email,f=d.val().online?"online":"offline";i(h,f,r)})}).catch(u=>{console.log(u)})})}instantSearch(t){var i=this;return _(function*(){let r=[];return yield gn(Ft(tt(i.firestore,"users").withConverter(Ls),Kp("lowercaseName"),yDe(t),mDe(t+"\uf8ff"),Wp(20))).then(s=>{H_([i.requestsService.receivedRequestsObservable,i.requestsService.sentRequestsObservable,i.friendsService.allFriendsObservable]).pipe(li(1),we(([o,a,l])=>Array(...o,...a,...l).map(c=>c.email))).subscribe(o=>{s.forEach(a=>{var l;const c=a.data();!o.includes(c.email)&&(null===(l=i.auth.currentUser)||void 0===l?void 0:l.email)!==c.email&&r.push(c)})})}).catch(s=>{console.log("Error searching for users with message: "+s.message)}),r})()}unsubscribeAll(){null!=this.unsub&&(this.unsub(),this.unsub=null)}}return n.\u0275fac=function(t){return new(t||n)(w(Oo),w(Lm),w(pc))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),JK=(()=>{class n{constructor(t,i,r){this.authService=t,this.friendsService=i,this.requestsService=r,this.auth=wn(bo),this.firestore=wn(ko),this.latestSuggestions=[],this.suggestsSubject=new tn([]),this.suggestsObservable=this.suggestsSubject.asObservable(),this.combineSubscription=null,this.onAuthStateChangedUnsubscribe=null,this.onAuthStateChangedUnsubscribe=Ou(this.auth,s=>{s?this.initialBasicSuggestions():this.resetFields()})}ngOnDestroy(){this.clearSubscriptions(),this.resetFields()}resetFields(){this.latestSuggestions=[],this.suggestsSubject.next([])}clearSubscriptions(){null!=this.combineSubscription&&(this.combineSubscription.unsubscribe(),this.combineSubscription=null),null!=this.onAuthStateChangedUnsubscribe&&(this.onAuthStateChangedUnsubscribe(),this.onAuthStateChangedUnsubscribe=null)}initialBasicSuggestions(){var t=this;return _(function*(){var i,r,s,o;let a=[null===(i=t.auth.currentUser)||void 0===i?void 0:i.email];const l=Ft(tt(t.firestore,"friends"),Xe("email","==",null===(r=t.auth.currentUser)||void 0===r?void 0:r.email)),c=Ft(tt(t.firestore,"requests").withConverter(_w),xb(Xe("receiver","==",null===(s=t.auth.currentUser)||void 0===s?void 0:s.email),Xe("sender","==",null===(o=t.auth.currentUser)||void 0===o?void 0:o.email))),u=new Promise((f,p)=>{gn(l).then(m=>{m.size>0&&gn(tt(t.firestore,`friends/${m.docs[0].id}/myFriends`)).then(function(){var g=_(function*(b){b.forEach(v=>{a.push(v.data().email)}),f()});return function(b){return g.apply(this,arguments)}}()).catch(g=>{console.error(g),p(g)}),f()}).catch(m=>{console.error(m),p(m)})}),d=new Promise((f,p)=>{gn(c).then(m=>{m.forEach(g=>{var b;const v=g.data().sender===(null===(b=t.auth.currentUser)||void 0===b?void 0:b.email)?g.data().receiver:g.data().sender;a.push(v)}),f()}).catch(m=>{console.error(m),p(m)})});yield Promise.all([u,d]).catch(f=>console.log("Error getting nonsuggestable users before recursion with message: "+f.message)),t._recursiveQuery("",50,a,[]),H_([t.requestsService.sentRequestsObservable,t.requestsService.receivedRequestsObservable,t.friendsService.allFriendsObservable]).pipe(jO(1),we(([f,p,m],g)=>Array(...f.map(b=>b.email),...p.map(b=>b.email),...m.map(b=>b.email)))).subscribe(f=>{f.forEach(p=>{const m=t.latestSuggestions.map(g=>g.email).findIndex(g=>g==p);-1!=m&&t.latestSuggestions.splice(m,1)}),t.suggestsSubject.next(t.latestSuggestions)})})()}_recursiveQuery(t,i,r,s){let o;o=""==t?Ft(tt(this.firestore,"users").withConverter(Ls),Kp("email"),Wp(i)):Ft(tt(this.firestore,"users").withConverter(Ls),Kp("email"),Wp(i),Z6(t)),gn(o).then(a=>{if(a.empty)return this.latestSuggestions=s,void this.suggestsSubject.next(s);let l="";for(let c=0;c<a.size;c++){let u=a.docs[c].data();if(r.includes(u.email)||s.push(u),c===a.size-1&&(l=u.email),s.length===i)return this.latestSuggestions=s,void this.suggestsSubject.next(s)}if(a.size<i)return this.latestSuggestions=s,void this.suggestsSubject.next(s);this._recursiveQuery(l,i,r,s)})}unsubscribeAll(){null!=this.combineSubscription&&(this.combineSubscription.unsubscribe(),this.combineSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(w(Oo),w(pc),w(Lm))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const URe=["*",[["mat-toolbar-row"]]],jRe=["*","mat-toolbar-row"],HRe=Mw(class{constructor(n){this._elementRef=n}});let $Re=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=L({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),zRe=(()=>{class n extends HRe{constructor(t,i,r){super(t),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(y(je),y(Tn),y(pe))},n.\u0275cmp=Qe({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,i,r){if(1&t&&zt(r,$Re,5),2&t){let s;Ge(s=We())&&(i._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,i){2&t&&Ht("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[se],ngContentSelectors:jRe,decls:2,vars:0,template:function(t,i){1&t&&(mr(URe),ct(0),ct(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),qRe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({imports:[[pt],pt]}),n})(),GRe=(()=>{class n{constructor(t,i,r,s,o,a){this.router=t,this.auth=i,this.requestsService=r,this.userService=s,this.friendsService=o,this.suggestionsService=a}ngOnInit(){}logoutButton(){this.requestsService.unsubcribeAll(),this.userService.unsubscribeAll(),this.friendsService.unsubscribeAll(),this.suggestionsService.unsubscribeAll(),this.auth.logout().then(()=>{this.router.navigate(["login"])}).catch(t=>{console.log("Error logging out with message: \n"+t.message)})}}return n.\u0275fac=function(t){return new(t||n)(y(Wn),y(Oo),y(Lm),y(Ud),y(pc),y(JK))},n.\u0275cmp=Qe({type:n,selectors:[["app-nav-bar"]],decls:8,vars:0,consts:[[2,"padding-bottom","5px"],["color","primary"],[1,"fillup"],["mat-button","",3,"click"]],template:function(t,i){1&t&&(S(0,"div",0)(1,"mat-toolbar",1)(2,"span"),te(3,"Application Title"),M(),et(4,"span",2),S(5,"span")(6,"button",3),J("click",function(){return i.logoutButton()}),te(7,"Logout"),M()()()())},directives:[zRe,Ua],styles:[".fillup[_ngcontent-%COMP%]{flex:1 1 auto}"]}),n})(),t7=(()=>{class n{constructor(){this._listeners=[]}notify(t,i){for(let r of this._listeners)r(t,i)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(i=>t!==i)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),WRe=0;const u1=new k("CdkAccordion");let KRe=(()=>{class n{constructor(){this._stateChanges=new H,this._openCloseAllActions=new H,this.id="cdk-accordion-"+WRe++,this._multi=!1}get multi(){return this._multi}set multi(t){this._multi=an(t)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(t){this._stateChanges.next(t)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=L({type:n,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[ze([{provide:u1,useExisting:n}]),qn]}),n})(),QRe=0,YRe=(()=>{class n{constructor(t,i,r){this.accordion=t,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=Et.EMPTY,this.closed=new Le,this.opened=new Le,this.destroyed=new Le,this.expandedChange=new Le,this.id="cdk-accordion-child-"+QRe++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=an(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=an(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return n.\u0275fac=function(t){return new(t||n)(y(u1,12),y(Ei),y(t7))},n.\u0275dir=L({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[ze([{provide:u1,useValue:void 0}])]}),n})(),XRe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({}),n})();const ZRe=["body"];function JRe(n,e){}const ePe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],tPe=["mat-expansion-panel-header","*","mat-action-row"];function nPe(n,e){1&n&&et(0,"span",2),2&n&&Y("@indicatorRotate",gt()._getExpandedState())}const iPe=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],rPe=["mat-panel-title","mat-panel-description","*"],d1=new k("MAT_ACCORDION"),n7="225ms cubic-bezier(0.4,0.0,0.2,1)",i7={indicatorRotate:hu("indicatorRotate",[qr("collapsed, void",en({transform:"rotate(0deg)"})),qr("expanded",en({transform:"rotate(180deg)"})),ro("expanded <=> collapsed, void => collapsed",io(n7))]),bodyExpansion:hu("bodyExpansion",[qr("collapsed, void",en({height:"0px",visibility:"hidden"})),qr("expanded",en({height:"*",visibility:"visible"})),ro("expanded <=> collapsed, void => collapsed",io(n7))])};let sPe=(()=>{class n{constructor(t){this._template=t}}return n.\u0275fac=function(t){return new(t||n)(y(gr))},n.\u0275dir=L({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]}),n})(),oPe=0;const r7=new k("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let s7=(()=>{class n extends YRe{constructor(t,i,r,s,o,a,l){super(t,i,r),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new Le,this.afterCollapse=new Le,this._inputChanges=new H,this._headerId="mat-expansion-panel-header-"+oPe++,this._bodyAnimationDone=new H,this.accordion=t,this._document=o,this._bodyAnimationDone.pipe(A9((c,u)=>c.fromState===u.fromState&&c.toState===u.toState)).subscribe(c=>{"void"!==c.fromState&&("expanded"===c.toState?this.afterExpand.emit():"collapsed"===c.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=an(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(gs(null),hn(()=>this.expanded&&!this._portal),li(1)).subscribe(()=>{this._portal=new Dw(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,i=this._body.nativeElement;return t===i||i.contains(t)}return!1}}return n.\u0275fac=function(t){return new(t||n)(y(d1,12),y(Ei),y(t7),y(Ni),y(pe),y(wr,8),y(r7,8))},n.\u0275cmp=Qe({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(t,i,r){if(1&t&&zt(r,sPe,5),2&t){let s;Ge(s=We())&&(i._lazyContent=s.first)}},viewQuery:function(t,i){if(1&t&&jr(ZRe,5),2&t){let r;Ge(r=We())&&(i._body=r.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,i){2&t&&Ht("mat-expanded",i.expanded)("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-expansion-panel-spacing",i._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[ze([{provide:d1,useValue:void 0}]),se,qn],ngContentSelectors:tPe,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,i){1&t&&(mr(ePe),ct(0),S(1,"div",0,1),J("@bodyExpansion.done",function(s){return i._bodyAnimationDone.next(s)}),S(3,"div",2),ct(4,1),Ue(5,JRe,0,0,"ng-template",3),M(),ct(6,2),M()),2&t&&($(1),Y("@bodyExpansion",i._getExpandedState())("id",i.id),Zt("aria-labelledby",i._headerId),$(4),Y("cdkPortalOutlet",i._portal))},directives:[xm],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}\n'],encapsulation:2,data:{animation:[i7.bodyExpansion]},changeDetection:0}),n})();class aPe{}const lPe=Nxe(aPe);let o7=(()=>{class n extends lPe{constructor(t,i,r,s,o,a,l){super(),this.panel=t,this._element=i,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=a,this._parentChangeSubscription=Et.EMPTY;const c=t.accordion?t.accordion._stateChanges.pipe(hn(u=>!(!u.hideToggle&&!u.togglePosition))):xr;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=Wd(t.opened,t.closed,c,t._inputChanges.pipe(hn(u=>!!(u.hideToggle||u.disabled||u.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(hn(()=>t._containsFocus())).subscribe(()=>r.focusVia(i,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:Nd(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,i){t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return n.\u0275fac=function(t){return new(t||n)(y(s7,1),y(je),y(Mm),y(Ei),y(r7,8),y(wr,8),Gs("tabindex"))},n.\u0275cmp=Qe({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(t,i){1&t&&J("click",function(){return i._toggle()})("keydown",function(s){return i._keydown(s)}),2&t&&(Zt("id",i.panel._headerId)("tabindex",i.tabIndex)("aria-controls",i._getPanelId())("aria-expanded",i._isExpanded())("aria-disabled",i.panel.disabled),Hg("height",i._getHeaderHeight()),Ht("mat-expanded",i._isExpanded())("mat-expansion-toggle-indicator-after","after"===i._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===i._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[se],ngContentSelectors:rPe,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,i){1&t&&(mr(iPe),S(0,"span",0),ct(1),ct(2,1),ct(3,2),M(),Ue(4,nPe,1,1,"span",1)),2&t&&($(4),Y("ngIf",i._showToggle()))},directives:[to],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[i7.indicatorRotate]},changeDetection:0}),n})(),cPe=(()=>{class n extends KRe{constructor(){super(...arguments),this._ownHeaders=new au,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(t){this._hideToggle=an(t)}ngAfterContentInit(){this._headers.changes.pipe(gs(this._headers)).subscribe(t=>{this._ownHeaders.reset(t.filter(i=>i.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new N9(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(t){this._keyManager.onKeydown(t)}_handleHeaderFocus(t){this._keyManager.updateActiveItem(t)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mn(n)))(i||n)}}(),n.\u0275dir=L({type:n,selectors:[["mat-accordion"]],contentQueries:function(t,i,r){if(1&t&&zt(r,o7,5),2&t){let s;Ge(s=We())&&(i._headers=s)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(t,i){2&t&&Ht("mat-accordion-multi",i.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[ze([{provide:d1,useExisting:n}]),se]}),n})(),uPe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({imports:[[du,pt,XRe,Sw]]}),n})();const dPe=["tooltip"],a7="tooltip-panel",l7=Va({passive:!0}),c7=new k("mat-tooltip-scroll-strategy"),mPe={provide:c7,deps:[Ba],useFactory:function pPe(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}},gPe=new k("mat-tooltip-default-options",{providedIn:"root",factory:function _Pe(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let yPe=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u,d,h,f){this._overlay=t,this._elementRef=i,this._scrollDispatcher=r,this._viewContainerRef=s,this._ngZone=o,this._platform=a,this._ariaDescriber=l,this._focusMonitor=c,this._dir=d,this._defaultOptions=h,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new H,this._scrollStrategy=u,this._document=f,h&&(h.position&&(this.position=h.position),h.touchGestures&&(this.touchGestures=h.touchGestures)),d.change.pipe(Qt(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}get position(){return this._position}set position(t){var i;t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(this._overlayRef),null===(i=this._tooltipInstance)||void 0===i||i.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(t){this._disabled=an(t),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(t){this._showDelay=Rd(t)}get hideDelay(){return this._hideDelay}set hideDelay(t){this._hideDelay=Rd(t),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(t){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=t?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Qt(this._destroyed)).subscribe(t=>{t?"keyboard"===t&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const t=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([i,r])=>{t.removeEventListener(i,r,l7)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const i=this._createOverlay();this._detach(),this._portal=this._portal||new Od(this._tooltipComponent,this._viewContainerRef);const r=this._tooltipInstance=i.attach(this._portal).instance;r._triggerElement=this._elementRef.nativeElement,r._mouseLeaveHideDelay=this._hideDelay,r.afterHidden().pipe(Qt(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),r.show(t)}hide(t=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(t)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){var t;if(this._overlayRef)return this._overlayRef;const i=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),r=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(i);return r.positionChanges.pipe(Qt(this._destroyed)).subscribe(s=>{this._updateCurrentPositionClass(s.connectionPair),this._tooltipInstance&&s.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:r,panelClass:`${this._cssClassPrefix}-${a7}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Qt(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Qt(this._destroyed)).subscribe(()=>{var s;return null===(s=this._tooltipInstance)||void 0===s?void 0:s._handleBodyInteraction()}),this._overlayRef.keydownEvents().pipe(Qt(this._destroyed)).subscribe(s=>{this._isTooltipVisible()&&27===s.keyCode&&!Nd(s)&&(s.preventDefault(),s.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),(null===(t=this._defaultOptions)||void 0===t?void 0:t.disableTooltipInteractivity)&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(t){const i=t.getConfig().positionStrategy,r=this._getOrigin(),s=this._getOverlayPosition();i.withPositions([this._addOffset(Object.assign(Object.assign({},r.main),s.main)),this._addOffset(Object.assign(Object.assign({},r.fallback),s.fallback))])}_addOffset(t){return t}_getOrigin(){const t=!this._dir||"ltr"==this._dir.value,i=this.position;let r;"above"==i||"below"==i?r={originX:"center",originY:"above"==i?"top":"bottom"}:"before"==i||"left"==i&&t||"right"==i&&!t?r={originX:"start",originY:"center"}:("after"==i||"right"==i&&t||"left"==i&&!t)&&(r={originX:"end",originY:"center"});const{x:s,y:o}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:s,originY:o}}}_getOverlayPosition(){const t=!this._dir||"ltr"==this._dir.value,i=this.position;let r;"above"==i?r={overlayX:"center",overlayY:"bottom"}:"below"==i?r={overlayX:"center",overlayY:"top"}:"before"==i||"left"==i&&t||"right"==i&&!t?r={overlayX:"end",overlayY:"center"}:("after"==i||"right"==i&&t||"left"==i&&!t)&&(r={overlayX:"start",overlayY:"center"});const{x:s,y:o}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:s,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(li(1),Qt(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,i){return"above"===this.position||"below"===this.position?"top"===i?i="bottom":"bottom"===i&&(i="top"):"end"===t?t="start":"start"===t&&(t="end"),{x:t,y:i}}_updateCurrentPositionClass(t){const{overlayY:i,originX:r,originY:s}=t;let o;if(o="center"===i?this._dir&&"rtl"===this._dir.value?"end"===r?"left":"right":"start"===r?"left":"right":"bottom"===i&&"top"===s?"above":"below",o!==this._currentPosition){const a=this._overlayRef;if(a){const l=`${this._cssClassPrefix}-${a7}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",i=>{var r;const s=i.relatedTarget;(!s||!(null===(r=this._overlayRef)||void 0===r?void 0:r.overlayElement.contains(s)))&&this.hide()}],["wheel",i=>this._wheelListener(i)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const i=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};t.push(["touchend",i],["touchcancel",i])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([i,r])=>{this._elementRef.nativeElement.addEventListener(i,r,l7)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){const i=this._document.elementFromPoint(t.clientX,t.clientY),r=this._elementRef.nativeElement;i!==r&&!r.contains(i)&&this.hide()}}_disableNativeGesturesIfNecessary(){const t=this.touchGestures;if("off"!==t){const i=this._elementRef.nativeElement,r=i.style;("on"===t||"INPUT"!==i.nodeName&&"TEXTAREA"!==i.nodeName)&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),("on"===t||!i.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}}return n.\u0275fac=function(t){wh()},n.\u0275dir=L({type:n,inputs:{position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),n})(),vPe=(()=>{class n extends yPe{constructor(t,i,r,s,o,a,l,c,u,d,h,f){super(t,i,r,s,o,a,l,c,u,d,h,f),this._tooltipComponent=wPe}}return n.\u0275fac=function(t){return new(t||n)(y(Ba),y(je),y(d9),y(Ni),y(oe),y(Tn),y(dxe),y(Mm),y(c7),y(Tm,8),y(gPe,8),y(pe))},n.\u0275dir=L({type:n,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[se]}),n})(),bPe=(()=>{class n{constructor(t,i){this._changeDetectorRef=t,this._visibility="initial",this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new H,this._animationsDisabled="NoopAnimations"===i}show(t){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},t)}hide(t){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},t)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:t}){(!t||!this._triggerElement.contains(t))&&this.hide(this._mouseLeaveHideDelay)}_onShow(){}_handleAnimationEnd({animationName:t}){(t===this._showAnimation||t===this._hideAnimation)&&this._finalizeAnimation(t===this._showAnimation)}_finalizeAnimation(t){t?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(t){const i=this._tooltip.nativeElement,r=this._showAnimation,s=this._hideAnimation;if(i.classList.remove(t?s:r),i.classList.add(t?r:s),this._isVisible=t,t&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const o=getComputedStyle(i);("0s"===o.getPropertyValue("animation-duration")||"none"===o.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}t&&this._onShow(),this._animationsDisabled&&(i.classList.add("_mat-animation-noopable"),this._finalizeAnimation(t))}}return n.\u0275fac=function(t){return new(t||n)(y(Ei),y(wr,8))},n.\u0275dir=L({type:n}),n})(),wPe=(()=>{class n extends bPe{constructor(t,i,r){super(t,r),this._breakpointObserver=i,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)"),this._showAnimation="mat-tooltip-show",this._hideAnimation="mat-tooltip-hide"}}return n.\u0275fac=function(t){return new(t||n)(y(Ei),y(WO),y(wr,8))},n.\u0275cmp=Qe({type:n,selectors:[["mat-tooltip-component"]],viewQuery:function(t,i){if(1&t&&jr(dPe,7),2&t){let r;Ge(r=We())&&(i._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(t,i){1&t&&J("mouseleave",function(s){return i._handleMouseLeave(s)}),2&t&&Hg("zoom",i.isVisible()?1:null)},features:[se],decls:4,vars:6,consts:[[1,"mat-tooltip",3,"ngClass","animationend"],["tooltip",""]],template:function(t,i){if(1&t&&(S(0,"div",0,1),J("animationend",function(s){return i._handleAnimationEnd(s)}),function xV(n,e){const t=Be();let i;const r=n+20;t.firstCreatePass?(i=function Vne(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=Za(i.type)),o=Bo(y);try{const a=_g(!1),l=s();return _g(a),function lee(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,A(),r,l),l}finally{Bo(o)}}(2,"async"),te(3),M()),2&t){let r;Ht("mat-tooltip-handset",null==(r=function MV(n,e,t){const i=n+20,r=A(),s=Ic(r,i);return function Ph(n,e){return n[1].data[e].pure}(r,i)?DV(r,yi(),e,s.transform,t,s):s.transform(t)}(2,4,i._isHandset))?null:r.matches),Y("ngClass",i.tooltipClass),$(3),Qs(i.message)}},directives:[Q0],pipes:[qB],styles:[".mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis;transform:scale(0)}.mat-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}.mat-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-tooltip-show{0%{opacity:0;transform:scale(0)}50%{opacity:.5;transform:scale(0.99)}100%{opacity:1;transform:scale(1)}}@keyframes mat-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(1)}}.mat-tooltip-show{animation:mat-tooltip-show 200ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-tooltip-hide{animation:mat-tooltip-hide 100ms cubic-bezier(0, 0, 0.2, 1) forwards}\n"],encapsulation:2,changeDetection:0}),n})(),CPe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({providers:[mPe],imports:[[Rxe,du,BO,pt],pt,Ew]}),n})();class EPe{}class Ha{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ha?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ha;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ha?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class DPe{encodeKey(e){return u7(e)}encodeValue(e){return u7(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const SPe=/%(\d[a-f0-9])/gi,TPe={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function u7(n){return encodeURIComponent(n).replace(SPe,(e,t)=>{var i;return null!==(i=TPe[t])&&void 0!==i?i:e})}function d7(n){return`${n}`}class $a{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new DPe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function IPe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new $a({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(d7(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(d7(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class APe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function h7(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function f7(n){return"undefined"!=typeof Blob&&n instanceof Blob}function p7(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Hm{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function xPe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Ha),this.context||(this.context=new APe),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new $a,this.urlWithParams=t}serializeBody(){return null===this.body?null:h7(this.body)||f7(this.body)||p7(this.body)||function MPe(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof $a?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||p7(this.body)?null:f7(this.body)?this.body.type||null:h7(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof $a?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const i=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const d=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),u)),new Hm(i,r,o,{params:u,headers:c,context:d,reportProgress:l,responseType:s,withCredentials:a})}}var ii=(()=>((ii=ii||{})[ii.Sent=0]="Sent",ii[ii.UploadProgress=1]="UploadProgress",ii[ii.ResponseHeader=2]="ResponseHeader",ii[ii.DownloadProgress=3]="DownloadProgress",ii[ii.Response=4]="Response",ii[ii.User=5]="User",ii))();class h1 extends class kPe{constructor(e,t=200,i="OK"){this.headers=e.headers||new Ha,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=ii.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new h1({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function f1(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let g7=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Hm)s=t;else{let l,c;l=r.headers instanceof Ha?r.headers:new Ha(r.headers),r.params&&(c=r.params instanceof $a?r.params:new $a({fromObject:r.params})),s=new Hm(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=ne(s).pipe(mu(l=>this.handler.handle(l)));if(t instanceof Hm||"events"===r.observe)return o;const a=o.pipe(hn(l=>l instanceof h1));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(we(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(we(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(we(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(we(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new $a).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,f1(r,i))}post(t,i,r={}){return this.request("POST",t,f1(r,i))}put(t,i,r={}){return this.request("PUT",t,f1(r,i))}}return n.\u0275fac=function(t){return new(t||n)(w(EPe))},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})();const PPe=["*"];let Uw;function $m(n){var e;return(null===(e=function OPe(){if(void 0===Uw&&(Uw=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(Uw=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Uw}())||void 0===e?void 0:e.createHTML(n))||n}function _7(n){return Error(`Unable to find icon with the name "${n}"`)}function y7(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function v7(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class gc{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let jw=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new gc(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const o=this._sanitizer.sanitize(Ye.HTML,r);if(!o)throw v7(r);const a=$m(o);return this._addSvgIconConfig(t,i,new gc("",a,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new gc(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(Ye.HTML,i);if(!s)throw v7(i);const o=$m(s);return this._addSvgIconSetConfig(t,new gc("",o,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(Ye.RESOURCE_URL,t);if(!i)throw y7(t);const r=this._cachedIconsByUrl.get(i);return r?ne(Hw(r)):this._loadSvgIconFromConfig(new gc(t,null)).pipe(kn(s=>this._cachedIconsByUrl.set(i,s)),we(s=>Hw(s)))}getNamedSvgIcon(t,i=""){const r=b7(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):Gh(_7(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?ne(Hw(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(we(i=>Hw(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?ne(r):aH(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(so(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(Ye.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),ne(null)})))).pipe(we(()=>{const o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw _7(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(kn(i=>t.svgText=i),we(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?ne(null):this._fetchIcon(t).pipe(kn(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString($m("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString($m("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&i.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){var i;const{url:r,options:s}=t,o=null!==(i=null==s?void 0:s.withCredentials)&&void 0!==i&&i;if(!this._httpClient)throw function NPe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const a=this._sanitizer.sanitize(Ye.RESOURCE_URL,r);if(!a)throw y7(r);const l=this._inProgressUrlFetches.get(a);if(l)return l;const c=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(we(u=>$m(u)),oj(()=>this._inProgressUrlFetches.delete(a)),K1());return this._inProgressUrlFetches.set(a,c),c}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(b7(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return LPe(s)?new gc(s.url,null,s.options):new gc(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(w(g7,8),w(sD),w(pe,8),w(Go))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Hw(n){return n.cloneNode(!0)}function b7(n,e){return n+":"+e}function LPe(n){return!(!n.url||!n.options)}const VPe=Mw(class{constructor(n){this._elementRef=n}}),BPe=new k("mat-icon-location",{providedIn:"root",factory:function UPe(){const n=wn(pe),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),w7=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],jPe=w7.map(n=>`[${n}]`).join(", "),HPe=/^url\(['"]?#(.*?)['"]?\)$/;let $w=(()=>{class n extends VPe{constructor(t,i,r,s,o){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=o,this._inline=!1,this._currentIconFetch=Et.EMPTY,r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=an(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();i!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),i&&t.classList.add(i),this._previousFontSetClass=i),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(jPe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)w7.forEach(o=>{const a=i[s],l=a.getAttribute(o),c=l?l.match(HPe):null;if(c){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(li(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(y(je),y(jw),Gs("aria-hidden"),y(BPe),y(Go))},n.\u0275cmp=Qe({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,i){2&t&&(Zt("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),Ht("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[se],ngContentSelectors:PPe,decls:1,vars:0,template:function(t,i){1&t&&(mr(),ct(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),$Pe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({imports:[[pt],pt]}),n})();function zPe(n,e){if(1&n){const t=pr();S(0,"mat-form-field")(1,"input",13),J("ngModelChange",function(r){return Wi(t),gt().newNickname=r}),M()()}if(2&n){const t=gt();$(1),Y("ngModel",t.newNickname)}}function qPe(n,e){if(1&n){const t=pr();S(0,"button",14),J("click",function(){return Wi(t),gt().submitNicknameButton()}),S(1,"mat-icon",15),te(2,"check"),M()()}}function GPe(n,e){if(1&n){const t=pr();S(0,"button",14),J("click",function(){return Wi(t),gt().editNicknameButton()}),S(1,"mat-icon",16),te(2,"cancel"),M()()}}function WPe(n,e){if(1&n){const t=pr();S(0,"span",17)(1,"button",10),J("click",function(){return Wi(t),gt().editNicknameButton()}),S(2,"mat-icon"),te(3,"mode"),M()()()}}let KPe=(()=>{class n{constructor(t){this.userService=t,this.user={displayName:"",lowercaseName:"",email:"",photoURL:"",uid:""},this.nickNameEdit=!1,this.newNickname="",this.currentUserSubscription=null,this.currentUserSubscription=this.userService.currentUser.subscribe(i=>{this.user=null!=i?i:{displayName:"",lowercaseName:"",email:"",photoURL:"",uid:""}})}ngOnInit(){}ngOnDestroy(){null!=this.currentUserSubscription&&(this.currentUserSubscription.unsubscribe(),this.currentUserSubscription=null)}submitNicknameButton(){this.userService.updateNickname(this.newNickname).then(()=>{this.editNicknameButton()}).catch(t=>{console.log(t.message)})}editNicknameButton(){this.nickNameEdit=!this.nickNameEdit}chooseImage(t){this.selectedFiles=t.target.files,null!=this.selectedFiles&&this.selectedFiles.item(0)&&this.userService.updateProfilePic(this.selectedFiles.item(0))}}return n.\u0275fac=function(t){return new(t||n)(y(Ud))},n.\u0275cmp=Qe({type:n,selectors:[["app-profile"]],decls:18,vars:6,consts:[[1,"main-container"],[1,"first-col"],["width","150","height","150",1,"centered-and-cropped",2,"border-radius","50%",3,"src"],[1,"first-row"],[4,"ngIf"],["matTooltip","Do it"],["mat-icon-button","",3,"click",4,"ngIf"],["matTooltip","Cancel"],["matTooltip","Change your nickname",4,"ngIf"],["matTooltip","Change your profile pic"],["mat-mini-fab","","color","primary",3,"click"],["type","file",2,"display","none",3,"change"],["fileInput",""],["matInput","","placeholder","Enter new nick name","type","text",3,"ngModel","ngModelChange"],["mat-icon-button","",3,"click"],["color","primary"],["color","warn"],["matTooltip","Change your nickname"]],template:function(t,i){if(1&t){const r=pr();S(0,"div",0)(1,"div",1),et(2,"img",2),S(3,"h3"),te(4),M(),S(5,"div",3),Ue(6,zPe,2,1,"mat-form-field",4),S(7,"span",5),Ue(8,qPe,3,0,"button",6),M(),S(9,"span",7),Ue(10,GPe,3,0,"button",6),M(),Ue(11,WPe,4,0,"span",8),S(12,"span",9)(13,"button",10),J("click",function(){return Wi(r),function HL(n){return Ic(function SY(){return ce.lFrame.contextLView}(),20+n)}(17).click()}),S(14,"mat-icon"),te(15,"account_box"),M()()(),S(16,"input",11,12),J("change",function(o){return i.chooseImage(o)}),M()()()()}2&t&&($(2),nl("src",i.user.photoURL,qo),$(2),Ur("Nickname: ",i.user.displayName,""),$(2),Y("ngIf",i.nickNameEdit),$(2),Y("ngIf",i.nickNameEdit),$(2),Y("ngIf",i.nickNameEdit),$(1),Y("ngIf",!i.nickNameEdit))},directives:[to,Nm,Fm,_l,sf,df,vPe,Ua,$w],styles:[".centered-and-cropped[_ngcontent-%COMP%]{object-fit:cover}.main-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}.first-col[_ngcontent-%COMP%]{display:flex;flex-direction:column}.first-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}"]}),n})(),QPe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({imports:[[pt],pt]}),n})();const C7=["*"],YPe=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],XPe=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],nOe=q9(km(class{})),iOe=km(class{}),D7=new k("MatList"),rOe=new k("MatNavList");let p1=(()=>{class n extends nOe{constructor(t){super(),this._elementRef=t,this._stateChanges=new H,"action-list"===this._getListType()&&t.nativeElement.classList.add("mat-action-list")}_getListType(){const t=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===t?"list":"mat-action-list"===t?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return n.\u0275fac=function(t){return new(t||n)(y(je))},n.\u0275cmp=Qe({type:n,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[ze([{provide:D7,useExisting:n}]),se,qn],ngContentSelectors:C7,decls:1,vars:0,template:function(t,i){1&t&&(mr(),ct(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),n})(),zm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=L({type:n,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),n})(),I7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=L({type:n,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),n})(),m1=(()=>{class n extends iOe{constructor(t,i,r,s){super(),this._element=t,this._isInteractiveList=!1,this._destroyed=new H,this._disabled=!1,this._isInteractiveList=!!(r||s&&"action-list"===s._getListType()),this._list=r||s;const o=this._getHostElement();"button"===o.nodeName.toLowerCase()&&!o.hasAttribute("type")&&o.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(Qt(this._destroyed)).subscribe(()=>{i.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(t){this._disabled=an(t)}ngAfterContentInit(){!function W9(n,e,t="mat"){n.changes.pipe(gs(n)).subscribe(({length:i})=>{Pm(e,`${t}-2-line`,!1),Pm(e,`${t}-3-line`,!1),Pm(e,`${t}-multi-line`,!1),2===i||3===i?Pm(e,`${t}-${i}-line`,!0):i>3&&Pm(e,`${t}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(y(je),y(Ei),y(rOe,8),y(D7,8))},n.\u0275cmp=Qe({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(t,i,r){if(1&t&&(zt(r,zm,5),zt(r,I7,5),zt(r,Rm,5)),2&t){let s;Ge(s=We())&&(i._avatar=s.first),Ge(s=We())&&(i._icon=s.first),Ge(s=We())&&(i._lines=s)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(t,i){2&t&&Ht("mat-list-item-disabled",i.disabled)("mat-list-item-avatar",i._avatar||i._icon)("mat-list-item-with-avatar",i._avatar||i._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[se],ngContentSelectors:XPe,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(t,i){1&t&&(mr(YPe),S(0,"span",0),et(1,"span",1),ct(2),S(3,"span",2),ct(4,1),M(),ct(5,2),M()),2&t&&($(1),Y("matRippleTrigger",i._getHostElement())("matRippleDisabled",i._isRippleDisabled()))},directives:[kw],encapsulation:2,changeDetection:0}),n})(),uOe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({imports:[[K9,Z9,pt,J9,du],K9,pt,J9,QPe]}),n})();function dOe(n,e){if(1&n){const t=pr();S(0,"mat-list-item",1),J("click",function(){const s=Wi(t).$implicit;return gt().openChatFeed(s)}),et(1,"img",2),S(2,"h3",3),te(3),M(),S(4,"div",3)(5,"p"),te(6),M()()()}if(2&n){const t=e.$implicit,i=gt();$(1),nl("src",t.photoURL,qo),$(2),Ur(" ",t.displayName," "),$(3),Ur(" ",i.RTFriendStatuses.has(t.email)&&"online"==i.RTFriendStatuses.get(t.email)?"online":"offline"," ")}}let hOe=(()=>{class n{constructor(t,i,r){this.friendsService=t,this.usersService=i,this.messagesService=r,this.userFriends=[],this.RTFriendStatuses=new Map,this.allFriendsSubjectSubscription=null,this.RTFriendStatusUnsubscriptions=[]}ngOnInit(){this.allFriendsSubjectSubscription=this.friendsService.allFriendsObservable.subscribe(t=>{this.userFriends=t;let i=[];this.userFriends.forEach(r=>{null!=r&&!this.RTFriendStatuses.has(r.email)&&i.push(r)}),i.length>0&&(this.RTFriendStatusUnsubscriptions.push(...this.usersService.getSnapshotFriendStatuses(i,this._RTFriendUpdateCallback,this)),this.usersService.getInitialFriendStatuses(i,this._RTFriendInitCallback,this))})}ngOnDestory(){null!=this.allFriendsSubjectSubscription&&(this.allFriendsSubjectSubscription.unsubscribe(),this.allFriendsSubjectSubscription=null),this.RTFriendStatusUnsubscriptions.forEach(t=>{t()})}openChatFeed(t){this.messagesService.openchatFeed(t)}_RTFriendUpdateCallback(t,i,r){r.RTFriendStatuses.set(t,i)}_RTFriendInitCallback(t,i,r){r.RTFriendStatuses.has(t)||r.RTFriendStatuses.set(t,i)}}return n.\u0275fac=function(t){return new(t||n)(y(pc),y(Ud),y(Pw))},n.\u0275cmp=Qe({type:n,selectors:[["app-my-friends"]],decls:2,vars:1,consts:[[3,"click",4,"ngFor","ngForOf"],[3,"click"],["matListAvatar","",3,"src"],["matLine",""]],template:function(t,i){1&t&&(S(0,"mat-list"),Ue(1,dOe,7,3,"mat-list-item",0),M()),2&t&&($(1),Y("ngForOf",i.userFriends))},directives:[p1,Uh,m1,zm,Rm],styles:["mat-list-item[_ngcontent-%COMP%]{cursor:pointer}"]}),n})();function fOe(n,e){if(1&n){const t=pr();S(0,"mat-list-item"),et(1,"img",2),S(2,"h3",3),te(3),M(),S(4,"button",4),J("click",function(){const s=Wi(t).$implicit;return gt().addFriend(s)}),S(5,"mat-icon",5),te(6,"add_circle"),M()()()}if(2&n){const t=e.$implicit;$(1),nl("src",t.photoURL,qo),$(2),Ur(" ",t.displayName," ")}}let pOe=(()=>{class n{constructor(t,i,r,s){this.userService=t,this.requestsService=i,this.suggestionsService=r,this.snackBar=s,this.suggestedUsers=[],this.usersToAdd=[],this.unsubUsers=void 0,this.userIsSearching=!1,this.suggestionsSubjectSubscription=null}ngOnInit(){this.suggestionsSubjectSubscription=this.suggestionsService.suggestsObservable.subscribe(t=>{this.suggestedUsers=t,!1===this.userIsSearching&&(this.usersToAdd=this.suggestedUsers)})}ngOnDestroy(){null!=this.unsubUsers&&this.unsubUsers(),null!=this.suggestionsSubjectSubscription&&this.suggestionsSubjectSubscription.unsubscribe()}addFriend(t){this.requestsService.addRequest(t.email).then(()=>{this.snackBar.open("Request Sent","Okay",{duration:3e3})})}instantSearch(t){var i=this;return _(function*(){let r=t.target.value;""!=r?(i.userIsSearching=!0,i.usersToAdd=yield i.userService.instantSearch(r)):(i.userIsSearching=!1,i.usersToAdd=i.suggestedUsers)})()}}return n.\u0275fac=function(t){return new(t||n)(y(Ud),y(Lm),y(JK),y(Om))},n.\u0275cmp=Qe({type:n,selectors:[["app-add-friends"]],decls:4,vars:1,consts:[["matInput","","placeholder","Enter Username",3,"keyup"],[4,"ngFor","ngForOf"],["matListAvatar","",3,"src"],["matLine",""],["mat-icon-button","",3,"click"],["color","primary"]],template:function(t,i){1&t&&(S(0,"mat-form-field")(1,"input",0),J("keyup",function(s){return i.instantSearch(s)}),M()(),S(2,"mat-list"),Ue(3,fOe,7,2,"mat-list-item",1),M()),2&t&&($(3),Y("ngForOf",i.usersToAdd))},directives:[Nm,Fm,p1,Uh,m1,zm,Rm,Ua,$w],styles:[""]}),n})();function mOe(n,e){if(1&n){const t=pr();S(0,"mat-list-item"),et(1,"img",1),S(2,"h3",2),te(3),M(),S(4,"button",3),J("click",function(){const s=Wi(t).$implicit;return gt().acceptRequest(s)}),S(5,"mat-icon",4),te(6,"check"),M()(),S(7,"button",3),J("click",function(){const s=Wi(t).$implicit;return gt().deleteRequest(s)}),S(8,"mat-icon",5),te(9,"delete"),M()()()}if(2&n){const t=e.$implicit;$(1),nl("src",t.photoURL,qo),$(2),Ur(" ",t.displayName,"")}}let gOe=(()=>{class n{constructor(t,i){this.requestsService=t,this.snackBar=i,this.receivedRequests=[],this.receivedRequestsSubjectSubscription=null}ngOnInit(){this.receivedRequestsSubjectSubscription=this.requestsService.receivedRequestsObservable.subscribe(t=>{this.receivedRequests=t})}ngOnDestroy(){null!=this.receivedRequestsSubjectSubscription&&this.receivedRequestsSubjectSubscription.unsubscribe()}acceptRequest(t){this.requestsService.acceptRequests(t).then(()=>{this.snackBar.open("Friend Added","Okay",{duration:3e3})}).catch(i=>{throw i})}deleteRequest(t){this.requestsService.deleteRequests(t),this.snackBar.open("Request Ignored","Okay",{duration:3e3})}}return n.\u0275fac=function(t){return new(t||n)(y(Lm),y(Om))},n.\u0275cmp=Qe({type:n,selectors:[["app-requests"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["matListAvatar","",3,"src"],["matLine",""],["mat-icon-button","",3,"click"],["color","primary"],["color","warn"]],template:function(t,i){1&t&&(S(0,"mat-list"),Ue(1,mOe,10,2,"mat-list-item",0),M()),2&t&&($(1),Y("ngForOf",i.receivedRequests))},directives:[p1,Uh,m1,zm,Rm,Ua,$w],styles:[""]}),n})(),_Oe=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Qe({type:n,selectors:[["app-sidebar"]],decls:17,vars:0,consts:[["multi","true"],["hideToggle","true","expanded","true"]],template:function(t,i){1&t&&(S(0,"mat-accordion",0)(1,"mat-expansion-panel",1)(2,"mat-expansion-panel-header"),te(3," My Profile "),M(),et(4,"app-profile"),M(),S(5,"mat-expansion-panel",1)(6,"mat-expansion-panel-header"),te(7," Friends "),M(),et(8,"app-my-friends"),M(),S(9,"mat-expansion-panel",1)(10,"mat-expansion-panel-header"),te(11," Add Friends "),M(),et(12,"app-add-friends"),M(),S(13,"mat-expansion-panel",1)(14,"mat-expansion-panel-header"),te(15," Friend Requests "),M(),et(16,"app-requests"),M()())},directives:[cPe,s7,o7,KPe,hOe,pOe,gOe],styles:[""]}),n})(),yOe=(()=>{class n{constructor(t){this.el=t,this.detachedFromBottom=!1,this.scrollPosition=new Le}onScroll(t){try{const i=t.target.scrollTop,r=this.el.nativeElement.scrollHeight,s=this.el.nativeElement.offsetHeight;0===i?(this.scrollPosition.emit("bottom"),this.detachedFromBottom=!1):!1===this.detachedFromBottom&&(this.detachedFromBottom=!0,this.scrollPosition.emit("detached_from_bottom")),i<=-r+s+1&&this.scrollPosition.emit("top")}catch(i){console.error("Error in ScrollDirective: "+i)}}}return n.\u0275fac=function(t){return new(t||n)(y(je))},n.\u0275dir=L({type:n,selectors:[["","appScrollable",""]],hostBindings:function(t,i){1&t&&J("scroll",function(s){return i.onScroll(s)})},outputs:{scrollPosition:"scrollPosition"}}),n})(),vOe=(()=>{class n{constructor(t){this.messagesService=t,this.newmessage="",this.chatReceiverUser=null,this.chatReceiverObservableSubscription=null,this.chatReceiverObservableSubscription=this.messagesService.chatReceiverObservable.subscribe(i=>{this.chatReceiverUser=i})}ngOnInit(){}ngOnDestroy(){this.clearSubscriptions()}clearSubscriptions(){null!=this.chatReceiverObservableSubscription&&(this.chatReceiverObservableSubscription.unsubscribe(),this.chatReceiverObservableSubscription=null)}addMessage(){null!=this.chatReceiverUser&&""!=this.newmessage&&(this.messagesService.sendChat(this.chatReceiverUser.email,this.newmessage),this.newmessage="")}}return n.\u0275fac=function(t){return new(t||n)(y(Pw))},n.\u0275cmp=Qe({type:n,selectors:[["app-chat-feed-footer"]],decls:7,vars:1,consts:[[1,"chat-feed-footer-main-container"],[1,"search-width"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5","placeholder","Say something",3,"ngModel","ngModelChange"],["autosize","cdkTextareaAutosize"],["mat-icon-button","",3,"click"],["color","primary"]],template:function(t,i){1&t&&(S(0,"div",0)(1,"mat-form-field",1)(2,"textarea",2,3),J("ngModelChange",function(s){return i.newmessage=s}),M()(),S(4,"button",4),J("click",function(){return i.addMessage()}),S(5,"mat-icon",5),te(6,"send"),M()()()),2&t&&($(2),Y("ngModel",i.newmessage))},directives:[Nm,Fm,LMe,_l,sf,df,Ua,$w],styles:[".chat-feed-footer-main-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(10,1fr);grid-template-rows:auto;width:100%;height:100%}mat-form-field[_ngcontent-%COMP%]{grid-column:1/10}"]}),n})();const bOe=["chat_messages"],T7=function(n){return{"justify-content":n}},A7=function(n,e){return{"sent-message":n,"received-message":e}};function wOe(n,e){if(1&n&&(S(0,"div",8)(1,"div",9)(2,"p"),te(3),M(),S(4,"p",10)(5,"i"),te(6),M()()()()),2&n){const t=e.$implicit,i=gt();Y("ngStyle",Zg(4,T7,t.senderEmail===i.currUserEmail?"end":null)),$(1),Y("ngClass",h0(6,A7,t.senderEmail===i.currUserEmail,t.senderEmail!=i.currUserEmail)),$(2),Qs(t.message),$(3),Ur("Sent at ",t.date,"")}}function COe(n,e){if(1&n&&(S(0,"div",8)(1,"div",9)(2,"p"),te(3),M(),S(4,"p",10)(5,"i"),te(6),M()()()()),2&n){const t=e.$implicit,i=gt();Y("ngStyle",Zg(4,T7,t.senderEmail===i.currUserEmail?"end":null)),$(1),Y("ngClass",h0(6,A7,t.senderEmail===i.currUserEmail,t.senderEmail!=i.currUserEmail)),$(2),Qs(t.message),$(3),Ur("Sent at ",t.date,"")}}const EOe=function(n){return[n]};let DOe=(()=>{class n{constructor(t,i,r){this.messagesService=t,this.usersService=i,this.friendsService=r,this.chat_messages=null,this.chatReceiverUser=null,this.detachedFromBottom=!1,this.lastDate="",this.otherUserStatusUnsubscribe=null,this.currentConversationThread=[],this.additionalMessages=[],this.otherUserStatuses=new Map,this.chatReceiverObservableSubscription=null,this.retrieveConversationsObservableSubscription=null,this.newChatObservableSubscription=null,this.allFriendsSubjectSubscription=null,this.RTFriendStatusUnsubscriptions=[],this.currUserEmail=this.usersService.getCurrUserEmail(),this.messagesService.beginRetreivingMessages(),this.chatReceiverObservableSubscription=this.messagesService.chatReceiverObservable.subscribe(s=>{null!=s&&this.chatReceiverUser!=s&&(this.chatReceiverUser=s,this.additionalMessages=[],this.lastDate="",this.currentConversationThread=this.messagesService.retrieveChatsByReference(s),null!=this.otherUserStatusUnsubscribe&&(this.otherUserStatusUnsubscribe(),this.otherUserStatusUnsubscribe=null))}),this.allFriendsSubjectSubscription=this.friendsService.allFriendsObservable.subscribe(s=>{let o=[];s.forEach(a=>{null!=a&&!this.otherUserStatuses.has(a.email)&&o.push(a)}),o.length>0&&(this.RTFriendStatusUnsubscriptions.push(...this.usersService.getSnapshotFriendStatuses(o,this._onUserStatusUpdate,this)),this.usersService.getInitialFriendStatuses(o,this._onUserStatusInit,this))}),this.newChatObservableSubscription=this.messagesService.newChatSentObservable.subscribe(s=>{this.scrollDown()})}ngOnInit(){}ngOnDestroy(){this.clearSubscriptions()}clearSubscriptions(){null!=this.chatReceiverObservableSubscription&&(this.chatReceiverObservableSubscription.unsubscribe(),this.chatReceiverObservableSubscription=null),null!=this.retrieveConversationsObservableSubscription&&(this.retrieveConversationsObservableSubscription.unsubscribe(),this.retrieveConversationsObservableSubscription=null),null!=this.newChatObservableSubscription&&(this.newChatObservableSubscription.unsubscribe(),this.newChatObservableSubscription=null),null!=this.allFriendsSubjectSubscription&&(this.allFriendsSubjectSubscription.unsubscribe(),this.allFriendsSubjectSubscription=null),this.RTFriendStatusUnsubscriptions.forEach(t=>{t()})}scrollDown(){null!=this.chat_messages&&(this.chat_messages.nativeElement.scrollTop=this.chat_messages.nativeElement.scrollHeight)}scrollHandler(t){var i;"top"===t&&(""===this.lastDate&&(this.lastDate=this.currentConversationThread[0].date),this.messagesService.retriveChatsByDate(this.lastDate,null===(i=this.chatReceiverUser)||void 0===i?void 0:i.email).then(r=>{0!=r.length&&(this.additionalMessages.push(...r),this.lastDate=this.additionalMessages[this.additionalMessages.length-1].date)}).catch(r=>console.error("Error retrieving chats by data"))),"bottom"===t&&(this.detachedFromBottom=!1),"detached_from_bottom"===t&&(this.detachedFromBottom=!0)}_onUserStatusInit(t,i,r){r.otherUserStatuses.has(t)||r.otherUserStatuses.set(t,i)}_onUserStatusUpdate(t,i,r){r.otherUserStatuses.set(t,i)}}return n.\u0275fac=function(t){return new(t||n)(y(Pw),y(Ud),y(pc))},n.\u0275cmp=Qe({type:n,selectors:[["app-chat-feed"]],viewQuery:function(t,i){if(1&t&&jr(bOe,5),2&t){let r;Ge(r=We())&&(i.chat_messages=r.first)}},decls:11,vars:7,consts:[[1,"main-container"],[1,"chat-header"],[1,"chat-header-division"],[1,"chat-header-division-img",3,"ngClass","src"],[1,"chat-header-otherName"],["appScrollable","",1,"chat-messages",3,"scrollPosition"],["chat_messages",""],["class","message-container",3,"ngStyle",4,"ngFor","ngForOf"],[1,"message-container",3,"ngStyle"],[1,"message-bubble",3,"ngClass"],[1,"sent-message-tag"]],template:function(t,i){1&t&&(S(0,"div",0)(1,"div",1)(2,"div",2),et(3,"img",3),S(4,"h1",4),te(5),M()()(),S(6,"div",5,6),J("scrollPosition",function(s){return i.scrollHandler(s)}),Ue(8,wOe,7,9,"div",7),Ue(9,COe,7,9,"div",7),M(),et(10,"app-chat-feed-footer"),M()),2&t&&($(3),nl("src",null!=i.chatReceiverUser?i.chatReceiverUser.photoURL:"https://www.pngall.com/wp-content/uploads/5/Profile-Male-PNG-Free-Download.png",qo),Y("ngClass",Zg(5,EOe,null!=i.chatReceiverUser&&i.otherUserStatuses.has(i.chatReceiverUser.email)&&"online"==i.otherUserStatuses.get(i.chatReceiverUser.email)?"chat-header-img-online":"chat-header-img-offline")),$(2),Ur(" ",null!=i.chatReceiverUser?i.chatReceiverUser.displayName:""," "),$(3),Y("ngForOf",i.currentConversationThread.reverse()),$(1),Y("ngForOf",i.additionalMessages))},directives:[Q0,yOe,Uh,zB,vOe],styles:["app-chat-feed-footer[_ngcontent-%COMP%]{height:30px;width:100%}.main-container[_ngcontent-%COMP%]{display:grid;grid-gap:10px;gap:10px;grid-template-rows:10% 1fr 10%;height:100%;overflow:hidden}.chat-header[_ngcontent-%COMP%]{background-color:#3f82b5;border-radius:.5em;height:100%;width:100%}.chat-header-division[_ngcontent-%COMP%]{align-items:center;display:grid;grid-gap:15px;gap:15px;grid-template-columns:20% 1fr;grid-template-rows:100%;height:100%;width:100%;max-height:100%;max-width:100%}.chat-header-division-img[_ngcontent-%COMP%]{aspect-ratio:1/1;border-radius:50%;justify-self:center;object-fit:fill;height:80%}.chat-header-img-online[_ngcontent-%COMP%]{border:5px solid rgb(97,232,97)}.chat-header-img-offline[_ngcontent-%COMP%]{border:5px solid rgb(178,26,26)}.chat-header-otherName[_ngcontent-%COMP%]{justify-self:center;margin:0;color:#f0f8ff}.chat-messages[_ngcontent-%COMP%]{background-color:beige;display:flex;flex-direction:column-reverse;overflow-y:scroll;width:100%}.message-container[_ngcontent-%COMP%]{display:flex;height:-moz-fit-content;height:fit-content}.message-bubble[_ngcontent-%COMP%]{border-radius:1.5em;padding:10px 10px 5px;margin:10px 10px 0;width:40%}.sent-message[_ngcontent-%COMP%]{background-color:#f0f8ff}.sent-message-tag[_ngcontent-%COMP%]{text-align:end}.received-message[_ngcontent-%COMP%]{background-color:#7fffd4}"]}),n})();function IOe(n,e){1&n&&et(0,"app-chat-feed")}const SOe=[{path:"login",component:WMe},{path:"signup",component:ZMe},{path:"dashboard",component:(()=>{class n{constructor(t){this.messagesService=t,this.showChatFeed=!1,this.showChatFeedObservableSubscription=null,this.showChatFeedObservableSubscription=this.messagesService.showChatFeedObservable.subscribe(i=>{this.showChatFeed=i})}ngOnInit(){}ngOnDestroy(){this.clearSubscriptions()}clearSubscriptions(){null!=this.showChatFeedObservableSubscription&&(this.showChatFeedObservableSubscription.unsubscribe(),this.showChatFeedObservableSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(y(Pw))},n.\u0275cmp=Qe({type:n,selectors:[["app-dashboard"]],decls:7,vars:1,consts:[[1,"dashboard-container"],[1,"main-container"],[1,"sidebar-container"],[1,"chat-container"],[4,"ngIf"]],template:function(t,i){1&t&&(S(0,"div",0),et(1,"app-nav-bar"),S(2,"div",1)(3,"div",2),et(4,"app-sidebar"),M(),S(5,"div",3),Ue(6,IOe,1,0,"app-chat-feed",4),M()()()),2&t&&($(6),Y("ngIf",i.showChatFeed))},directives:[GRe,_Oe,to,DOe],styles:[".dashboard-container[_ngcontent-%COMP%]{display:grid;grid-template-rows:64px 1fr;height:100vh;max-height:100vh;position:relative;overflow:hidden}.main-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:25% 50% 25%;grid-gap:20px;gap:20px;background:#f7f8fb;height:100%}.chat-container[_ngcontent-%COMP%]{max-height:80vh;padding:10px 0}"]}),n})(),canActivate:[(()=>{class n{constructor(t,i){this.authService=t,this.router=i}canActivate(t,i){return new Promise((r,s)=>{this.authService.hasAuthSignedInObservable.pipe(hn(o=>null!=o),li(1)).subscribe(o=>{null==o&&(console.error("In auth guard, loggedIn passed as null"),s()),o?r(!0):(this.router.navigate(["login"]),r(!1))})})}}return n.\u0275fac=function(t){return new(t||n)(w(Oo),w(Wn))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"",redirectTo:"/login",pathMatch:"full"}];function _1(n,e,t){for(let i in e)if(e.hasOwnProperty(i)){const r=e[i];r?n.setProperty(i,r,(null==t?void 0:t.has(i))?"important":""):n.removeProperty(i)}return n}function jd(n,e){const t=e?"":"none";_1(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function x7(n,e,t){_1(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function zw(n,e){return e&&"none"!=e?n+" "+e:n}function M7(n){const e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function y1(n,e){return n.getPropertyValue(e).split(",").map(i=>i.trim())}function v1(n){const e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function b1(n,e,t){const{top:i,bottom:r,left:s,right:o}=n;return t>=i&&t<=r&&e>=s&&e<=o}function qm(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function k7(n,e,t,i){const{top:r,right:s,bottom:o,left:a,width:l,height:c}=n,u=l*e,d=c*e;return i>r-d&&i<o+d&&t>a-u&&t<s+u}class R7{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:v1(t)})})}handleScroll(e){const t=es(e),i=this.positions.get(t);if(!i)return null;const r=i.scrollPosition;let s,o;if(t===this._document){const c=this.getViewportScrollPosition();s=c.top,o=c.left}else s=t.scrollTop,o=t.scrollLeft;const a=r.top-s,l=r.left-o;return this.positions.forEach((c,u)=>{c.clientRect&&t!==u&&t.contains(u)&&qm(c.clientRect,a,l)}),r.top=s,r.left=o,{top:a,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function P7(n){const e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();e.removeAttribute("id");for(let r=0;r<t.length;r++)t[r].removeAttribute("id");return"canvas"===i?F7(n,e):("input"===i||"select"===i||"textarea"===i)&&N7(n,e),O7("canvas",n,e,F7),O7("input, textarea, select",n,e,N7),e}function O7(n,e,t,i){const r=e.querySelectorAll(n);if(r.length){const s=t.querySelectorAll(n);for(let o=0;o<r.length;o++)i(r[o],s[o])}}let xOe=0;function N7(n,e){"file"!==e.type&&(e.value=n.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${xOe++}`)}function F7(n,e){const t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch(i){}}const L7=Va({passive:!0}),qw=Va({passive:!1}),w1=new Set(["position"]);class kOe{constructor(e,t,i,r,s,o){this._config=t,this._document=i,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new H,this._pointerMoveSubscription=Et.EMPTY,this._pointerUpSubscription=Et.EMPTY,this._scrollSubscription=Et.EMPTY,this._resizeSubscription=Et.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new H,this.started=new H,this.released=new H,this.ended=new H,this.entered=new H,this.exited=new H,this.dropped=new H,this.moved=this._moveEvents,this._pointerDown=a=>{if(this.beforeStarted.next(),this._handles.length){const l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&this._initializeDragSequence(l,a)}else this.disabled||this._initializeDragSequence(this._rootElement,a)},this._pointerMove=a=>{const l=this._getPointerPositionOnPage(a);if(!this._hasStartedDragging){if(Math.abs(l.x-this._pickupPositionOnPage.x)+Math.abs(l.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const f=Date.now()>=this._dragStartTime+this._getDragStartDelay(a),p=this._dropContainer;if(!f)return void this._endDragSequence(a);(!p||!p.isDragging()&&!p.isReceiving())&&(a.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(a)))}return}a.preventDefault();const c=this._getConstrainedPointerPosition(l);if(this._hasMoved=!0,this._lastKnownPointerPosition=l,this._updatePointerDirectionDelta(c),this._dropContainer)this._updateActiveDropContainer(c,l);else{const u=this._activeTransform;u.x=c.x-this._pickupPositionOnPage.x+this._passiveTransform.x,u.y=c.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(u.x,u.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:c,event:a,distance:this._getDragDistance(c),delta:this._pointerDirectionDelta})})},this._pointerUp=a=>{this._endDragSequence(a)},this._nativeDragStart=a=>{if(this._handles.length){const l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&a.preventDefault()}else this.disabled||a.preventDefault()},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new R7(i),o.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=an(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(i=>jd(i,t)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(i=>ln(i)),this._handles.forEach(i=>jd(i,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&t.add(i)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=ln(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,qw),t.addEventListener("touchstart",this._pointerDown,L7),t.addEventListener("dragstart",this._nativeDragStart,qw)}),this._initialTransform=void 0,this._rootElement=t),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?ln(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){var e,t;this._removeRootElementListeners(this._rootElement),this.isDragging()&&(null===(e=this._rootElement)||void 0===e||e.remove()),null===(t=this._anchor)||void 0===t||t.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),jd(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),jd(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){var e,t;null===(e=this._preview)||void 0===e||e.remove(),null===(t=this._previewRef)||void 0===t||t.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){var e,t;null===(e=this._placeholder)||void 0===e||e.remove(),null===(t=this._placeholderRef)||void 0===t||t.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){Gm(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const i=this._rootElement,r=i.parentNode,s=this._placeholder=this._createPlaceholderElement(),o=this._anchor=this._anchor||this._document.createComment(""),a=this._getShadowRoot();r.insertBefore(o,i),this._initialTransform=i.style.transform||"",this._preview=this._createPreviewElement(),x7(i,!1,w1),this._document.body.appendChild(r.replaceChild(s,i)),this._getPreviewInsertionPoint(r,a).appendChild(this._preview),this.started.next({source:this}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const i=this.isDragging(),r=Gm(t),s=!r&&0!==t.button,o=this._rootElement,a=es(t),l=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),c=r?zO(t):$O(t);if(a&&a.draggable&&"mousedown"===t.type&&t.preventDefault(),i||s||l||c)return;if(this._handles.length){const h=o.style;this._rootElementTapHighlight=h.webkitTapHighlightColor||"",h.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(h=>this._updateOnScroll(h)),this._boundaryElement&&(this._boundaryRect=v1(this._boundaryElement));const u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(e,t);const d=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:d.x,y:d.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){x7(this._rootElement,!0,w1),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,i=t.getItemIndex(this),r=this._getPointerPositionOnPage(e),s=this._getDragDistance(r),o=t._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:s,dropPoint:r}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:r}),t.drop(this,i,this._initialIndex,this._initialContainer,o,s,r),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:i,y:r}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,e,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,i=e?e.template:null;let r;if(i&&e){const s=e.matchSize?this._rootElement.getBoundingClientRect():null,o=e.viewContainer.createEmbeddedView(i,e.context);o.detectChanges(),r=B7(o,this._document),this._previewRef=o,e.matchSize?U7(r,s):r.style.transform=Gw(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const s=this._rootElement;r=P7(s),U7(r,s.getBoundingClientRect()),this._initialTransform&&(r.style.transform=this._initialTransform)}return _1(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},w1),jd(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(s=>r.classList.add(s)):r.classList.add(t)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const t=function AOe(n){const e=getComputedStyle(n),t=y1(e,"transition-property"),i=t.find(a=>"transform"===a||"all"===a);if(!i)return 0;const r=t.indexOf(i),s=y1(e,"transition-duration"),o=y1(e,"transition-delay");return M7(s[r])+M7(o[r])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{const r=o=>{var a;(!o||es(o)===this._preview&&"transform"===o.propertyName)&&(null===(a=this._preview)||void 0===a||a.removeEventListener("transitionend",r),i(),clearTimeout(s))},s=setTimeout(r,1.5*t);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let i;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),i=B7(this._placeholderRef,this._document)):i=P7(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(e,t){const i=this._rootElement.getBoundingClientRect(),r=e===this._rootElement?null:e,s=r?r.getBoundingClientRect():i,o=Gm(t)?t.targetTouches[0]:t,a=this._getViewportScrollPosition();return{x:s.left-i.left+(o.pageX-s.left-a.left),y:s.top-i.top+(o.pageY-s.top-a.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),i=Gm(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,r=i.pageX-t.left,s=i.pageY-t.top;if(this._ownerSVGElement){const o=this._ownerSVGElement.getScreenCTM();if(o){const a=this._ownerSVGElement.createSVGPoint();return a.x=r,a.y=s,a.matrixTransform(o.inverse())}}return{x:r,y:s}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:i,y:r}=this.constrainPosition?this.constrainPosition(e,this):e;if("x"===this.lockAxis||"x"===t?r=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(i=this._pickupPositionOnPage.x),this._boundaryRect){const{x:s,y:o}=this._pickupPositionInElement,a=this._boundaryRect,{width:l,height:c}=this._getPreviewRect(),u=a.top+o,d=a.bottom-(c-o);i=V7(i,a.left+s,a.right-(l-s)),r=V7(r,u,d)}return{x:i,y:r}}_updatePointerDirectionDelta(e){const{x:t,y:i}=e,r=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(t-s.x),a=Math.abs(i-s.y);return o>this._config.pointerDirectionChangeThreshold&&(r.x=t>s.x?1:-1,s.x=t),a>this._config.pointerDirectionChangeThreshold&&(r.y=i>s.y?1:-1,s.y=i),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,jd(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,qw),e.removeEventListener("touchstart",this._pointerDown,L7),e.removeEventListener("dragstart",this._nativeDragStart,qw)}_applyRootElementTransform(e,t){const i=Gw(e,t),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=zw(i,this._initialTransform)}_applyPreviewTransform(e,t){var i;const r=(null===(i=this._previewTemplate)||void 0===i?void 0:i.template)?void 0:this._initialTransform,s=Gw(e,t);this._preview.style.transform=zw(s,r)}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const i=this._boundaryElement.getBoundingClientRect(),r=this._rootElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===r.width&&0===r.height)return;const s=i.left-r.left,o=r.right-i.right,a=i.top-r.top,l=r.bottom-i.bottom;i.width>r.width?(s>0&&(e+=s),o>0&&(e-=o)):e=0,i.height>r.height?(a>0&&(t+=a),l>0&&(t-=l)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:Gm(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const i=es(e);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&qm(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){var e;return(null===(e=this._parentPositions.positions.get(this._document))||void 0===e?void 0:e.scrollPosition)||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=kO(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){const i=this._previewContainer||"global";if("parent"===i)return e;if("global"===i){const r=this._document;return t||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return ln(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),this._previewRect}_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}}function Gw(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function V7(n,e,t){return Math.max(e,Math.min(t,n))}function Gm(n){return"t"===n.type[0]}function B7(n,e){const t=n.rootNodes;if(1===t.length&&t[0].nodeType===e.ELEMENT_NODE)return t[0];const i=e.createElement("div");return t.forEach(r=>i.appendChild(r)),i}function U7(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=Gw(e.left,e.top)}function Wm(n,e){return Math.max(0,Math.min(e,n))}class POe{constructor(e,t,i,r,s){this._dragDropRegistry=t,this._ngZone=r,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new H,this.entered=new H,this.exited=new H,this.dropped=new H,this.sorted=new H,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=Et.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new H,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function TOe(n=0,e=wf){return n<0&&(n=0),l9(n,n,e)}(0,o9).pipe(Qt(this._stopScrollTimers)).subscribe(()=>{const o=this._scrollNode,a=this.autoScrollStep;1===this._verticalScrollDirection?o.scrollBy(0,-a):2===this._verticalScrollDirection&&o.scrollBy(0,a),1===this._horizontalScrollDirection?o.scrollBy(-a,0):2===this._horizontalScrollDirection&&o.scrollBy(a,0)})},this.element=ln(e),this._document=i,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new R7(i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,i,r){let s;this._draggingStarted(),null==r?(s=this.sortingDisabled?this._draggables.indexOf(e):-1,-1===s&&(s=this._getItemIndexFromPointerPosition(e,t,i))):s=r;const o=this._activeDraggables,a=o.indexOf(e),l=e.getPlaceholderElement();let c=o[s];if(c===e&&(c=o[s+1]),!c&&(null==s||-1===s||s<o.length-1)&&this._shouldEnterAsFirstChild(t,i)&&(c=o[0]),a>-1&&o.splice(a,1),c&&!this._dragDropRegistry.isDragging(c)){const u=c.getRootElement();u.parentElement.insertBefore(l,u),o.splice(s,0,e)}else ln(this.element).appendChild(l),o.push(e);l.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,i,r,s,o,a){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:i,container:this,previousContainer:r,isPointerOverContainer:s,distance:o,dropPoint:a})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(t.filter(r=>r.isDragging()).every(r=>-1===e.indexOf(r))?this._reset():this._cacheItems()),this}withDirection(e){return this._direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._orientation=e,this}withScrollableParents(e){const t=ln(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,i,r){if(this.sortingDisabled||!this._clientRect||!k7(this._clientRect,.05,t,i))return;const s=this._itemPositions,o=this._getItemIndexFromPointerPosition(e,t,i,r);if(-1===o&&s.length>0)return;const a="horizontal"===this._orientation,l=s.findIndex(g=>g.drag===e),c=s[o],d=c.clientRect,h=l>o?1:-1,f=this._getItemOffsetPx(s[l].clientRect,d,h),p=this._getSiblingOffsetPx(l,s,h),m=s.slice();(function ROe(n,e,t){const i=Wm(e,n.length-1),r=Wm(t,n.length-1);if(i===r)return;const s=n[i],o=r<i?-1:1;for(let a=i;a!==r;a+=o)n[a]=n[a+o];n[r]=s})(s,l,o),this.sorted.next({previousIndex:l,currentIndex:o,container:this,item:e}),s.forEach((g,b)=>{if(m[b]===g)return;const v=g.drag===e,E=v?f:p,I=v?e.getPlaceholderElement():g.drag.getRootElement();g.offset+=E,a?(I.style.transform=zw(`translate3d(${Math.round(g.offset)}px, 0, 0)`,g.initialTransform),qm(g.clientRect,0,E)):(I.style.transform=zw(`translate3d(0, ${Math.round(g.offset)}px, 0)`,g.initialTransform),qm(g.clientRect,E,0))}),this._previousSwap.overlaps=b1(d,t,i),this._previousSwap.drag=c.drag,this._previousSwap.delta=a?r.x:r.y}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let i,r=0,s=0;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||i||k7(o.clientRect,.05,e,t)&&([r,s]=function OOe(n,e,t,i){const r=$7(e,i),s=z7(e,t);let o=0,a=0;if(r){const l=n.scrollTop;1===r?l>0&&(o=1):n.scrollHeight-l>n.clientHeight&&(o=2)}if(s){const l=n.scrollLeft;1===s?l>0&&(a=1):n.scrollWidth-l>n.clientWidth&&(a=2)}return[o,a]}(a,o.clientRect,e,t),(r||s)&&(i=a))}),!r&&!s){const{width:o,height:a}=this._viewportRuler.getViewportSize(),l={width:o,height:a,top:0,right:o,bottom:a,left:0};r=$7(l,t),s=z7(l,e),i=window}i&&(r!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=s,this._scrollNode=i,(r||s)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=ln(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=ln(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_cacheItemPositions(){const e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(t=>{const i=t.getVisibleElement();return{drag:t,offset:0,initialTransform:i.style.transform||"",clientRect:v1(i)}}).sort((t,i)=>e?t.clientRect.left-i.clientRect.left:t.clientRect.top-i.clientRect.top)}_reset(){this._isDragging=!1;const e=ln(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(t=>{var i;const r=t.getRootElement();if(r){const s=null===(i=this._itemPositions.find(o=>o.drag===t))||void 0===i?void 0:i.initialTransform;r.style.transform=s||""}}),this._siblings.forEach(t=>t._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(e,t,i){const r="horizontal"===this._orientation,s=t[e].clientRect,o=t[e+-1*i];let a=s[r?"width":"height"]*i;if(o){const l=r?"left":"top",c=r?"right":"bottom";-1===i?a-=o.clientRect[l]-s[c]:a+=s[l]-o.clientRect[c]}return a}_getItemOffsetPx(e,t,i){const r="horizontal"===this._orientation;let s=r?t.left-e.left:t.top-e.top;return-1===i&&(s+=r?t.width-e.width:t.height-e.height),s}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const i=this._itemPositions,r="horizontal"===this._orientation;if(i[0].drag!==this._activeDraggables[0]){const o=i[i.length-1].clientRect;return r?e>=o.right:t>=o.bottom}{const o=i[0].clientRect;return r?e<=o.left:t<=o.top}}_getItemIndexFromPointerPosition(e,t,i,r){const s="horizontal"===this._orientation,o=this._itemPositions.findIndex(({drag:a,clientRect:l})=>{if(a===e)return!1;if(r){const c=s?r.x:r.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&c===this._previousSwap.delta)return!1}return s?t>=Math.floor(l.left)&&t<Math.floor(l.right):i>=Math.floor(l.top)&&i<Math.floor(l.bottom)});return-1!==o&&this.sortPredicate(o,e,this)?o:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(e,t){return null!=this._clientRect&&b1(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,i){return this._siblings.find(r=>r._canReceive(e,t,i))}_canReceive(e,t,i){if(!this._clientRect||!b1(this._clientRect,t,i)||!this.enterPredicate(e,this))return!1;const r=this._getShadowRoot().elementFromPoint(t,i);if(!r)return!1;const s=ln(this.element);return r===s||s.contains(r)}_startReceiving(e,t){const i=this._activeSiblings;!i.has(e)&&t.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(i.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&(this._itemPositions.forEach(({clientRect:i})=>{qm(i,t.top,t.left)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=kO(ln(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._activeDraggables.filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function $7(n,e){const{top:t,bottom:i,height:r}=n,s=.05*r;return e>=t-s&&e<=t+s?1:e>=i-s&&e<=i+s?2:0}function z7(n,e){const{left:t,right:i,width:r}=n,s=.05*r;return e>=t-s&&e<=t+s?1:e>=i-s&&e<=i+s?2:0}const Ww=Va({passive:!1,capture:!0});let NOe=(()=>{class n{constructor(t,i){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new H,this.pointerUp=new H,this.scroll=new H,this._preventDefaultWhileDragging=r=>{this._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=i}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Ww)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Ww)}startDragging(t,i){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const r=i.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Ww}),r||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:Ww}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,o)=>{this._document.addEventListener(o,s.handler,s.options)})})}}stopDragging(t){const i=this._activeDragInstances.indexOf(t);i>-1&&(this._activeDragInstances.splice(i,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const i=[this.scroll];return t&&t!==this._document&&i.push(new it(r=>this._ngZone.runOutsideAngular(()=>{const o=a=>{this._activeDragInstances.length&&r.next(a)};return t.addEventListener("scroll",o,!0),()=>{t.removeEventListener("scroll",o,!0)}}))),Wd(...i)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,i)=>{this._document.removeEventListener(i,t.handler,t.options)}),this._globalListeners.clear()}}return n.\u0275fac=function(t){return new(t||n)(w(oe),w(pe))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const FOe={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let LOe=(()=>{class n{constructor(t,i,r,s){this._document=t,this._ngZone=i,this._viewportRuler=r,this._dragDropRegistry=s}createDrag(t,i=FOe){return new kOe(t,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new POe(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return n.\u0275fac=function(t){return new(t||n)(w(pe),w(oe),w(OO),w(NOe))},n.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),VOe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({providers:[LOe],imports:[Ew]}),n})();function BOe(n,e){}class C1{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const UOe={dialogContainer:hu("dialogContainer",[qr("void, exit",en({opacity:0,transform:"scale(0.7)"})),qr("enter",en({transform:"none"})),ro("* => enter",uU([io("150ms cubic-bezier(0, 0, 0.2, 1)",en({transform:"none",opacity:1})),fU("@*",hU(),{optional:!0})])),ro("* => void, * => exit",uU([io("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",en({opacity:0})),fU("@*",hU(),{optional:!0})]))])};let jOe=(()=>{class n extends Iw{constructor(t,i,r,s,o,a,l,c){super(),this._elementRef=t,this._focusTrapFactory=i,this._changeDetectorRef=r,this._config=o,this._interactivityChecker=a,this._ngZone=l,this._focusMonitor=c,this._animationStateChanged=new Le,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=u=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(u)),this._ariaLabelledBy=o.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=RO())}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const i=RO(),r=this._elementRef.nativeElement;(!i||i===this._document.body||i===r||r.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=RO();return t===i||t.contains(i)}}return n.\u0275fac=function(t){return new(t||n)(y(je),y(Dxe),y(Ei),y(pe,8),y(C1),y(F9),y(oe),y(Mm))},n.\u0275dir=L({type:n,viewQuery:function(t,i){if(1&t&&jr(xm,7),2&t){let r;Ge(r=We())&&(i._portalOutlet=r.first)}},features:[se]}),n})(),HOe=(()=>{class n extends jOe{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:i}){"enter"===t?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:i}))}_onAnimationStart({toState:t,totalTime:i}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mn(n)))(i||n)}}(),n.\u0275cmp=Qe({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,i){1&t&&jg("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&t&&(zg("id",i._id),Zt("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),qg("@dialogContainer",i._state))},features:[se],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&Ue(0,BOe,0,0,"ng-template",0)},directives:[xm],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[UOe.dialogContainer]}}),n})(),$Oe=0;class zOe{constructor(e,t,i="mat-dialog-"+$Oe++){this._overlayRef=e,this._containerInstance=t,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new H,this._afterClosed=new H,this._beforeClosed=new H,this._state=0,t._id=i,t._animationStateChanged.pipe(hn(r=>"opened"===r.state),li(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(hn(r=>"closed"===r.state),li(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(hn(r=>27===r.keyCode&&!this.disableClose&&!Nd(r))).subscribe(r=>{r.preventDefault(),q7(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():q7(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(hn(t=>"closing"===t.state),li(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function q7(n,e,t){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=e),n.close(t)}const qOe=new k("MatDialogData"),GOe=new k("mat-dialog-default-options"),G7=new k("mat-dialog-scroll-strategy"),KOe={provide:G7,deps:[Ba],useFactory:function WOe(n){return()=>n.scrollStrategies.block()}};let QOe=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u,d){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new H,this._afterOpenedAtThisLevel=new H,this._ariaHiddenElements=new Map,this.afterAllClosed=RD(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(gs(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,i){i=function XOe(n,e){return Object.assign(Object.assign({},e),n)}(i,this._defaultOptions||new C1),i.id&&this.getDialogById(i.id);const r=this._createOverlay(i),s=this._attachDialogContainer(r,i),o=this._attachDialogContent(t,s,r,i);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe(()=>this._removeOpenDialog(o)),this.afterOpened.next(o),s._initializeWithAttachedContent(),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const i=this._getOverlayConfig(t);return this._overlay.create(i)}_getOverlayConfig(t){const i=new LO({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachDialogContainer(t,i){const s=Je.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:C1,useValue:i}]}),o=new Od(this._dialogContainerType,i.viewContainerRef,s,i.componentFactoryResolver);return t.attach(o).instance}_attachDialogContent(t,i,r,s){const o=new this._dialogRefConstructor(r,i,s.id);if(t instanceof gr)i.attachTemplatePortal(new Dw(t,null,{$implicit:s.data,dialogRef:o}));else{const a=this._createInjector(s,o,i),l=i.attachComponentPortal(new Od(t,s.viewContainerRef,a,s.componentFactoryResolver));o.componentInstance=l.instance}return o.updateSize(s.width,s.height).updatePosition(s.position),o}_createInjector(t,i,r){const s=t&&t.viewContainerRef&&t.viewContainerRef.injector,o=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:i}];return t.direction&&(!s||!s.get(Tm,null,le.Optional))&&o.push({provide:Tm,useValue:{value:t.direction,change:ne()}}),Je.create({parent:s||this._injector,providers:o})}_removeOpenDialog(t){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){wh()},n.\u0275dir=L({type:n}),n})(),YOe=(()=>{class n extends QOe{constructor(t,i,r,s,o,a,l,c){super(t,i,s,a,l,o,zOe,HOe,qOe,c)}}return n.\u0275fac=function(t){return new(t||n)(w(Ba),w(Je),w(Lh,8),w(GOe,8),w(G7),w(n,12),w(VO),w(wr,8))},n.\u0275prov=O({token:n,factory:n.\u0275fac}),n})(),ZOe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n}),n.\u0275inj=ge({providers:[YOe,KOe],imports:[[BO,Sw,pt],pt]}),n})(),JOe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ye({type:n,bootstrap:[Sde]}),n.\u0275inj=ge({providers:[Oo,Ud,Om],imports:[[sU,lle,_ue.forRoot(SOe),yge(()=>vge(d$_firebase)),fDe(()=>_De()),sbe(()=>lbe()),PRe(()=>NRe()),QTe(()=>XTe()),qRe,$Pe,uMe,VOe,eK,ZOe,HMe,uPe,CPe,uOe,Dde,Ide]]}),n})();(function Uie(){gB=!1})(),Zse().bootstrapModule(JOe).catch(n=>console.error(n))}},me=>{me(me.s=144)}]);